import{u as j,r as c,j as n,a as x,Q as h,b as g,F as S,M as F}from"./index-15626ec6.js";import{F as b,a as V,T as E,L as f,E as w,b as I,c as M,I as $,d as L,S as T,e as B}from"./AuthForms.styled-3b000c00.js";import{L as G,G as O,V as C}from"./VerifyForm-202139f0.js";import{s as D}from"./clusterSchema-c5148432.js";import"./index.esm-69896cfd.js";const d={name:"",email:"",password:""},R=()=>{const e=j(),[t,i]=c.useState("password"),p=({values:r,errors:a,key:s})=>{const l=!r[s]&&"noValue",o=a[s]?"error":"success";return l||o},u=({errors:r,values:a})=>{const s=Object.keys(r).length;return Object.keys(a).some(o=>!a[o])||s},m=(r,a)=>{e(x(r)).unwrap().catch(s=>s.includes("401")&&h.error("Unauthorized")),a.resetForm()};return n.jsx(b,{initialValues:d,validationSchema:D,onSubmit:m,children:({values:r,errors:a})=>n.jsxs(V,{children:[n.jsxs(E,{children:[n.jsx("h2",{children:"Sign up"}),n.jsx(G,{to:"/signin",children:"Have an account?"})]}),Object.keys(d).map(s=>n.jsxs(c.Fragment,{children:[n.jsxs(f,{children:[s.at(0).toUpperCase()+s.substring(1),n.jsx("pre",{children:" "}),n.jsx(w,{name:s,component:"span"})]}),n.jsxs(I,{children:[n.jsx(M,{type:s==="password"?t:s,name:s,$validation:p({values:r,errors:a,key:s})}),s==="password"&&n.jsx($,{toggle:t,setToggle:i}),r[s]&&a[s]&&n.jsx(L,{}),r[s]&&!a[s]&&n.jsx(T,{})]})]},s)),n.jsx(B,{disabled:u({values:r,errors:a}),children:"Sign up"}),n.jsx(O,{children:"Sign up with Google"})]})})},P=()=>{const{user:e}=g(),[t,i]=c.useState(e.email&&!e.verifiedEmail);return n.jsxs(S,{$w:"400px",$p:"0",$fd:"column",$jc:"center",children:[n.jsx(R,{}),t&&n.jsx(F,{onClick:()=>i(!t),children:n.jsx(C,{userEmail:e.email})})]})};export{P as default};
