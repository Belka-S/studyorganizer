import{U as Be,r as D,t as K,P as N,u as oe,b as pe,w as ie,j as $,T as qe,V as Re,y as Ge,G as gt,H as mt,x as fe,S as gn,W as Et,X as xt,Q as ee,A as le,Y as mn,Z as vn,_ as bn,$ as yn,k as _t,n as de,s as F,a0 as wn,a1 as Sn,a2 as $n,a3 as je,a4 as Lt,a5 as Tn,a6 as kn,M as Rn,a7 as An,a8 as Pe,a9 as Cn,aa as En,ab as xn,ac as _n,ad as Ln,ae as Me,F as Ue,E as jn,af as Pn,D as Mn,C as Dn,ag as On,N as In,ah as zn}from"./index-a847ba15.js";import{r as jt,H as Nn,T as Bn}from"./index-48be5877.js";import{w as Pt,S as Wn}from"./googleScopes-804a5aed.js";import{v as Fn,u as Vn}from"./index.esm-835ab947.js";import{a as Gn}from"./index-c70ced51.js";const Ke=(e,n)=>{if(!n.includes("de"))return e;const t=e.trim().split(`
`);return t.length===1?e:["der","die","das"].includes(t[0].split(" ")[0])?`${t[0].trim()}, ${t[1].split("·")[1].replaceAll("⁰","").replaceAll("/"," / ").trim()}`:(e.includes("hat")||e.includes("ist"))&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e.includes("am")&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e},vt=(e,n)=>{let t=e;for(const r in n)t=t.replaceAll(r,n[r]);const u=r=>r.replace(/^./,i=>i.toUpperCase()),s=[...t.split(/\s+/)];for(let r=0;r<s.length;r+=1)[".","!","?"].includes(s[r].at(-1))&&s[r+1]&&s.splice(r+1,1,u(s[r+1]));return s.join(" ")},Un=e=>/[a-z]/.test(e.charAt(0)),{VITE_DEEPL_API_KEY:Kn}={VITE_GOOGLE_CLIENT_ID:"502819804892-294ksvklsg60pjugga88j8l13a6dgmf2.apps.googleusercontent.com",VITE_DEEPL_API_KEY:"d15bf272-fb1f-4f29-bbc3-d3bbdd686c53:fx",VITE_GOOGLE_API_KEY:"AIzaSyABIqXgO4nO0LhnoircvA4SL0uwOY_PxJ4",VITE_PROD_BACK_URL:"https://studyorganizer.onrender.com",BASE_URL:"/studyorganizer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Hn={google:"",deepl:Kn},we=async(e,{from:n,to:t},u)=>{var c,r;if(!e||e.length===0)return"";const s=e.replaceAll(" ·",",").replaceAll("·","");Be.engine=u,Be.key=Hn[u];try{let i=await Be(`${s}`,{from:n,to:t});if(t.includes("en")&&s.toLowerCase().includes("uhr")&&(i=i.replaceAll("a.m. on","am on").replaceAll("p.m. on","pm on").replaceAll("a.m. to","am to").replaceAll("p.m. to","pm to").replaceAll("a.m.","am.").replaceAll("p.m.","pm.")),[".","!","?"].includes(s.at(-1)))return i;const C=s.split(s.includes(", ")?", ":/\s+/),h=i.split(", "),d=t.includes("de")?h[0]:h[0].at(0).toLowerCase()+h[0].substring(1);return C.length===1?i.toLocaleLowerCase()+", ":["der","die","das"].includes(C[0].split(" ")[0])?i.replace("The ","").replace("the ","").split(", ")[0].toLocaleLowerCase()+", ":t.includes("en")&&((c=C[2])!=null&&c.startsWith("am"))?h[2].startsWith("the")?i:`${d}, ${h[1]}, the ${h[2]}`:(C[0].endsWith("n")&&["hat","ist"].includes((r=C[2])==null?void 0:r.split(" ")[0])&&n.includes("de")&&(i=t.includes("en")?"to "+d+", ":d+", "),i)}catch(i){return i.message}},De=(e,n)=>e.endsWith(n)?e.substring(0,e.length-1):e,Yn=(e,n)=>{let t=84;e[0]&&(t=Number(e[0].style.height.replace("px",""))),D.useEffect(()=>{if(!e[0])return;let u=Math.max(...e.map(s=>s.scrollHeight));t!==u&&(u=u<=90?u:u+6,e.forEach(s=>{s.style.height=u+"px"}))},[t,e,n])},Ae=[{value:"de",label:"German"},{value:"en",label:"English"},{value:"uk",label:"Ukrainian"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"it",label:"Italian"}],Ce=[{value:.3,label:"Rate: 0.3"},{value:.4,label:"Rate: 0.4"},{value:.5,label:"Rate: 0.5"},{value:.6,label:"Rate: 0.6"},{value:.8,label:"Rate: 0.8"},{value:1,label:"Rate: 1"},{value:1.25,label:"Rate: 1.25"},{value:1.5,label:"Rate: 1.5"}],qn={"..":".",". .":".","?.":"?","? .":"?","!.":"!","! .":"!",",,":",",", ,":","},Xn={" Dot":"."," dot":"."," exclamation mark":"!"," question mark":"?"," comma":","," colon":":"," semi-colon":";","Yes ":"Yes, ","No ":"No, "},Jn={" Punkt":"."," Ausrufezeichen":"!"," Fragezeichen":"?"," Komma":","," Doppelpunkt":":"," Semikolon":";","Ja ":"Ja, ","Nein ":"Nein, "," weil":", weil"," aber":", aber"," als":", als"," ob":", ob"," damit":", damit"," bevor":", bevor"," obwohl":", obwohl"," dass":", dass"," dann":", dann"," deshalb":", deshalb"," desvegen":", desvegen"," trotzdem":", trotzdem"},bt={...Xn,...Jn,...qn};var He=new Map,Ee=new WeakMap,yt=0,Zn=void 0;function Qn(e){return e?(Ee.has(e)||(yt+=1,Ee.set(e,yt.toString())),Ee.get(e)):"0"}function er(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?Qn(e.root):e[n]}`).toString()}function tr(e){const n=er(e);let t=He.get(n);if(!t){const u=new Map;let s;const c=new IntersectionObserver(r=>{r.forEach(i=>{var m;const C=i.isIntersecting&&s.some(h=>i.intersectionRatio>=h);e.trackVisibility&&typeof i.isVisible>"u"&&(i.isVisible=C),(m=u.get(i.target))==null||m.forEach(h=>{h(C,i)})})},e);s=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:n,observer:c,elements:u},He.set(n,t)}return t}function nr(e,n,t={},u=Zn){if(typeof window.IntersectionObserver>"u"&&u!==void 0){const m=e.getBoundingClientRect();return n(u,{isIntersecting:u,target:e,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:m,intersectionRect:m,rootBounds:m}),()=>{}}const{id:s,observer:c,elements:r}=tr(t),i=r.get(e)||[];return r.has(e)||r.set(e,i),i.push(n),c.observe(e),function(){i.splice(i.indexOf(n),1),i.length===0&&(r.delete(e),c.unobserve(e)),r.size===0&&(c.disconnect(),He.delete(s))}}function rr({threshold:e,delay:n,trackVisibility:t,rootMargin:u,root:s,triggerOnce:c,skip:r,initialInView:i,fallbackInView:m,onChange:C}={}){var h;const[d,y]=D.useState(null),f=D.useRef(C),[R,E]=D.useState({inView:!!i,entry:void 0});f.current=C,D.useEffect(()=>{if(r||!d)return;let k;return k=nr(d,(l,S)=>{E({inView:l,entry:S}),f.current&&f.current(l,S),S.isIntersecting&&c&&k&&(k(),k=void 0)},{root:s,rootMargin:u,threshold:e,trackVisibility:t,delay:n},m),()=>{k&&k()}},[Array.isArray(e)?e.toString():e,d,s,u,c,r,t,m,n]);const p=(h=R.entry)==null?void 0:h.target,v=D.useRef(void 0);!d&&p&&!c&&!r&&v.current!==p&&(v.current=p,E({inView:!!i,entry:void 0}));const g=[y,R.inView,R.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}const{backgroundHoverd:xe,white:_e,borderLight:Le}=K.colors,Mt=()=>{const e=oe(),{user:n}=pe(),{activeCluster:t}=ie(),u=({value:i})=>{e(Ge({_id:t._id,lang:i})).unwrap().then(m=>e(gt(m.result.cluster)))},s=({value:i})=>{e(Ge({_id:t._id,rate:i})).unwrap().then(m=>e(gt(m.result.cluster)))},c=({value:i})=>{const m=new FormData;m.append("lang",i),e(mt(m))},r=({value:i})=>{const m=new FormData;m.append("rate",i),e(mt(m))};return $.jsxs(qe,{$m:"0",$cg:"8px",$ai:"center",$gtc:"2fr 2fr 2fr 2fr",children:[$.jsx(Re,{options:Ae,defaultValue:Ae.find(i=>i.value===(t==null?void 0:t.lang)),onChange:u,placeholder:"Language...",$ol:xe,$b:_e,$bh:Le}),$.jsx(Re,{options:Ce,defaultValue:Ce.find(i=>i.value==(t==null?void 0:t.rate)),onChange:s,placeholder:"Rate...",$ol:xe,$b:_e,$bh:Le}),$.jsx(Re,{options:Ae,defaultValue:Ae.find(i=>i.value===n.lang),onChange:c,placeholder:"Language...",$ol:xe,$b:_e,$bh:Le}),$.jsx(Re,{options:Ce,defaultValue:Ce.find(i=>i.value==n.rate),onChange:r,placeholder:"Rate...",$ol:xe,$b:_e,$bh:Le})]})};Mt.propTypes={filtredElements:N.array,setLiColor:N.func};const{button:ir}=K.shadows,sr=()=>{const e=oe(),{user:n}=pe(),{activeCluster:t}=ie();D.useEffect(()=>{const s=async c=>{c.key==="e"&&c.metaKey&&!c.altKey&&!c.shiftKey&&(c.preventDefault(),await u())};return addEventListener("keydown",s),()=>{removeEventListener("keydown",s)}},[]);const u=async s=>{const c=window.getSelection().toString();c&&await Pt(c);const r=await jt();let i=Ke(r,t.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();i=De(i,",");const m={from:t.lang,to:n.lang};let C=await we(i,m,n.engine);C=De(C.trim(),",");const{_id:h}=t;try{const d={cluster:h,element:"[]",caption:i},y={cluster:h,element:i,caption:C,favorite:!0,checked:i.split(/\s+/).length<20},f=i.includes("https://")?d:y;e(Et(f)).unwrap().then(()=>(s==null?void 0:s.target)&&xt()).finally(()=>{var R;return(R=s==null?void 0:s.target)==null?void 0:R.blur()})}catch(d){s==null||s.currentTarget.blur(),ee.error(`Invalid element, ${d.message}`)}};return $.jsx(fe,{onClick:u,$s:"m",$round:!0,$bs:ir,children:$.jsx(gn,{size:18})})},{button:or}=K.shadows,ar=()=>{const e=oe(),{elementTrash:n}=le(),t=()=>{confirm("Are you sure you want to delete the selected Element(s)?")&&e(mn(n.map(u=>u._id).join("&"))).unwrap().then(()=>e(vn()))};return $.jsx(fe,{onClick:t,$s:"m",$round:!0,$bs:or,children:$.jsx(Nn,{size:16})})};function cr(e){return bn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M250.73,210.63l-56-112a12,12,0,0,0-21.46,0l-20.52,41A84.2,84.2,0,0,1,114,126.22,107.48,107.48,0,0,0,139.33,68H160a12,12,0,0,0,0-24H108V32a12,12,0,0,0-24,0V44H32a12,12,0,0,0,0,24h83.13A83.69,83.69,0,0,1,96,110.35,84,84,0,0,1,83.6,91a12,12,0,1,0-21.81,10A107.55,107.55,0,0,0,78,126.24,83.54,83.54,0,0,1,32,140a12,12,0,0,0,0,24,107.47,107.47,0,0,0,64-21.07,108.4,108.4,0,0,0,45.39,19.44l-24.13,48.26a12,12,0,1,0,21.46,10.73L151.41,196h65.17l12.68,25.36a12,12,0,1,0,21.47-10.73ZM163.41,172,184,130.83,204.58,172Z"},child:[]}]})(e)}const{button:lr}=K.shadows,ur=()=>{const{activeCluster:e}=ie();D.useEffect(()=>{const c=async r=>{r.metaKey&&r.key==="d"&&!r.altKey&&!r.shiftKey&&(r.preventDefault(),await s())};return addEventListener("keydown",c),()=>{removeEventListener("keydown",c)}},[]);let n=[];function t(c){c.forEach(r=>{const i=window.open(r,"_blank");i?n.push(i):ee.error(`Failed to open tab: ${r}`)})}const u=()=>{n.forEach(c=>{c.close()}),n=[]},s=async()=>{const c=window.getSelection().toString();c&&await Pt(c);const r=await jt();let i=[];e.lang.includes("de")&&i.push(`https://www.verbformen.com/conjugation/?w=${r}`),e.lang.includes("en")&&i.push(`https://dictionary.cambridge.org/dictionary/english-russian/${r}`),u(),t(i)};return $.jsx(fe,{onClick:s,$s:"m",$round:!0,$bs:lr,children:$.jsx(cr,{size:18})})},{s:wt,m:pr}=K.indents,Dt=({className:e})=>{const{pathname:n}=yn(),{elementTrash:t}=le(),{activeCluster:u}=ie(),s=t.length>0?" 1fr":"",c=u?" 1fr":"",r=s+c+" 1fr";if(n.includes("/element"))return $.jsxs(qe,{className:e,$m:`${wt} ${pr}`,$pos:"fixed",$side:"left",$high:"bottom",$gtc:r,$cg:wt,children:[$.jsx(ur,{}),c&&$.jsx(sr,{}),s&&$.jsx(ar,{})]})};Dt.propTypes={className:N.string};var fr={exports:{}};(function(e){var n=function(t){var u=Object.prototype,s=u.hasOwnProperty,c=Object.defineProperty||function(o,a,w){o[a]=w.value},r,i=typeof Symbol=="function"?Symbol:{},m=i.iterator||"@@iterator",C=i.asyncIterator||"@@asyncIterator",h=i.toStringTag||"@@toStringTag";function d(o,a,w){return Object.defineProperty(o,a,{value:w,enumerable:!0,configurable:!0,writable:!0}),o[a]}try{d({},"")}catch{d=function(a,w,j){return a[w]=j}}function y(o,a,w,j){var L=a&&a.prototype instanceof k?a:k,I=Object.create(L.prototype),H=new z(j||[]);return c(I,"_invoke",{value:A(o,w,H)}),I}t.wrap=y;function f(o,a,w){try{return{type:"normal",arg:o.call(a,w)}}catch(j){return{type:"throw",arg:j}}}var R="suspendedStart",E="suspendedYield",p="executing",v="completed",g={};function k(){}function l(){}function S(){}var T={};d(T,m,function(){return this});var b=Object.getPrototypeOf,P=b&&b(b(O([])));P&&P!==u&&s.call(P,m)&&(T=P);var W=S.prototype=k.prototype=Object.create(T);l.prototype=S,c(W,"constructor",{value:S,configurable:!0}),c(S,"constructor",{value:l,configurable:!0}),l.displayName=d(S,h,"GeneratorFunction");function B(o){["next","throw","return"].forEach(function(a){d(o,a,function(w){return this._invoke(a,w)})})}t.isGeneratorFunction=function(o){var a=typeof o=="function"&&o.constructor;return a?a===l||(a.displayName||a.name)==="GeneratorFunction":!1},t.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,S):(o.__proto__=S,d(o,h,"GeneratorFunction")),o.prototype=Object.create(W),o},t.awrap=function(o){return{__await:o}};function Q(o,a){function w(I,H,Y,X){var U=f(o[I],o,H);if(U.type==="throw")X(U.arg);else{var ge=U.arg,ae=ge.value;return ae&&typeof ae=="object"&&s.call(ae,"__await")?a.resolve(ae.__await).then(function(re){w("next",re,Y,X)},function(re){w("throw",re,Y,X)}):a.resolve(ae).then(function(re){ge.value=re,Y(ge)},function(re){return w("throw",re,Y,X)})}}var j;function L(I,H){function Y(){return new a(function(X,U){w(I,H,X,U)})}return j=j?j.then(Y,Y):Y()}c(this,"_invoke",{value:L})}B(Q.prototype),d(Q.prototype,C,function(){return this}),t.AsyncIterator=Q,t.async=function(o,a,w,j,L){L===void 0&&(L=Promise);var I=new Q(y(o,a,w,j),L);return t.isGeneratorFunction(a)?I:I.next().then(function(H){return H.done?H.value:I.next()})};function A(o,a,w){var j=R;return function(I,H){if(j===p)throw new Error("Generator is already running");if(j===v){if(I==="throw")throw H;return V()}for(w.method=I,w.arg=H;;){var Y=w.delegate;if(Y){var X=_(Y,w);if(X){if(X===g)continue;return X}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(j===R)throw j=v,w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);j=p;var U=f(o,a,w);if(U.type==="normal"){if(j=w.done?v:E,U.arg===g)continue;return{value:U.arg,done:w.done}}else U.type==="throw"&&(j=v,w.method="throw",w.arg=U.arg)}}}function _(o,a){var w=a.method,j=o.iterator[w];if(j===r)return a.delegate=null,w==="throw"&&o.iterator.return&&(a.method="return",a.arg=r,_(o,a),a.method==="throw")||w!=="return"&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+w+"' method")),g;var L=f(j,o.iterator,a.arg);if(L.type==="throw")return a.method="throw",a.arg=L.arg,a.delegate=null,g;var I=L.arg;if(!I)return a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,g;if(I.done)a[o.resultName]=I.value,a.next=o.nextLoc,a.method!=="return"&&(a.method="next",a.arg=r);else return I;return a.delegate=null,g}B(W),d(W,h,"Generator"),d(W,m,function(){return this}),d(W,"toString",function(){return"[object Generator]"});function x(o){var a={tryLoc:o[0]};1 in o&&(a.catchLoc=o[1]),2 in o&&(a.finallyLoc=o[2],a.afterLoc=o[3]),this.tryEntries.push(a)}function M(o){var a=o.completion||{};a.type="normal",delete a.arg,o.completion=a}function z(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(x,this),this.reset(!0)}t.keys=function(o){var a=Object(o),w=[];for(var j in a)w.push(j);return w.reverse(),function L(){for(;w.length;){var I=w.pop();if(I in a)return L.value=I,L.done=!1,L}return L.done=!0,L}};function O(o){if(o!=null){var a=o[m];if(a)return a.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var w=-1,j=function L(){for(;++w<o.length;)if(s.call(o,w))return L.value=o[w],L.done=!1,L;return L.value=r,L.done=!0,L};return j.next=j}}throw new TypeError(typeof o+" is not iterable")}t.values=O;function V(){return{value:r,done:!0}}return z.prototype={constructor:z,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!o)for(var a in this)a.charAt(0)==="t"&&s.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=r)},stop:function(){this.done=!0;var o=this.tryEntries[0],a=o.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var a=this;function w(X,U){return I.type="throw",I.arg=o,a.next=X,U&&(a.method="next",a.arg=r),!!U}for(var j=this.tryEntries.length-1;j>=0;--j){var L=this.tryEntries[j],I=L.completion;if(L.tryLoc==="root")return w("end");if(L.tryLoc<=this.prev){var H=s.call(L,"catchLoc"),Y=s.call(L,"finallyLoc");if(H&&Y){if(this.prev<L.catchLoc)return w(L.catchLoc,!0);if(this.prev<L.finallyLoc)return w(L.finallyLoc)}else if(H){if(this.prev<L.catchLoc)return w(L.catchLoc,!0)}else if(Y){if(this.prev<L.finallyLoc)return w(L.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(o,a){for(var w=this.tryEntries.length-1;w>=0;--w){var j=this.tryEntries[w];if(j.tryLoc<=this.prev&&s.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var L=j;break}}L&&(o==="break"||o==="continue")&&L.tryLoc<=a&&a<=L.finallyLoc&&(L=null);var I=L?L.completion:{};return I.type=o,I.arg=a,L?(this.method="next",this.next=L.finallyLoc,g):this.complete(I)},complete:function(o,a){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&a&&(this.next=a),g},finish:function(o){for(var a=this.tryEntries.length-1;a>=0;--a){var w=this.tryEntries[a];if(w.finallyLoc===o)return this.complete(w.completion,w.afterLoc),M(w),g}},catch:function(o){for(var a=this.tryEntries.length-1;a>=0;--a){var w=this.tryEntries[a];if(w.tryLoc===o){var j=w.completion;if(j.type==="throw"){var L=j.arg;M(w)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(o,a,w){return this.delegate={iterator:O(o),resultName:a,nextLoc:w},this.method==="next"&&(this.arg=r),g}},t}(e.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(fr);var ye={},Ot={},J={};Object.defineProperty(J,"__esModule",{value:!0});J.browserSupportsPolyfills=J.compareTwoStringsUsingDiceCoefficient=J.commandToRegExp=J.concatTranscripts=J.debounce=void 0;var hr=function(n,t,u){var s;return function(){var c=this,r=arguments,i=function(){s=null,u||n.apply(c,r)},m=u&&!s;clearTimeout(s),s=setTimeout(i,t),m&&n.apply(c,r)}};J.debounce=hr;var dr=function(){for(var n=arguments.length,t=new Array(n),u=0;u<n;u++)t[u]=arguments[u];return t.map(function(s){return s.trim()}).join(" ").trim()};J.concatTranscripts=dr;var gr=/\s*\((.*?)\)\s*/g,mr=/(\(\?:[^)]+\))\?/g,vr=/(\(\?)?:\w+/g,br=/\*/g,yr=/[-{}[\]+?.,\\^$|#]/g,wr=function(n){return n instanceof RegExp?new RegExp(n.source,"i"):(n=n.replace(yr,"\\$&").replace(gr,"(?:$1)?").replace(vr,function(t,u){return u?t:"([^\\s]+)"}).replace(br,"(.*?)").replace(mr,"\\s*$1?\\s*"),new RegExp("^"+n+"$","i"))};J.commandToRegExp=wr;var Sr=function(n,t){if(n=n.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!n.length&&!t.length)return 1;if(!n.length||!t.length)return 0;if(n===t)return 1;if(n.length===1&&t.length===1||n.length<2||t.length<2)return 0;for(var u=new Map,s=0;s<n.length-1;s++){var c=n.substring(s,s+2),r=u.has(c)?u.get(c)+1:1;u.set(c,r)}for(var i=0,m=0;m<t.length-1;m++){var C=t.substring(m,m+2),h=u.has(C)?u.get(C):0;h>0&&(u.set(C,h-1),i++)}return 2*i/(n.length+t.length-2)};J.compareTwoStringsUsingDiceCoefficient=Sr;var $r=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};J.browserSupportsPolyfills=$r;var he={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.APPEND_TRANSCRIPT=ue.CLEAR_TRANSCRIPT=void 0;var Tr="CLEAR_TRANSCRIPT";ue.CLEAR_TRANSCRIPT=Tr;var kr="APPEND_TRANSCRIPT";ue.APPEND_TRANSCRIPT=kr;Object.defineProperty(he,"__esModule",{value:!0});he.appendTranscript=he.clearTranscript=void 0;var It=ue,Rr=function(){return{type:It.CLEAR_TRANSCRIPT}};he.clearTranscript=Rr;var Ar=function(n,t){return{type:It.APPEND_TRANSCRIPT,payload:{interimTranscript:n,finalTranscript:t}}};he.appendTranscript=Ar;var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.transcriptReducer=void 0;var St=ue,Cr=J,Er=function(n,t){switch(t.type){case St.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case St.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,Cr.concatTranscripts)(n.finalTranscript,t.payload.finalTranscript)};default:throw new Error}};Ie.transcriptReducer=Er;var zt={},Xe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=n})(Xe);var Je={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var n=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),t=function(c){return c===n};e.isNative=t;var u=n;e.default=u})(Je);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(Xe),t=J,u=Je;function s(d){return d&&d.__esModule?d:{default:d}}function c(d,y,f,R,E,p,v){try{var g=d[p](v),k=g.value}catch(l){f(l);return}g.done?y(k):Promise.resolve(k).then(R,E)}function r(d){return function(){var y=this,f=arguments;return new Promise(function(R,E){var p=d.apply(y,f);function v(k){c(p,R,E,v,g,"next",k)}function g(k){c(p,R,E,v,g,"throw",k)}v(void 0)})}}function i(d,y){if(!(d instanceof y))throw new TypeError("Cannot call a class as a function")}function m(d,y){for(var f=0;f<y.length;f++){var R=y[f];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(d,R.key,R)}}function C(d,y,f){return y&&m(d.prototype,y),f&&m(d,f),d}var h=function(){function d(y){i(this,d),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(y),(0,n.default)()&&(this.updateFinalTranscript=(0,t.debounce)(this.updateFinalTranscript,250,!0))}return C(d,[{key:"setSpeechRecognition",value:function(f){var R=!!f&&((0,u.isNative)(f)||(0,t.browserSupportsPolyfills)());R&&(this.disableRecognition(),this.recognition=new f,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(R)}},{key:"subscribe",value:function(f,R){this.subscribers[f]=R}},{key:"unsubscribe",value:function(f){delete this.subscribers[f]}},{key:"emitListeningChange",value:function(f){var R=this;this.listening=f,Object.keys(this.subscribers).forEach(function(E){var p=R.subscribers[E].onListeningChange;p(f)})}},{key:"emitMicrophoneAvailabilityChange",value:function(f){var R=this;this.isMicrophoneAvailable=f,Object.keys(this.subscribers).forEach(function(E){var p=R.subscribers[E].onMicrophoneAvailabilityChange;p(f)})}},{key:"emitTranscriptChange",value:function(f,R){var E=this;Object.keys(this.subscribers).forEach(function(p){var v=E.subscribers[p].onTranscriptChange;v(f,R)})}},{key:"emitClearTranscript",value:function(){var f=this;Object.keys(this.subscribers).forEach(function(R){var E=f.subscribers[R].onClearTranscript;E()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(f){var R=this;Object.keys(this.subscribers).forEach(function(E){var p=R.subscribers[E],v=p.onBrowserSupportsSpeechRecognitionChange,g=p.onBrowserSupportsContinuousListeningChange;v(f),g(f)})}},{key:"disconnect",value:function(f){if(this.recognition&&this.listening)switch(f){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(f){f&&f.error&&f.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(f){var R=f.results,E=f.resultIndex,p=E===void 0?R.length-1:E;this.interimTranscript="",this.finalTranscript="";for(var v=p;v<R.length;++v)R[v].isFinal&&(!(0,n.default)()||R[v][0].confidence>0)?this.updateFinalTranscript(R[v][0].transcript):this.interimTranscript=(0,t.concatTranscripts)(this.interimTranscript,R[v][0].transcript);var g=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(g=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,g||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(f){this.finalTranscript=(0,t.concatTranscripts)(this.finalTranscript,f)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var y=r(regeneratorRuntime.mark(function R(){var E,p,v,g,k,l,S=arguments;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(E=S.length>0&&S[0]!==void 0?S[0]:{},p=E.continuous,v=p===void 0?!1:p,g=E.language,this.recognition){b.next=3;break}return b.abrupt("return");case 3:if(k=v!==this.recognition.continuous,l=g&&g!==this.recognition.lang,!(k||l)){b.next=11;break}if(!this.listening){b.next=9;break}return b.next=9,this.stopListening();case 9:this.recognition.continuous=k?v:this.recognition.continuous,this.recognition.lang=l?g:this.recognition.lang;case 11:if(this.listening){b.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),b.prev=13,b.next=16,this.start();case 16:this.emitListeningChange(!0),b.next=22;break;case 19:b.prev=19,b.t0=b.catch(13),b.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return b.stop()}},R,this,[[13,19]])}));function f(){return y.apply(this,arguments)}return f}()},{key:"abortListening",value:function(){var y=r(regeneratorRuntime.mark(function R(){var E=this;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),v.next=4,new Promise(function(g){E.onStopListening=g});case 4:case"end":return v.stop()}},R,this)}));function f(){return y.apply(this,arguments)}return f}()},{key:"stopListening",value:function(){var y=r(regeneratorRuntime.mark(function R(){var E=this;return regeneratorRuntime.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),v.next=4,new Promise(function(g){E.onStopListening=g});case 4:case"end":return v.stop()}},R,this)}));function f(){return y.apply(this,arguments)}return f}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var y=r(regeneratorRuntime.mark(function R(){return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!(this.recognition&&!this.listening)){p.next=4;break}return p.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return p.stop()}},R,this)}));function f(){return y.apply(this,arguments)}return f}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),d}();e.default=h})(zt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var n=D,t=J,u=he,s=Ie,c=m(zt),r=m(Xe),i=m(Je);function m(A){return A&&A.__esModule?A:{default:A}}function C(A,_,x,M,z,O,V){try{var o=A[O](V),a=o.value}catch(w){x(w);return}o.done?_(a):Promise.resolve(a).then(M,z)}function h(A){return function(){var _=this,x=arguments;return new Promise(function(M,z){var O=A.apply(_,x);function V(a){C(O,M,z,V,o,"next",a)}function o(a){C(O,M,z,V,o,"throw",a)}V(void 0)})}}function d(A){return R(A)||f(A)||g(A)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(A){if(typeof Symbol<"u"&&Symbol.iterator in Object(A))return Array.from(A)}function R(A){if(Array.isArray(A))return k(A)}function E(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(x){return typeof x}:E=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},E(A)}function p(A,_){return S(A)||l(A,_)||g(A,_)||v()}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(A,_){if(A){if(typeof A=="string")return k(A,_);var x=Object.prototype.toString.call(A).slice(8,-1);if(x==="Object"&&A.constructor&&(x=A.constructor.name),x==="Map"||x==="Set")return Array.from(A);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return k(A,_)}}function k(A,_){(_==null||_>A.length)&&(_=A.length);for(var x=0,M=new Array(_);x<_;x++)M[x]=A[x];return M}function l(A,_){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(A)))){var x=[],M=!0,z=!1,O=void 0;try{for(var V=A[Symbol.iterator](),o;!(M=(o=V.next()).done)&&(x.push(o.value),!(_&&x.length===_));M=!0);}catch(a){z=!0,O=a}finally{try{!M&&V.return!=null&&V.return()}finally{if(z)throw O}}return x}}function S(A){if(Array.isArray(A))return A}var T=!!i.default,b=T&&!(0,r.default)(),P,W=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=_.transcribing,M=x===void 0?!0:x,z=_.clearTranscriptOnListen,O=z===void 0?!0:z,V=_.commands,o=V===void 0?[]:V,a=(0,n.useState)(B.getRecognitionManager()),w=p(a,1),j=w[0],L=(0,n.useState)(T),I=p(L,2),H=I[0],Y=I[1],X=(0,n.useState)(b),U=p(X,2),ge=U[0],ae=U[1],re=(0,n.useReducer)(s.transcriptReducer,{interimTranscript:j.interimTranscript,finalTranscript:""}),Qe=p(re,2),et=Qe[0],tt=et.interimTranscript,nt=et.finalTranscript,rt=Qe[1],qt=(0,n.useState)(j.listening),it=p(qt,2),Xt=it[0],Jt=it[1],Zt=(0,n.useState)(j.isMicrophoneAvailable),st=p(Zt,2),Qt=st[0],en=st[1],ot=(0,n.useRef)(o);ot.current=o;var at=function(){rt((0,u.clearTranscript)())},me=(0,n.useCallback)(function(){j.resetTranscript(),at()},[j]),tn=function(q,ne,ce){var se=E(q)==="object"?q.toString():q,ve=se.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),$e=(0,t.compareTwoStringsUsingDiceCoefficient)(ve,ne);return $e>=ce?{command:q,commandWithoutSpecials:ve,howSimilar:$e,isFuzzyMatch:!0}:null},nn=function(q,ne){var ce=(0,t.commandToRegExp)(q),se=ce.exec(ne);return se?{command:q,parameters:se.slice(1)}:null},ct=(0,n.useCallback)(function(te,q){ot.current.forEach(function(ne){var ce=ne.command,se=ne.callback,ve=ne.matchInterim,$e=ve===void 0?!1:ve,pt=ne.isFuzzyMatch,ft=pt===void 0?!1:pt,ht=ne.fuzzyMatchingThreshold,sn=ht===void 0?.8:ht,dt=ne.bestMatchOnly,on=dt===void 0?!1:dt,Te=!q&&$e?te.trim():q.trim(),an=Array.isArray(ce)?ce:[ce],ke=an.map(function(Z){return ft?tn(Z,Te,sn):nn(Z,Te)}).filter(function(Z){return Z});if(ft&&on&&ke.length>=2){ke.sort(function(Z,Ne){return Ne.howSimilar-Z.howSimilar});var ze=ke[0],cn=ze.command,ln=ze.commandWithoutSpecials,un=ze.howSimilar;se(ln,Te,un,{command:cn,resetTranscript:me})}else ke.forEach(function(Z){if(Z.isFuzzyMatch){var Ne=Z.command,pn=Z.commandWithoutSpecials,fn=Z.howSimilar;se(pn,Te,fn,{command:Ne,resetTranscript:me})}else{var hn=Z.command,dn=Z.parameters;se.apply(void 0,d(dn).concat([{command:hn,resetTranscript:me}]))}})})},[me]),lt=(0,n.useCallback)(function(te,q){M&&rt((0,u.appendTranscript)(te,q)),ct(te,q)},[ct,M]),ut=(0,n.useCallback)(function(){O&&at()},[O]);(0,n.useEffect)(function(){var te=B.counter;B.counter+=1;var q={onListeningChange:Jt,onMicrophoneAvailabilityChange:en,onTranscriptChange:lt,onClearTranscript:ut,onBrowserSupportsSpeechRecognitionChange:Y,onBrowserSupportsContinuousListeningChange:ae};return j.subscribe(te,q),function(){j.unsubscribe(te)}},[M,O,j,lt,ut]);var rn=(0,t.concatTranscripts)(nt,tt);return{transcript:rn,interimTranscript:tt,finalTranscript:nt,listening:Xt,isMicrophoneAvailable:Qt,resetTranscript:me,browserSupportsSpeechRecognition:H,browserSupportsContinuousListening:ge}};e.useSpeechRecognition=W;var B={counter:0,applyPolyfill:function(_){P?P.setSpeechRecognition(_):P=new c.default(_);var x=!!_&&(0,t.browserSupportsPolyfills)();T=x,b=x},removePolyfill:function(){P?P.setSpeechRecognition(i.default):P=new c.default(i.default),T=!!i.default,b=T&&!(0,r.default)()},getRecognitionManager:function(){return P||(P=new c.default(i.default)),P},getRecognition:function(){var _=B.getRecognitionManager();return _.getRecognition()},startListening:function(){var A=h(regeneratorRuntime.mark(function x(){var M,z,O,V,o=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return M=o.length>0&&o[0]!==void 0?o[0]:{},z=M.continuous,O=M.language,V=B.getRecognitionManager(),w.next=4,V.startListening({continuous:z,language:O});case 4:case"end":return w.stop()}},x)}));function _(){return A.apply(this,arguments)}return _}(),stopListening:function(){var A=h(regeneratorRuntime.mark(function x(){var M;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return M=B.getRecognitionManager(),O.next=3,M.stopListening();case 3:case"end":return O.stop()}},x)}));function _(){return A.apply(this,arguments)}return _}(),abortListening:function(){var A=h(regeneratorRuntime.mark(function x(){var M;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return M=B.getRecognitionManager(),O.next=3,M.abortListening();case 3:case"end":return O.stop()}},x)}));function _(){return A.apply(this,arguments)}return _}(),browserSupportsSpeechRecognition:function(){return T},browserSupportsContinuousListening:function(){return b}},Q=B;e.default=Q})(Ot);(function(e){function n(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(m){return typeof m}:n=function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},n(r)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return t.useSpeechRecognition}}),e.default=void 0;var t=s(Ot);function u(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return u=function(){return r},r}function s(r){if(r&&r.__esModule)return r;if(r===null||n(r)!=="object"&&typeof r!="function")return{default:r};var i=u();if(i&&i.has(r))return i.get(r);var m={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(Object.prototype.hasOwnProperty.call(r,h)){var d=C?Object.getOwnPropertyDescriptor(r,h):null;d&&(d.get||d.set)?Object.defineProperty(m,h,d):m[h]=r[h]}return m.default=r,i&&i.set(r,m),m}var c=t.default;e.default=c})(ye);const be=_t(ye);var Nt={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var n={}.hasOwnProperty;function t(){for(var u=[],s=0;s<arguments.length;s++){var c=arguments[s];if(c){var r=typeof c;if(r==="string"||r==="number")u.push(c);else if(Array.isArray(c)){if(c.length){var i=t.apply(null,c);i&&u.push(i)}}else if(r==="object"){if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]")){u.push(c.toString());continue}for(var m in c)n.call(c,m)&&c[m]&&u.push(m)}}}return u.join(" ")}e.exports?(t.default=t,e.exports=t):window.classNames=t})()})(Nt);var xr=Nt.exports;const _r=_t(xr),{colors:G,shadows:$t,indents:We}=K,Lr=de`
  margin-bottom: 7px;
  padding-block: ${We.xs};

  display: grid;
  align-items: center;
  grid-template-columns: 1fr 25fr 1fr;
  column-gap: 4px;

  border: 1px solid transparent;
  background-color: ${({licolor:e})=>e};
  border-radius: ${We.xs};
  font-size: 22px;

  &:last-of-type {
    margin-bottom: ${We.s};
  }
`,jr=F.li`
  ${Lr}

  transition: box-shadow 250ms, border-color 250ms;

  &#active-element {
    border-color: ${G.border};
    background-color: ${G.background};
    box-shadow: ${$t.back};

    &:hover {
      border-color: ${G.accent};
    }
    & div button {
      transition: color 250ms;
      color: ${G.smokeBlack};
      &:hover {
        color: ${G.hovered};
      }
    }
  }

  & div button {
    transition: color 250ms;
    &:hover {
      color: ${G.hovered};
    }
  }

  &:hover {
    border-color: ${G.accent};
    box-shadow: ${$t.back};
  }

  &:hover label,
  &:hover button {
    opacity: 1;
  }
`,Bt=de`
  min-height: 19px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & input {
    ${Fn}
  }
`,Pr=F.label`
  ${Bt}

  & svg {
    transition: stroke 250ms;
    stroke-width: 2px;
    color: ${({$hovered:e})=>e?G.yellow:"transparent"};
    stroke: ${({$hovered:e})=>e?G.yellow:G.border};
  }
  &:hover svg {
    stroke: ${G.placeholder};
  }
`,Mr=F.label`
  ${Bt}
  opacity: ${({$hovered:e})=>e?1:0};
  transition: opacity 250ms;

  & svg {
    transition: border-color 250ms, color 250ms;
    padding: 1px;
    border: 2px solid ${G.border};
    border-radius: 50%;
    color: ${({$hovered:e})=>e?G.border:"transparent"};
  }
  &:hover svg {
    border-color: ${G.placeholder};
    color: ${({$hovered:e})=>e?G.placeholder:"transparent"};
  }
`,Se=de`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: transparent;
  border-color: transparent;
  transition: opacity 250ms color 250ms;
  color: ${G.black};

  & svg {
    transition: color 250ms;
    color: ${G.border};
  }
  &:hover,
  &:hover svg {
    color: ${G.placeholder};
  }
`,Dr=F.button`
  ${Se}

  opacity: ${({$hovered:e})=>e?1:0};
`,Or=F.button`
  ${Se}

  opacity: 0;
`,{colors:Oe,indents:Wt}=K,Ft=de`
  padding-block: 4px;
  display: grid;
  align-items: start;
  grid-template-columns: 20fr 1fr 20fr;
`,Ir=F.div`
  ${Ft}
`,zr=F.form`
  ${Ft}

  max-height: 70vh;
  overflow-y: scroll;
  scrollbar-width: none;
  grid-template-columns: 12fr 1fr 12fr;
`,Tt=F.textarea`
  height: 84px;
  outline: none;
  border: 1px solid ${Oe.accent};
  border-radius: ${Wt.xs};
  resize: none;
  overflow: clip;
  transition: height 150ms;
`,Nr=F.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &::after {
    content: '';
    height: calc(100% - 8px);
    width: 1px;
    border: 1px solid ${Oe.borderLight};
    transition: border-color 250ms;
  }

  &:hover::after {
    border-color: ${Oe.placeholder};
  }
`,Br=F.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Wr=F.button`
  ${Se}
`,Ye=F.button`
  ${Se}
`,Fr=F.button`
  ${Se}
`,kt=F.button`
  height: 100%;
  text-align: left;
  display: flex;
  align-items: top;
  background-color: transparent;
  border-color: transparent;
  border-radius: ${Wt.xs};
  color: ${Oe.black};
  transition: background-color 250ms;
`,Vr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Gr=F.iframe`
  ${Vr}
`,Ze=({el:e,setIsForm:n,setRecording:t,setTranslation:u})=>{const s=D.useRef(null),c=D.useRef(null),r=D.useRef(null),i=oe(),{user:m}=pe(),{activeCluster:C}=ie(),[h,d]=D.useState(""),{_id:y,element:f,caption:R}=e,{register:E,watch:p,setValue:v,handleSubmit:g,setFocus:k}=Vn({mode:"onBlur",defaultValues:{element:f,caption:R}});D.useEffect(()=>{v("caption",R)},[R,v]);const{ref:l,...S}=E("element"),{ref:T,...b}=E("caption"),P=[s.current,c.current,r.current],W=[p("caption"),p("element")];Yn(P,W),D.useEffect(()=>{k("element"),h&&f.trim().startsWith("der")?v("element",h+f.replace("der","").trim()+", "):h&&f.trim().startsWith("die")?v("element",h+f.replace("die","").trim()+", "):h&&f.trim().startsWith("das")?v("element",h+f.replace("das","").trim()+", "):h?v("element",h+f+", "):v("element",h+f)},[h,f,k,v]),D.useEffect(()=>{const _=async x=>{(x.code==="NumpadAdd"||x.key==="F2")&&(x.preventDefault(),await A(m.engine),g(B)()),(x.key==="Enter"||x.key==="§")&&(x.preventDefault(),g(B)()),x.key==="Escape"&&(x.preventDefault(),n(!1)),x.code==="AltRight"&&s.current.focus()};return addEventListener("keydown",_),()=>{removeEventListener("keydown",_)}},[]);const B=_=>{const x=m.lang;let M=_.caption.trim(),z=Ke(_.element,C.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();z=De(z,","),M=De(M,","),m.lang.includes("en")&&C.lang.includes("de")&&(z.includes("hat")||z.includes("ist"))&&z.split(`
`)[0].split(/,\s+/)[0].endsWith("n")&&(M=M.split(/,\s+/).map(o=>o.startsWith("to ")?o:`to ${o}`).join(", ")),i(y?je({_id:y,lang:x,element:z,caption:M}):Et({...e,element:z,caption:M})).then(i(Lt())),y||(xt(),t(""),u("")),n(!1)},Q=()=>{h===""&&d("der "),h==="der "&&d("die "),h==="die "&&d("das "),h==="das "&&d("")},A=async _=>{const x=p("element"),M=Ke(x,C.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim(),z={from:C.lang,to:m.lang},O=await we(M,z,_);v("caption",O)};return $.jsxs(zr,{onSubmit:g(B),children:[$.jsx(Tt,{...S,name:"element",ref:_=>{l(_),s.current=_}}),$.jsxs(Br,{ref:r,children:[$.jsx(Fr,{type:"button",onClick:Q,children:$.jsx(Gn,{size:"18px"})}),$.jsx(Ye,{type:"button",onClick:()=>A("google"),children:$.jsx(wn,{size:"16px"})}),$.jsx(Ye,{type:"button",onClick:()=>A("deepl"),children:$.jsx(Sn,{size:"18px"})}),$.jsx(Wr,{children:$.jsx($n,{size:"16px"})})]}),$.jsx(Tt,{...b,name:"caption",ref:_=>{T(_),c.current=_}})]})};Ze.propTypes={el:N.object,setIsForm:N.func,setRecording:N.func,setTranslation:N.func};const{button:Ur}=K.shadows,{m:Kr,xl:Hr}=K.indents,Vt=({className:e})=>{const{user:n}=pe(),[t,u]=D.useState(!1),{activeCluster:s}=ie(),[c,r]=D.useState(""),[i,m]=D.useState(""),{transcript:C,listening:h,resetTranscript:d}=ye.useSpeechRecognition(),{isMicrophoneAvailable:y}=ye.useSpeechRecognition(),{browserSupportsSpeechRecognition:f}=ye.useSpeechRecognition(),R=c.endsWith(", ")||c.replace(/[a-z]$/,"*#").endsWith("*#")?C.replace(/^./,k=>` ${k}`):C.replace(/^./,k=>k.toUpperCase()),E=`${c}${R}`,p=vt(E,bt),v=(k,l)=>k.trim().endsWith(l)?`${k.trim()} `:`${k.trim()}${l} `;if(D.useEffect(()=>{if(!t)return;const k=[".","?","!",","],l=S=>{if(k.includes(S.key)){S.preventDefault();const T=v(p,S.key);r(T),d()}if(S.key==="Backspace"){S.preventDefault();const T=window.getSelection().toString();if(window.getSelection().deleteFromDocument(),T){const b=p.replace(T,"");r(b)}else{const b=p.length-1,P=p.substring(0,b);r(P)}d()}if(S.key==="Space"){S.preventDefault();const T=p+" ";r(T),d()}};return addEventListener("keydown",l),()=>{removeEventListener("keydown",l)}},[t,h,p,d]),D.useEffect(()=>{const k=async l=>{const S=l.key==="F1"||l.key==="r"&&l.metaKey&&!l.altKey&&!l.shiftKey;if(h||S&&(l.preventDefault(),u(!0),be.startListening({language:s.lang,continuous:!0})),h&&S){l.preventDefault(),be.stopListening();const T=p.at(-1),b=!T||["!"].includes(T)?p:v(p,"."),P=await we(vt(b,bt),{from:s.lang,to:n.lang},n.engine);r(b),m(P),d()}};return addEventListener("keydown",k),()=>{removeEventListener("keydown",k)}},[s.lang,t,h,p,d,n.engine,n.lang]),D.useEffect(()=>{const k=async l=>{if(l.key==="Escape"||l.key==="Enter"||l.key==="§"){l.preventDefault(),be.stopListening(),u(!1),r(""),m(""),d();return}};return addEventListener("keyup",k),()=>{removeEventListener("keyup",k)}},[d]),!f||!y)return;const g=async k=>{if(k==null||k.currentTarget.blur(),!h)u(!0),be.startListening({language:s.lang,continuous:!0});else{be.stopListening();const l=p.at(-1),S=!l||["!"].includes(l)?p:v(p,"."),T={from:s.lang,to:n.lang},b=await we(S,T,n.engine);r(S),m(b),d()}};return $.jsxs("div",{className:_r(e,"speak-btn",!t&&"hidden"),children:[$.jsx(fe,{onClick:g,$s:"m",$round:!0,$bs:Ur,children:h?$.jsx(kn,{size:18}):$.jsx(Tn,{size:18})}),t&&$.jsx(Rn,{$x:`left: ${Kr}`,$y:`top: ${Hr}`,$bd:"none",children:$.jsx(Ze,{el:{cluster:s._id,element:p.trim(),caption:i.trim(),favorite:!0,checked:p.split(/\s+/).length<20},setIsForm:u,setRecording:r,setTranslation:m})})]})};Vt.propTypes={className:N.string};const{colors:Fe}=K,Yr=F.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  &:hover svg {
    stroke: ${Fe.yellow};
  }

  & svg {
    transition: stroke 250ms;
    stroke: ${Fe.hovered};
    /* stroke: ${({$colored:e})=>e&&Fe.yellow}; */
    @keyframes refresh-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
    animation: refresh-spin infinite 12s linear;
  }
`,Gt=({onClick:e})=>$.jsx(Yr,{onClick:e,children:$.jsx(An,{size:"35px"})});Gt.propTypes={onClick:N.func};const{background:Ve}=K.colors,{button:Rt}=K.shadows,{s:At,m:qr}=K.indents,Ut=({className:e,filtredElements:n,setLiColor:t})=>{const{user:u}=pe(),{activeCluster:s}=ie(),{activeElement:c}=le(),[r,i]=D.useState(null);if(D.useEffect(()=>{const p=window.speechSynthesis.getVoices();Array.isArray(p)&&p.length>0&&i(p),"onvoiceschanged"in window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{const v=window.speechSynthesis.getVoices();i(v)})},[]),!Array.isArray(r)||r.length===0)return;const m=p=>{if(!p.length)return;let v="",g=0;const k=p.reduce((l,S)=>(l[S.lang]||(l[S.lang]=0),l[S.lang]+=1,l),{});for(const l in k)k[l]>g&&(g=k[l],v=l);return v},C=n.length?m(n):u.lang,h=(p,v)=>p.replaceAll(", `",`;${v} `).replaceAll(" `",`${v} `).replaceAll(",`",";"),d=({text:p,playList:v,divider:g})=>{let k="";for(let l=0;l<v.length;l+=1){let S=v[l][p];const T=`@±@${v[l].lang}${g}`;S.endsWith(".")||S.endsWith("!")||S.endsWith("?")||S.endsWith('"')?(k+=h(S,g).replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",p!=="caption"?`__${g}`:`__${T}`).replaceAll(".",p!=="caption"?`.${g}`:`.${T}`).replaceAll(",",p!=="caption"?`,${g}`:`,${T}`).replaceAll("!",p!=="caption"?`!${g}`:`!${T}`).replaceAll("?",p!=="caption"?`?${g}`:`?${T}`).replaceAll(":",p!=="caption"?`:${g}`:`:${T}`),s.lang.includes("de")&&(k=k.replaceAll(`0.${g}`,"0.").replaceAll(`1.${g}`,"1.").replaceAll(`2.${g}`,"2.").replaceAll(`3.${g}`,"3.").replaceAll(`4.${g}`,"4.").replaceAll(`5.${g}`,"5.").replaceAll(`6.${g}`,"6.").replaceAll(`7.${g}`,"7.").replaceAll(`8.${g}`,"8.").replaceAll(`9.${g}`,"9."))):v[l].element.startsWith("[")||(p==="caption"&&(S.includes(" [")&&(S=S.substring(0,S.indexOf(" ["))),S=`${S}@±@${v[l].lang}`),k+=S+g)}return k},y=r,f=p=>{p.currentTarget.blur(),t(Ve);const v="$*@",g=n.findIndex(S=>S.element===c.element),k=n.splice(g===-1?0:g),l=Pe({setLiColor:t,divider:v,voices:y,text:d({text:"element",playList:k,divider:v}),lang:s.lang,rate:s.rate});l&&ee.error(l)},R=p=>{p.currentTarget.blur();const v="$*@";t(Ve);const g=n.findIndex(S=>S.element===c.element),k=n.splice(g===-1?0:g),l=Pe({setLiColor:t,divider:v,voices:y,text:d({text:"caption",playList:k,divider:v}),lang:C,rate:u.rate});l&&ee.error(l)},E=p=>{p.currentTarget.blur(),t(Ve);let v="";const g="$*@",k=n.findIndex(T=>T.element===c.element),l=n.splice(k===-1?0:k);for(let T=0;T<l.length;T+=1){const{element:b,caption:P,lang:W}=l[T];if(!b.startsWith("[")){const B=h(b,""),Q=P.includes(" [")?P.substring(0,P.indexOf(" [")):h(P,"");v+=B+`@±@${W}`+Q+g}}const S=Cn({setLiColor:t,divider:g,voices:y,text:v,lang:s.lang,rate:u.rate});S&&ee.error(S)};return $.jsxs(qe,{className:e,$m:`${At} ${qr}`,$pos:"fixed",$side:"right",$high:"bottom",$gtc:"1fr 0.5fr 1fr",$cg:At,children:[$.jsx(fe,{onClick:f,$s:"m",$round:!0,$bs:Rt,children:(s==null?void 0:s.lang.at(0).toUpperCase())+(s==null?void 0:s.lang.substring(1))}),$.jsx(Gt,{onClick:E}),$.jsx(fe,{onClick:R,$s:"m",$round:!0,$bs:Rt,children:(C==null?void 0:C.at(0).toUpperCase())+(C==null?void 0:C.substring(1))})]})};Ut.propTypes={className:N.string,filtredElements:N.array,setLiColor:N.func};const{background:Xr,backgroundHoverd:Jr}=K.colors,Zr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Qr=F.audio`
  ${Zr}

  &::-webkit-media-controls {
    display: flex;
    justify-content: center;
    background-color: ${Xr};
  }

  &::-webkit-media-controls-panel {
    background-color: ${Jr};
  }
`,Kt=({src:e,accessToken:n,expiresIn:t})=>{const u=oe(),s=D.useRef(),[c,r]=D.useState("dump"),i=En({onSuccess:h=>{const{access_token:d,expires_in:y}=h,f={accessToken:d,expiresIn:y*1e3+Date.now()};u(xn(f)),m(d)},onError:h=>ee.error(h.message),scope:Wn}),m=async h=>{try{const d=await _n.get(e,{responseType:"blob",headers:{Authorization:`Bearer ${h}`}}).then(f=>f.data),y=URL.createObjectURL(d);r(y)}catch(d){ee.error(d.message)}},C=Date.now()<t;return $.jsx(Qr,{ref:s,src:e.endsWith(".mp3")?e:c,onError:()=>{!C&&i(),C&&m(n)},onPause:h=>h.target.blur(),onEnded:h=>h.target.blur(),controls:!0})};Kt.propTypes={src:N.string,accessToken:N.string,expiresIn:N.number};const Ht=({el:e,sortByDate:n,setSortByDate:t,setLiColor:u})=>{var l,S;const s=oe(),{user:c}=pe(),{activeCluster:r}=ie(),{activeElement:i,allElements:m}=le(),C=e.element,h=Ln(e.caption),[d,y]=D.useState(()=>{var T;return!((T=h.file)!=null&&T.endsWith(".mp3"))});D.useEffect(()=>{if(e._id!==(i==null?void 0:i._id))return;const T=b=>{b.key==="ArrowLeft"&&(b.preventDefault(),E()),b.key==="ArrowRight"&&(b.preventDefault(),p())};return addEventListener("keydown",T),()=>{removeEventListener("keydown",T)}},[i==null?void 0:i._id,e._id,p,E]);const f="$*@",R=(T,b)=>{let P="";return b?(T.trim().endsWith(".")||T.trim().endsWith("!")||T.trim().endsWith("?")||T.endsWith('"')?(P=T.trim().replaceAll(", `",`;${b} `).replaceAll(" `",`${b} `).replaceAll(",`",";").replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",`__${b}`).replaceAll(".",`.${b}`).replaceAll(",",`,${b}`).replaceAll("!",`!${b}`).replaceAll("?",`?${b}`).replaceAll(":",`:${b}`),r.lang.includes("de")&&(P=P.replaceAll(`0.${b}`,"0.").replaceAll(`1.${b}`,"1.").replaceAll(`2.${b}`,"2.").replaceAll(`3.${b}`,"3.").replaceAll(`4.${b}`,"4.").replaceAll(`5.${b}`,"5.").replaceAll(`6.${b}`,"6.").replaceAll(`7.${b}`,"7.").replaceAll(`8.${b}`,"8.").replaceAll(`9.${b}`,"9."))):P=T.trim()+b,P.includes("[")?P.substring(0,P.indexOf("["))+b:P):T},E=T=>{T==null||T.currentTarget.blur();const b=Pe({setLiColor:u,divider:f,voices:window.speechSynthesis.getVoices(),text:R(C,f),lang:r.lang,rate:r.rate});b&&ee.error(b)},p=T=>{T==null||T.currentTarget.blur();const b=Pe({setLiColor:u,divider:f,voices:window.speechSynthesis.getVoices(),text:R(h.text,f),lang:e.lang,rate:c.rate});b&&ee.error(b)},v=T=>{const{_id:b}=r;s(Me(e)),T.currentTarget.closest("li").id!=="active-element"&&s(Ge({_id:b,activeEl:e._id}))},g=T=>{t(!n),n?ee.success("Below is Recent"):ee.success("Above is Recent"),T.stopPropagation()},k=()=>{C.startsWith("[")?y(!d):g()};return $.jsx($.Fragment,{children:$.jsxs(Ir,{onClick:v,children:[$.jsx(kt,{onClick:E,children:C}),$.jsx(Nr,{onClick:k}),h.text&&$.jsx(kt,{onClick:p,children:h.text}),d&&!h.text&&$.jsx(Gr,{src:h.link}),!d&&!h.text&&$.jsx(Kt,{src:h.file,accessToken:(l=c.googleToken)==null?void 0:l.accessToken,expiresIn:(S=c.googleToken)==null?void 0:S.expiresIn})]})})};Ht.propTypes={el:N.object,sortByDate:N.bool,setSortByDate:N.func,$active:N.bool,$hovered:N.bool,setLiColor:N.func};const Yt=({el:e,index:n,length:t,sortByDate:u,setSortByDate:s,translateAll:c,liColor:r,setLiColor:i})=>{const m=oe(),{elementTrash:C,activeElement:h,allElements:d}=le(),[y,f]=D.useState(!1),{_id:R,favorite:E,checked:p}=e,v=C.find(b=>b._id===R),g=R===(h==null?void 0:h._id);D.useEffect(()=>{if(!g)return;const b=P=>{if(P.key==="F2"&&(P.preventDefault(),g&&f(!y)),P.key==="ArrowDown"){P.preventDefault();const W=d.findIndex(({_id:B})=>B===h._id);m(Me(d[W+1]))}if(P.key==="ArrowUp"){P.preventDefault();const W=d.findIndex(({_id:B})=>B===h._id);m(Me(d[W-1]))}};return addEventListener("keydown",b),()=>{removeEventListener("keydown",b)}},[h._id,d,m,g,y]);const k=()=>{m(je({_id:R,favorite:!E}))},l=()=>{m(je({_id:R,checked:!p}))},S=()=>m(On(e)),T=()=>f(!y);return $.jsxs(jr,{id:g?"active-element":null,licolor:r,children:[$.jsxs(Ue,{$h:"100%",$p:"0",$fd:"column",children:[$.jsxs(Pr,{$hovered:E,children:[$.jsx("input",{type:"checkbox",name:"favorite",checked:E,onChange:k}),$.jsx(Bn,{size:"20px"})]}),$.jsxs(Mr,{$hovered:p,children:[$.jsx("input",{type:"checkbox",name:"checked",checked:p,onChange:l}),$.jsx(jn,{size:"15px"})]}),y&&t===n+1&&$.jsx(Ye,{onClick:c,children:$.jsx(Pn,{size:"16px"})})]}),y&&$.jsx(Ze,{el:e,setIsForm:f}),!y&&$.jsx(Ht,{el:e,sortByDate:u,setSortByDate:s,setLiColor:i}),$.jsxs(Ue,{$h:"100%",$p:"0",$fd:"column",children:[$.jsx(Dr,{$hovered:v,onClick:S,children:$.jsx(Mn,{size:"16px"})}),$.jsx(Or,{onClick:T,children:$.jsx(Dn,{size:"15px"})})]})]})};Yt.propTypes={el:N.object,index:N.number,length:N.number,sortByDate:N.bool,setSortByDate:N.func,translateAll:N.func,liColor:N.string,setLiColor:N.func};const ei=F.ul`
  width: 100%;
  list-style: none;
`,ti=F.div`
  & .speak-btn {
    position: fixed;
    bottom: ${K.indents.s};
    left: calc(45% + 10px);
    /* transform: translateX(calc(-50%)); */
  }

  & .hidden {
    opacity: 0;
    transition: opacity 150ms;
    &:hover {
      opacity: 1;
    }
    & button {
      transition: color 750ms, border-color 750ms, background-color 750ms;
    }
  }
`,{white:ni}=K.colors,ri=()=>{const e=oe(),{ref:n,inView:t,entry:u}=rr({initialInView:!0,rootMargin:"0px 0px -30px 0px"}),{user:s}=pe(),{activeCluster:c}=ie(),{allElements:r,elementTrash:i,elementFilter:m,isLoading:C}=le(),[h,d]=D.useState(ni);let{elementSelect:y}=le();y=y||[];const[f,R]=D.useState(!1);D.useEffect(()=>{c&&e(Lt({cluster:c._id})).unwrap().then(({result:l})=>{if(!c.activeEl)return;const S=l.elements.find(({_id:T})=>T===c.activeEl);e(Me(S))}).then(()=>{const l=document.getElementById("active-element");l&&In(l)})},[]);const E=r.filter(l=>l.cluster===(c==null?void 0:c._id)).sort((l,S)=>l.createdAt.localeCompare(S.createdAt)),v=(()=>{const l=i.map(S=>S._id);return y.includes("trash")?E.filter(S=>l.includes(S._id)):E})().filter(({element:l,caption:S,favorite:T,checked:b})=>{const P=l.toLowerCase().replace("·","").includes(m)||l.toLowerCase().includes(m)||S.toLowerCase().includes(m),W=y.includes("wordlist")?P&&Un(l):P,B=()=>y.some(A=>["favorite","unfavorite"].includes(A))?y.includes("favorite")?W&&T===!0:W&&T===!1:W;return(()=>y.some(A=>["checked","unchecked"].includes(A))?y.includes("checked")?B()&&b===!0:B()&&b===!1:B())()}).sort(f?(l,S)=>S.createdAt.localeCompare(l.createdAt):(l,S)=>l.createdAt.localeCompare(S.createdAt)),g=async()=>{const l=s.lang;let S=0;await v.forEach(async T=>{if(S>1)return;const{_id:b,element:P}=T;if(!P.startsWith("[")||l!==T.lang){const W={from:c.lang,to:l},B=await we(P,W,s.engine);e(je({_id:b,lang:l,caption:B})),S=S+1}})},k=window.innerHeight<(u==null?void 0:u.target.getBoundingClientRect().y)+(u==null?void 0:u.target.getBoundingClientRect().height)*1.5;return $.jsxs($.Fragment,{children:[$.jsxs(ei,{children:[v.map((l,S,T)=>$.jsx(Yt,{el:l,index:S,length:T.length,sortByDate:f,setSortByDate:R,translateAll:g,liColor:h,setLiColor:d},l._id)),$.jsxs(ti,{ref:n,children:[$.jsx(Mt,{}),$.jsx(Vt,{className:!t||!k?"shown":"hidden"}),$.jsx(Dt,{className:!t||!k?"shown":"hidden"}),$.jsx(Ut,{className:!t||!k?"shown":"hidden",filtredElements:v,setLiColor:d})]})]}),C&&$.jsx(zn,{})]})},{s:Ct,m:ii}=K.indents,ui=()=>$.jsx(Ue,{$p:`0 ${ii} ${Ct} ${Ct}`,children:$.jsx(ri,{})});export{ui as default};
