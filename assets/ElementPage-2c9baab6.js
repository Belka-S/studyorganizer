import{U as Ne,r as z,t as Y,P as N,u as le,b as ue,w as ie,j as b,T as qe,V as Ae,y as Ge,G as dt,H as gt,x as pe,S as cn,W as St,X as Rt,Q as ne,A as fe,Y as ln,Z as un,_ as pn,k as fn,n as $e,s as V,$ as hn,a0 as dn,a1 as gn,a2 as Pe,a3 as kt,a4 as mn,a5 as vn,M as bn,a6 as yn,a7 as wn,a8 as Me,a9 as $n,aa as Tn,ab as Sn,ac as At,ad as Rn,ae as kn,F as Ve,E as An,af as Cn,D as En,C as _n,ag as Ln,N as xn,ah as jn}from"./index-44f8d21f.js";import{r as Ct,H as Pn,T as Mn}from"./index-1858b638.js";import{w as Et}from"./writeClipboard-96e7014f.js";import{v as Dn,u as On}from"./index.esm-62dc3d43.js";import{a as zn}from"./index-80295e4e.js";const Ke=(e,n)=>{if(!n.includes("de"))return e;const t=e.trim().split(`
`);return t.length===1?e:["der","die","das"].includes(t[0].split(" ")[0])?`${t[0].trim()}, ${t[1].split("·")[1].replaceAll("⁰","").replaceAll("/"," / ").trim()}`:(e.includes("hat")||e.includes("ist"))&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e.includes("am")&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e},In=(e,n)=>{let t=e;for(const r in n)t=t.replaceAll(r,n[r]);const f=r=>r.replace(/^./,c=>c.toUpperCase()),u=[...t.split(/\s+/)];for(let r=0;r<u.length;r+=1)[".","!","?"].includes(u[r].at(-1))&&u[r+1]&&u.splice(r+1,1,f(u[r+1]));return u.join(" ")},Nn=e=>/[a-z]/.test(e.charAt(0)),{VITE_DEEPL_API_KEY:Bn}={VITE_GOOGLE_CLIENT_ID:"689266183428-lh3lmpaqnd2qd6t93voa8s6ipt3836q1.apps.googleusercontent.com",VITE_DEEPL_API_KEY:"d15bf272-fb1f-4f29-bbc3-d3bbdd686c53:fx",VITE_GOOGLE_API_KEY:"AIzaSyDqQndBxYEuOG7F6iYDqQoiNF90tptRmBQ",VITE_PROD_BACK_URL:"https://studyorganizer.onrender.com",BASE_URL:"/studyorganizer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Wn={google:"",deepl:Bn},we=async(e,{from:n,to:t},f)=>{var p,r;if(!e||e.length===0)return"";const u=e.replaceAll(" ·",",").replaceAll("·","");Ne.engine=f,Ne.key=Wn[f];try{let c=await Ne(`${u}`,{from:n,to:t});if(t.includes("en")&&u.toLowerCase().includes("uhr")&&(c=c.replaceAll("a.m. on","am on").replaceAll("p.m. on","pm on").replaceAll("a.m. to","am to").replaceAll("p.m. to","pm to").replaceAll("a.m.","am.").replaceAll("p.m.","pm.")),[".","!","?"].includes(u.at(-1)))return c;const A=u.split(u.includes(", ")?", ":/\s+/),$=c.split(", "),T=t.includes("de")?$[0]:$[0].at(0).toLowerCase()+$[0].substring(1);return A.length===1?c.toLocaleLowerCase()+", ":["der","die","das"].includes(A[0].split(" ")[0])?c.replace("The ","").replace("the ","").split(", ")[0].toLocaleLowerCase()+", ":t.includes("en")&&((p=A[2])!=null&&p.startsWith("am"))?$[2].startsWith("the")?c:`${T}, ${$[1]}, the ${$[2]}`:(A[0].endsWith("n")&&["hat","ist"].includes((r=A[2])==null?void 0:r.split(" ")[0])&&n.includes("de")&&(c=t.includes("en")?"to "+T+", ":T+", "),c)}catch(c){return c.message}},De=(e,n)=>e.endsWith(n)?e.substring(0,e.length-1):e,Fn=(e,n)=>{let t=84;e[0]&&(t=Number(e[0].style.height.replace("px",""))),z.useEffect(()=>{if(!e[0])return;let f=Math.max(...e.map(u=>u.scrollHeight));t!==f&&(f=f<=90?f:f+6,e.forEach(u=>{u.style.height=f+"px"}))},[t,e,n])},Ce=[{value:"de",label:"German"},{value:"en",label:"English"},{value:"uk",label:"Ukrainian"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"it",label:"Italian"}],Ee=[{value:.3,label:"Rate: 0.3"},{value:.4,label:"Rate: 0.4"},{value:.5,label:"Rate: 0.5"},{value:.6,label:"Rate: 0.6"},{value:.8,label:"Rate: 0.8"},{value:1,label:"Rate: 1"},{value:1.25,label:"Rate: 1.25"},{value:1.5,label:"Rate: 1.5"}],Gn={"..":".",". .":".","?.":"?","? .":"?","!.":"!","! .":"!",",,":",",", ,":","},Vn={" Dot":"."," dot":"."," exclamation mark":"!"," question mark":"?"," comma":","," colon":":"," semi-colon":";","Yes ":"Yes, ","No ":"No, "},Kn={" Punkt":"."," Ausrufezeichen":"!"," Fragezeichen":"?"," Komma":","," Doppelpunkt":":"," Semikolon":";","Ja ":"Ja, ","Nein ":"Nein, "," weil":", weil"," aber":", aber"," als":", als"," ob":", ob"," damit":", damit"," bevor":", bevor"," obwohl":", obwohl"," dass":", dass"," dann":", dann"," deshalb":", deshalb"," desvegen":", desvegen"," trotzdem":", trotzdem"},Un={...Vn,...Kn,...Gn};var Ue=new Map,_e=new WeakMap,mt=0,Hn=void 0;function qn(e){return e?(_e.has(e)||(mt+=1,_e.set(e,mt.toString())),_e.get(e)):"0"}function Yn(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?qn(e.root):e[n]}`).toString()}function Qn(e){const n=Yn(e);let t=Ue.get(n);if(!t){const f=new Map;let u;const p=new IntersectionObserver(r=>{r.forEach(c=>{var y;const A=c.isIntersecting&&u.some($=>c.intersectionRatio>=$);e.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=A),(y=f.get(c.target))==null||y.forEach($=>{$(A,c)})})},e);u=p.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:n,observer:p,elements:f},Ue.set(n,t)}return t}function Zn(e,n,t={},f=Hn){if(typeof window.IntersectionObserver>"u"&&f!==void 0){const y=e.getBoundingClientRect();return n(f,{isIntersecting:f,target:e,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:y,intersectionRect:y,rootBounds:y}),()=>{}}const{id:u,observer:p,elements:r}=Qn(t),c=r.get(e)||[];return r.has(e)||r.set(e,c),c.push(n),p.observe(e),function(){c.splice(c.indexOf(n),1),c.length===0&&(r.delete(e),p.unobserve(e)),r.size===0&&(p.disconnect(),Ue.delete(u))}}function Jn({threshold:e,delay:n,trackVisibility:t,rootMargin:f,root:u,triggerOnce:p,skip:r,initialInView:c,fallbackInView:y,onChange:A}={}){var $;const[T,w]=z.useState(null),h=z.useRef(A),[S,R]=z.useState({inView:!!c,entry:void 0});h.current=A,z.useEffect(()=>{if(r||!T)return;let v;return v=Zn(T,(o,i)=>{R({inView:o,entry:i}),h.current&&h.current(o,i),i.isIntersecting&&p&&v&&(v(),v=void 0)},{root:u,rootMargin:f,threshold:e,trackVisibility:t,delay:n},y),()=>{v&&v()}},[Array.isArray(e)?e.toString():e,T,u,f,p,r,t,y,n]);const m=($=S.entry)==null?void 0:$.target,d=z.useRef(void 0);!T&&m&&!p&&!r&&d.current!==m&&(d.current=m,R({inView:!!c,entry:void 0}));const l=[w,S.inView,S.entry];return l.ref=l[0],l.inView=l[1],l.entry=l[2],l}const{backgroundHoverd:Le,white:xe,borderLight:je}=Y.colors,_t=()=>{const e=le(),{user:n}=ue(),{activeCluster:t}=ie(),f=({value:c})=>{e(Ge({_id:t._id,lang:c})).unwrap().then(y=>e(dt(y.result.cluster)))},u=({value:c})=>{e(Ge({_id:t._id,rate:c})).unwrap().then(y=>e(dt(y.result.cluster)))},p=({value:c})=>{const y=new FormData;y.append("lang",c),e(gt(y))},r=({value:c})=>{const y=new FormData;y.append("rate",c),e(gt(y))};return b.jsxs(qe,{$m:"0",$cg:"8px",$ai:"center",$gtc:"2fr 2fr 2fr 2fr",children:[b.jsx(Ae,{options:Ce,defaultValue:Ce.find(c=>c.value===(t==null?void 0:t.lang)),onChange:f,placeholder:"Language...",$ol:Le,$b:xe,$bh:je}),b.jsx(Ae,{options:Ee,defaultValue:Ee.find(c=>c.value==(t==null?void 0:t.rate)),onChange:u,placeholder:"Rate...",$ol:Le,$b:xe,$bh:je}),b.jsx(Ae,{options:Ce,defaultValue:Ce.find(c=>c.value===n.lang),onChange:p,placeholder:"Language...",$ol:Le,$b:xe,$bh:je}),b.jsx(Ae,{options:Ee,defaultValue:Ee.find(c=>c.value==n.rate),onChange:r,placeholder:"Rate...",$ol:Le,$b:xe,$bh:je})]})};_t.propTypes={filtredElements:N.array,setLiColor:N.func};const{button:Xn}=Y.shadows,er=()=>{const e=le(),{user:n}=ue(),{activeCluster:t}=ie();z.useEffect(()=>{const u=async p=>{p.key==="e"&&p.metaKey&&!p.altKey&&!p.shiftKey&&(p.preventDefault(),await f())};return addEventListener("keydown",u),()=>{removeEventListener("keydown",u)}},[]);const f=async u=>{const p=window.getSelection().toString();p&&await Et(p);const r=await Ct();let c=Ke(r,t.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();c=De(c,",");const y={from:t.lang,to:n.lang};let A=await we(c,y,n.engine);A=De(A.trim(),",");const{_id:$}=t;try{const T={cluster:$,element:"[]",caption:c},w={cluster:$,element:c,caption:A,favorite:!0,checked:c.split(/\s+/).length<20},h=c.includes("https://")?T:w;e(St(h)).unwrap().then(()=>(u==null?void 0:u.target)&&Rt()).finally(()=>{var S;return(S=u==null?void 0:u.target)==null?void 0:S.blur()})}catch(T){u==null||u.currentTarget.blur(),ne.error(`Invalid element, ${T.message}`)}};return b.jsx(pe,{onClick:f,$s:"m",$round:!0,$bs:Xn,children:b.jsx(cn,{size:18})})},{button:tr}=Y.shadows,nr=()=>{const e=le(),{elementTrash:n}=fe(),t=()=>{confirm("Are you sure you want to delete the selected Element(s)?")&&e(ln(n.map(f=>f._id).join("&"))).unwrap().then(()=>e(un()))};return b.jsx(pe,{onClick:t,$s:"m",$round:!0,$bs:tr,children:b.jsx(Pn,{size:16})})};function rr(e){return pn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M250.73,210.63l-56-112a12,12,0,0,0-21.46,0l-20.52,41A84.2,84.2,0,0,1,114,126.22,107.48,107.48,0,0,0,139.33,68H160a12,12,0,0,0,0-24H108V32a12,12,0,0,0-24,0V44H32a12,12,0,0,0,0,24h83.13A83.69,83.69,0,0,1,96,110.35,84,84,0,0,1,83.6,91a12,12,0,1,0-21.81,10A107.55,107.55,0,0,0,78,126.24,83.54,83.54,0,0,1,32,140a12,12,0,0,0,0,24,107.47,107.47,0,0,0,64-21.07,108.4,108.4,0,0,0,45.39,19.44l-24.13,48.26a12,12,0,1,0,21.46,10.73L151.41,196h65.17l12.68,25.36a12,12,0,1,0,21.47-10.73ZM163.41,172,184,130.83,204.58,172Z"},child:[]}]})(e)}const{button:ir}=Y.shadows,sr=()=>{const{activeCluster:e}=ie();z.useEffect(()=>{const p=async r=>{r.metaKey&&r.key==="d"&&!r.altKey&&!r.shiftKey&&(r.preventDefault(),await u())};return addEventListener("keydown",p),()=>{removeEventListener("keydown",p)}},[]);let n=[];function t(p){p.forEach(r=>{const c=window.open(r,"_blank");c?n.push(c):ne.error(`Failed to open tab: ${r}`)})}const f=()=>{n.forEach(p=>{p.close()}),n=[]},u=async()=>{const p=window.getSelection().toString();p&&await Et(p);const r=await Ct();let c=[];e.lang.includes("de")&&c.push(`https://www.verbformen.com/conjugation/?w=${r}`),e.lang.includes("en")&&c.push(`https://dictionary.cambridge.org/dictionary/english-russian/${r}`),f(),t(c)};return b.jsx(pe,{onClick:u,$s:"m",$round:!0,$bs:ir,children:b.jsx(rr,{size:18})})};var ar={exports:{}};(function(e){var n=function(t){var f=Object.prototype,u=f.hasOwnProperty,p=Object.defineProperty||function(s,a,g){s[a]=g.value},r,c=typeof Symbol=="function"?Symbol:{},y=c.iterator||"@@iterator",A=c.asyncIterator||"@@asyncIterator",$=c.toStringTag||"@@toStringTag";function T(s,a,g){return Object.defineProperty(s,a,{value:g,enumerable:!0,configurable:!0,writable:!0}),s[a]}try{T({},"")}catch{T=function(a,g,x){return a[g]=x}}function w(s,a,g,x){var L=a&&a.prototype instanceof v?a:v,D=Object.create(L.prototype),U=new O(x||[]);return p(D,"_invoke",{value:k(s,g,U)}),D}t.wrap=w;function h(s,a,g){try{return{type:"normal",arg:s.call(a,g)}}catch(x){return{type:"throw",arg:x}}}var S="suspendedStart",R="suspendedYield",m="executing",d="completed",l={};function v(){}function o(){}function i(){}var C={};T(C,y,function(){return this});var j=Object.getPrototypeOf,I=j&&j(j(M([])));I&&I!==f&&u.call(I,y)&&(C=I);var W=i.prototype=v.prototype=Object.create(C);o.prototype=i,p(W,"constructor",{value:i,configurable:!0}),p(i,"constructor",{value:o,configurable:!0}),o.displayName=T(i,$,"GeneratorFunction");function B(s){["next","throw","return"].forEach(function(a){T(s,a,function(g){return this._invoke(a,g)})})}t.isGeneratorFunction=function(s){var a=typeof s=="function"&&s.constructor;return a?a===o||(a.displayName||a.name)==="GeneratorFunction":!1},t.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,i):(s.__proto__=i,T(s,$,"GeneratorFunction")),s.prototype=Object.create(W),s},t.awrap=function(s){return{__await:s}};function X(s,a){function g(D,U,H,Q){var K=h(s[D],s,U);if(K.type==="throw")Q(K.arg);else{var ge=K.arg,ae=ge.value;return ae&&typeof ae=="object"&&u.call(ae,"__await")?a.resolve(ae.__await).then(function(re){g("next",re,H,Q)},function(re){g("throw",re,H,Q)}):a.resolve(ae).then(function(re){ge.value=re,H(ge)},function(re){return g("throw",re,H,Q)})}}var x;function L(D,U){function H(){return new a(function(Q,K){g(D,U,Q,K)})}return x=x?x.then(H,H):H()}p(this,"_invoke",{value:L})}B(X.prototype),T(X.prototype,A,function(){return this}),t.AsyncIterator=X,t.async=function(s,a,g,x,L){L===void 0&&(L=Promise);var D=new X(w(s,a,g,x),L);return t.isGeneratorFunction(a)?D:D.next().then(function(U){return U.done?U.value:D.next()})};function k(s,a,g){var x=S;return function(D,U){if(x===m)throw new Error("Generator is already running");if(x===d){if(D==="throw")throw U;return F()}for(g.method=D,g.arg=U;;){var H=g.delegate;if(H){var Q=E(H,g);if(Q){if(Q===l)continue;return Q}}if(g.method==="next")g.sent=g._sent=g.arg;else if(g.method==="throw"){if(x===S)throw x=d,g.arg;g.dispatchException(g.arg)}else g.method==="return"&&g.abrupt("return",g.arg);x=m;var K=h(s,a,g);if(K.type==="normal"){if(x=g.done?d:R,K.arg===l)continue;return{value:K.arg,done:g.done}}else K.type==="throw"&&(x=d,g.method="throw",g.arg=K.arg)}}}function E(s,a){var g=a.method,x=s.iterator[g];if(x===r)return a.delegate=null,g==="throw"&&s.iterator.return&&(a.method="return",a.arg=r,E(s,a),a.method==="throw")||g!=="return"&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+g+"' method")),l;var L=h(x,s.iterator,a.arg);if(L.type==="throw")return a.method="throw",a.arg=L.arg,a.delegate=null,l;var D=L.arg;if(!D)return a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,l;if(D.done)a[s.resultName]=D.value,a.next=s.nextLoc,a.method!=="return"&&(a.method="next",a.arg=r);else return D;return a.delegate=null,l}B(W),T(W,$,"Generator"),T(W,y,function(){return this}),T(W,"toString",function(){return"[object Generator]"});function _(s){var a={tryLoc:s[0]};1 in s&&(a.catchLoc=s[1]),2 in s&&(a.finallyLoc=s[2],a.afterLoc=s[3]),this.tryEntries.push(a)}function P(s){var a=s.completion||{};a.type="normal",delete a.arg,s.completion=a}function O(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(_,this),this.reset(!0)}t.keys=function(s){var a=Object(s),g=[];for(var x in a)g.push(x);return g.reverse(),function L(){for(;g.length;){var D=g.pop();if(D in a)return L.value=D,L.done=!1,L}return L.done=!0,L}};function M(s){if(s!=null){var a=s[y];if(a)return a.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length)){var g=-1,x=function L(){for(;++g<s.length;)if(u.call(s,g))return L.value=s[g],L.done=!1,L;return L.value=r,L.done=!0,L};return x.next=x}}throw new TypeError(typeof s+" is not iterable")}t.values=M;function F(){return{value:r,done:!0}}return O.prototype={constructor:O,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!s)for(var a in this)a.charAt(0)==="t"&&u.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=r)},stop:function(){this.done=!0;var s=this.tryEntries[0],a=s.completion;if(a.type==="throw")throw a.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var a=this;function g(Q,K){return D.type="throw",D.arg=s,a.next=Q,K&&(a.method="next",a.arg=r),!!K}for(var x=this.tryEntries.length-1;x>=0;--x){var L=this.tryEntries[x],D=L.completion;if(L.tryLoc==="root")return g("end");if(L.tryLoc<=this.prev){var U=u.call(L,"catchLoc"),H=u.call(L,"finallyLoc");if(U&&H){if(this.prev<L.catchLoc)return g(L.catchLoc,!0);if(this.prev<L.finallyLoc)return g(L.finallyLoc)}else if(U){if(this.prev<L.catchLoc)return g(L.catchLoc,!0)}else if(H){if(this.prev<L.finallyLoc)return g(L.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(s,a){for(var g=this.tryEntries.length-1;g>=0;--g){var x=this.tryEntries[g];if(x.tryLoc<=this.prev&&u.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var L=x;break}}L&&(s==="break"||s==="continue")&&L.tryLoc<=a&&a<=L.finallyLoc&&(L=null);var D=L?L.completion:{};return D.type=s,D.arg=a,L?(this.method="next",this.next=L.finallyLoc,l):this.complete(D)},complete:function(s,a){if(s.type==="throw")throw s.arg;return s.type==="break"||s.type==="continue"?this.next=s.arg:s.type==="return"?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):s.type==="normal"&&a&&(this.next=a),l},finish:function(s){for(var a=this.tryEntries.length-1;a>=0;--a){var g=this.tryEntries[a];if(g.finallyLoc===s)return this.complete(g.completion,g.afterLoc),P(g),l}},catch:function(s){for(var a=this.tryEntries.length-1;a>=0;--a){var g=this.tryEntries[a];if(g.tryLoc===s){var x=g.completion;if(x.type==="throw"){var L=x.arg;P(g)}return L}}throw new Error("illegal catch attempt")},delegateYield:function(s,a,g){return this.delegate={iterator:M(s),resultName:a,nextLoc:g},this.method==="next"&&(this.arg=r),l}},t}(e.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(ar);var ye={},Lt={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.browserSupportsPolyfills=Z.compareTwoStringsUsingDiceCoefficient=Z.commandToRegExp=Z.concatTranscripts=Z.debounce=void 0;var or=function(n,t,f){var u;return function(){var p=this,r=arguments,c=function(){u=null,f||n.apply(p,r)},y=f&&!u;clearTimeout(u),u=setTimeout(c,t),y&&n.apply(p,r)}};Z.debounce=or;var cr=function(){for(var n=arguments.length,t=new Array(n),f=0;f<n;f++)t[f]=arguments[f];return t.map(function(u){return u.trim()}).join(" ").trim()};Z.concatTranscripts=cr;var lr=/\s*\((.*?)\)\s*/g,ur=/(\(\?:[^)]+\))\?/g,pr=/(\(\?)?:\w+/g,fr=/\*/g,hr=/[-{}[\]+?.,\\^$|#]/g,dr=function(n){return n instanceof RegExp?new RegExp(n.source,"i"):(n=n.replace(hr,"\\$&").replace(lr,"(?:$1)?").replace(pr,function(t,f){return f?t:"([^\\s]+)"}).replace(fr,"(.*?)").replace(ur,"\\s*$1?\\s*"),new RegExp("^"+n+"$","i"))};Z.commandToRegExp=dr;var gr=function(n,t){if(n=n.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!n.length&&!t.length)return 1;if(!n.length||!t.length)return 0;if(n===t)return 1;if(n.length===1&&t.length===1||n.length<2||t.length<2)return 0;for(var f=new Map,u=0;u<n.length-1;u++){var p=n.substring(u,u+2),r=f.has(p)?f.get(p)+1:1;f.set(p,r)}for(var c=0,y=0;y<t.length-1;y++){var A=t.substring(y,y+2),$=f.has(A)?f.get(A):0;$>0&&(f.set(A,$-1),c++)}return 2*c/(n.length+t.length-2)};Z.compareTwoStringsUsingDiceCoefficient=gr;var mr=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};Z.browserSupportsPolyfills=mr;var he={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.APPEND_TRANSCRIPT=ce.CLEAR_TRANSCRIPT=void 0;var vr="CLEAR_TRANSCRIPT";ce.CLEAR_TRANSCRIPT=vr;var br="APPEND_TRANSCRIPT";ce.APPEND_TRANSCRIPT=br;Object.defineProperty(he,"__esModule",{value:!0});he.appendTranscript=he.clearTranscript=void 0;var xt=ce,yr=function(){return{type:xt.CLEAR_TRANSCRIPT}};he.clearTranscript=yr;var wr=function(n,t){return{type:xt.APPEND_TRANSCRIPT,payload:{interimTranscript:n,finalTranscript:t}}};he.appendTranscript=wr;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.transcriptReducer=void 0;var vt=ce,$r=Z,Tr=function(n,t){switch(t.type){case vt.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case vt.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,$r.concatTranscripts)(n.finalTranscript,t.payload.finalTranscript)};default:throw new Error}};Oe.transcriptReducer=Tr;var jt={},Ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=n})(Ye);var Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var n=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),t=function(p){return p===n};e.isNative=t;var f=n;e.default=f})(Qe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(Ye),t=Z,f=Qe;function u(T){return T&&T.__esModule?T:{default:T}}function p(T,w,h,S,R,m,d){try{var l=T[m](d),v=l.value}catch(o){h(o);return}l.done?w(v):Promise.resolve(v).then(S,R)}function r(T){return function(){var w=this,h=arguments;return new Promise(function(S,R){var m=T.apply(w,h);function d(v){p(m,S,R,d,l,"next",v)}function l(v){p(m,S,R,d,l,"throw",v)}d(void 0)})}}function c(T,w){if(!(T instanceof w))throw new TypeError("Cannot call a class as a function")}function y(T,w){for(var h=0;h<w.length;h++){var S=w[h];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(T,S.key,S)}}function A(T,w,h){return w&&y(T.prototype,w),h&&y(T,h),T}var $=function(){function T(w){c(this,T),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(w),(0,n.default)()&&(this.updateFinalTranscript=(0,t.debounce)(this.updateFinalTranscript,250,!0))}return A(T,[{key:"setSpeechRecognition",value:function(h){var S=!!h&&((0,f.isNative)(h)||(0,t.browserSupportsPolyfills)());S&&(this.disableRecognition(),this.recognition=new h,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(S)}},{key:"subscribe",value:function(h,S){this.subscribers[h]=S}},{key:"unsubscribe",value:function(h){delete this.subscribers[h]}},{key:"emitListeningChange",value:function(h){var S=this;this.listening=h,Object.keys(this.subscribers).forEach(function(R){var m=S.subscribers[R].onListeningChange;m(h)})}},{key:"emitMicrophoneAvailabilityChange",value:function(h){var S=this;this.isMicrophoneAvailable=h,Object.keys(this.subscribers).forEach(function(R){var m=S.subscribers[R].onMicrophoneAvailabilityChange;m(h)})}},{key:"emitTranscriptChange",value:function(h,S){var R=this;Object.keys(this.subscribers).forEach(function(m){var d=R.subscribers[m].onTranscriptChange;d(h,S)})}},{key:"emitClearTranscript",value:function(){var h=this;Object.keys(this.subscribers).forEach(function(S){var R=h.subscribers[S].onClearTranscript;R()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(h){var S=this;Object.keys(this.subscribers).forEach(function(R){var m=S.subscribers[R],d=m.onBrowserSupportsSpeechRecognitionChange,l=m.onBrowserSupportsContinuousListeningChange;d(h),l(h)})}},{key:"disconnect",value:function(h){if(this.recognition&&this.listening)switch(h){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(h){h&&h.error&&h.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(h){var S=h.results,R=h.resultIndex,m=R===void 0?S.length-1:R;this.interimTranscript="",this.finalTranscript="";for(var d=m;d<S.length;++d)S[d].isFinal&&(!(0,n.default)()||S[d][0].confidence>0)?this.updateFinalTranscript(S[d][0].transcript):this.interimTranscript=(0,t.concatTranscripts)(this.interimTranscript,S[d][0].transcript);var l=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(l=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,l||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(h){this.finalTranscript=(0,t.concatTranscripts)(this.finalTranscript,h)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var w=r(regeneratorRuntime.mark(function S(){var R,m,d,l,v,o,i=arguments;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(R=i.length>0&&i[0]!==void 0?i[0]:{},m=R.continuous,d=m===void 0?!1:m,l=R.language,this.recognition){j.next=3;break}return j.abrupt("return");case 3:if(v=d!==this.recognition.continuous,o=l&&l!==this.recognition.lang,!(v||o)){j.next=11;break}if(!this.listening){j.next=9;break}return j.next=9,this.stopListening();case 9:this.recognition.continuous=v?d:this.recognition.continuous,this.recognition.lang=o?l:this.recognition.lang;case 11:if(this.listening){j.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),j.prev=13,j.next=16,this.start();case 16:this.emitListeningChange(!0),j.next=22;break;case 19:j.prev=19,j.t0=j.catch(13),j.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return j.stop()}},S,this,[[13,19]])}));function h(){return w.apply(this,arguments)}return h}()},{key:"abortListening",value:function(){var w=r(regeneratorRuntime.mark(function S(){var R=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),d.next=4,new Promise(function(l){R.onStopListening=l});case 4:case"end":return d.stop()}},S,this)}));function h(){return w.apply(this,arguments)}return h}()},{key:"stopListening",value:function(){var w=r(regeneratorRuntime.mark(function S(){var R=this;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),d.next=4,new Promise(function(l){R.onStopListening=l});case 4:case"end":return d.stop()}},S,this)}));function h(){return w.apply(this,arguments)}return h}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var w=r(regeneratorRuntime.mark(function S(){return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(this.recognition&&!this.listening)){m.next=4;break}return m.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return m.stop()}},S,this)}));function h(){return w.apply(this,arguments)}return h}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),T}();e.default=$})(jt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var n=z,t=Z,f=he,u=Oe,p=y(jt),r=y(Ye),c=y(Qe);function y(k){return k&&k.__esModule?k:{default:k}}function A(k,E,_,P,O,M,F){try{var s=k[M](F),a=s.value}catch(g){_(g);return}s.done?E(a):Promise.resolve(a).then(P,O)}function $(k){return function(){var E=this,_=arguments;return new Promise(function(P,O){var M=k.apply(E,_);function F(a){A(M,P,O,F,s,"next",a)}function s(a){A(M,P,O,F,s,"throw",a)}F(void 0)})}}function T(k){return S(k)||h(k)||l(k)||w()}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(k){if(typeof Symbol<"u"&&Symbol.iterator in Object(k))return Array.from(k)}function S(k){if(Array.isArray(k))return v(k)}function R(k){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(_){return typeof _}:R=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},R(k)}function m(k,E){return i(k)||o(k,E)||l(k,E)||d()}function d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(k,E){if(k){if(typeof k=="string")return v(k,E);var _=Object.prototype.toString.call(k).slice(8,-1);if(_==="Object"&&k.constructor&&(_=k.constructor.name),_==="Map"||_==="Set")return Array.from(k);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return v(k,E)}}function v(k,E){(E==null||E>k.length)&&(E=k.length);for(var _=0,P=new Array(E);_<E;_++)P[_]=k[_];return P}function o(k,E){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(k)))){var _=[],P=!0,O=!1,M=void 0;try{for(var F=k[Symbol.iterator](),s;!(P=(s=F.next()).done)&&(_.push(s.value),!(E&&_.length===E));P=!0);}catch(a){O=!0,M=a}finally{try{!P&&F.return!=null&&F.return()}finally{if(O)throw M}}return _}}function i(k){if(Array.isArray(k))return k}var C=!!c.default,j=C&&!(0,r.default)(),I,W=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=E.transcribing,P=_===void 0?!0:_,O=E.clearTranscriptOnListen,M=O===void 0?!0:O,F=E.commands,s=F===void 0?[]:F,a=(0,n.useState)(B.getRecognitionManager()),g=m(a,1),x=g[0],L=(0,n.useState)(C),D=m(L,2),U=D[0],H=D[1],Q=(0,n.useState)(j),K=m(Q,2),ge=K[0],ae=K[1],re=(0,n.useReducer)(u.transcriptReducer,{interimTranscript:x.interimTranscript,finalTranscript:""}),Je=m(re,2),Xe=Je[0],et=Xe.interimTranscript,tt=Xe.finalTranscript,nt=Je[1],Ft=(0,n.useState)(x.listening),rt=m(Ft,2),Gt=rt[0],Vt=rt[1],Kt=(0,n.useState)(x.isMicrophoneAvailable),it=m(Kt,2),Ut=it[0],Ht=it[1],st=(0,n.useRef)(s);st.current=s;var at=function(){nt((0,f.clearTranscript)())},me=(0,n.useCallback)(function(){x.resetTranscript(),at()},[x]),qt=function(q,te,oe){var se=R(q)==="object"?q.toString():q,ve=se.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),Se=(0,t.compareTwoStringsUsingDiceCoefficient)(ve,te);return Se>=oe?{command:q,commandWithoutSpecials:ve,howSimilar:Se,isFuzzyMatch:!0}:null},Yt=function(q,te){var oe=(0,t.commandToRegExp)(q),se=oe.exec(te);return se?{command:q,parameters:se.slice(1)}:null},ot=(0,n.useCallback)(function(ee,q){st.current.forEach(function(te){var oe=te.command,se=te.callback,ve=te.matchInterim,Se=ve===void 0?!1:ve,ut=te.isFuzzyMatch,pt=ut===void 0?!1:ut,ft=te.fuzzyMatchingThreshold,Zt=ft===void 0?.8:ft,ht=te.bestMatchOnly,Jt=ht===void 0?!1:ht,Re=!q&&Se?ee.trim():q.trim(),Xt=Array.isArray(oe)?oe:[oe],ke=Xt.map(function(J){return pt?qt(J,Re,Zt):Yt(J,Re)}).filter(function(J){return J});if(pt&&Jt&&ke.length>=2){ke.sort(function(J,Ie){return Ie.howSimilar-J.howSimilar});var ze=ke[0],en=ze.command,tn=ze.commandWithoutSpecials,nn=ze.howSimilar;se(tn,Re,nn,{command:en,resetTranscript:me})}else ke.forEach(function(J){if(J.isFuzzyMatch){var Ie=J.command,rn=J.commandWithoutSpecials,sn=J.howSimilar;se(rn,Re,sn,{command:Ie,resetTranscript:me})}else{var an=J.command,on=J.parameters;se.apply(void 0,T(on).concat([{command:an,resetTranscript:me}]))}})})},[me]),ct=(0,n.useCallback)(function(ee,q){P&&nt((0,f.appendTranscript)(ee,q)),ot(ee,q)},[ot,P]),lt=(0,n.useCallback)(function(){M&&at()},[M]);(0,n.useEffect)(function(){var ee=B.counter;B.counter+=1;var q={onListeningChange:Vt,onMicrophoneAvailabilityChange:Ht,onTranscriptChange:ct,onClearTranscript:lt,onBrowserSupportsSpeechRecognitionChange:H,onBrowserSupportsContinuousListeningChange:ae};return x.subscribe(ee,q),function(){x.unsubscribe(ee)}},[P,M,x,ct,lt]);var Qt=(0,t.concatTranscripts)(tt,et);return{transcript:Qt,interimTranscript:et,finalTranscript:tt,listening:Gt,isMicrophoneAvailable:Ut,resetTranscript:me,browserSupportsSpeechRecognition:U,browserSupportsContinuousListening:ge}};e.useSpeechRecognition=W;var B={counter:0,applyPolyfill:function(E){I?I.setSpeechRecognition(E):I=new p.default(E);var _=!!E&&(0,t.browserSupportsPolyfills)();C=_,j=_},removePolyfill:function(){I?I.setSpeechRecognition(c.default):I=new p.default(c.default),C=!!c.default,j=C&&!(0,r.default)()},getRecognitionManager:function(){return I||(I=new p.default(c.default)),I},getRecognition:function(){var E=B.getRecognitionManager();return E.getRecognition()},startListening:function(){var k=$(regeneratorRuntime.mark(function _(){var P,O,M,F,s=arguments;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return P=s.length>0&&s[0]!==void 0?s[0]:{},O=P.continuous,M=P.language,F=B.getRecognitionManager(),g.next=4,F.startListening({continuous:O,language:M});case 4:case"end":return g.stop()}},_)}));function E(){return k.apply(this,arguments)}return E}(),stopListening:function(){var k=$(regeneratorRuntime.mark(function _(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=B.getRecognitionManager(),M.next=3,P.stopListening();case 3:case"end":return M.stop()}},_)}));function E(){return k.apply(this,arguments)}return E}(),abortListening:function(){var k=$(regeneratorRuntime.mark(function _(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=B.getRecognitionManager(),M.next=3,P.abortListening();case 3:case"end":return M.stop()}},_)}));function E(){return k.apply(this,arguments)}return E}(),browserSupportsSpeechRecognition:function(){return C},browserSupportsContinuousListening:function(){return j}},X=B;e.default=X})(Lt);(function(e){function n(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(y){return typeof y}:n=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},n(r)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return t.useSpeechRecognition}}),e.default=void 0;var t=u(Lt);function f(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return f=function(){return r},r}function u(r){if(r&&r.__esModule)return r;if(r===null||n(r)!=="object"&&typeof r!="function")return{default:r};var c=f();if(c&&c.has(r))return c.get(r);var y={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in r)if(Object.prototype.hasOwnProperty.call(r,$)){var T=A?Object.getOwnPropertyDescriptor(r,$):null;T&&(T.get||T.set)?Object.defineProperty(y,$,T):y[$]=r[$]}return y.default=r,c&&c.set(r,y),y}var p=t.default;e.default=p})(ye);const be=fn(ye),{colors:G,shadows:bt,indents:Be}=Y,Sr=$e`
  margin-bottom: 7px;
  padding-block: ${Be.xs};

  display: grid;
  align-items: center;
  grid-template-columns: 1fr 25fr 1fr;
  column-gap: 2px;

  border: 1px solid transparent;
  background-color: ${({licolor:e})=>e};
  border-radius: ${Be.xs};
  font-size: 22px;

  &:last-of-type {
    margin-bottom: ${Be.s};
  }
`,Rr=V.li`
  ${Sr}

  transition: box-shadow 250ms, border-color 250ms;

  &#active-element {
    border-color: ${G.border};
    background-color: ${G.background};
    box-shadow: ${bt.back};

    &:hover {
      border-color: ${G.accent};
    }
    & div button {
      transition: color 250ms;
      color: ${G.smokeBlack};
      &:hover {
        color: ${G.hovered};
      }
    }
  }

  & div button {
    transition: color 250ms;
    &:hover {
      color: ${G.hovered};
    }
  }

  &:hover {
    border-color: ${G.accent};
    box-shadow: ${bt.back};
  }

  &:hover label,
  &:hover button {
    opacity: 1;
  }
`,Pt=$e`
  min-height: 19px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & input {
    ${Dn}
  }
`,kr=V.label`
  ${Pt}

  & svg {
    transition: stroke 250ms;
    stroke-width: 2px;
    color: ${({$hovered:e})=>e?G.yellow:"transparent"};
    stroke: ${({$hovered:e})=>e?G.yellow:G.border};
  }
  &:hover svg {
    stroke: ${G.placeholder};
  }
`,Ar=V.label`
  ${Pt}
  opacity: ${({$hovered:e})=>e?1:0};
  transition: opacity 250ms;

  & svg {
    transition: border-color 250ms, color 250ms;
    padding: 1px;
    border: 2px solid ${G.border};
    border-radius: 50%;
    color: ${({$hovered:e})=>e?G.border:"transparent"};
  }
  &:hover svg {
    border-color: ${G.placeholder};
    color: ${({$hovered:e})=>e?G.placeholder:"transparent"};
  }
`,Te=$e`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: transparent;
  border-color: transparent;
  transition: opacity 250ms color 250ms;
  color: ${G.black};

  & svg {
    transition: color 250ms;
    color: ${G.border};
  }
  &:hover,
  &:hover svg {
    color: ${G.placeholder};
  }
`,Cr=V.button`
  ${Te}

  opacity: ${({$hovered:e})=>e?1:0};
`,Er=V.button`
  ${Te}

  opacity: 0;
`,{colors:de,indents:Mt}=Y,Dt=$e`
  padding-block: 4px;
  display: grid;
  align-items: start;
  grid-template-columns: 20fr 1fr 20fr;
`,_r=V.div`
  ${Dt}
`,Lr=V.form`
  ${Dt}

  max-height: 70vh;
  overflow-y: scroll;
  scrollbar-width: none;
  grid-template-columns: 12fr 1fr 12fr;
`,yt=V.textarea`
  height: 84px;
  outline: none;
  border: 1px solid ${de.accent};
  border-radius: ${Mt.xs};
  resize: none;
  overflow: clip;
  transition: height 150ms;
`,xr=V.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &::after {
    content: '';
    height: calc(100% - 8px);
    width: 1px;
    border: 1px solid ${de.borderLight};
    transition: border-color 250ms;
  }

  &:hover::after {
    border-color: ${de.placeholder};
  }
`,jr=V.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Pr=V.button`
  ${Te}
`,He=V.button`
  ${Te}
`,Mr=V.button`
  ${Te}
`,wt=V.button`
  height: 100%;
  text-align: left;
  display: flex;
  align-items: top;
  background-color: transparent;
  border-color: transparent;
  border-radius: ${Mt.xs};
  color: ${de.black};
  transition: background-color 250ms;
`,Ot=$e`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Dr=V.iframe`
  ${Ot}
`,Or=V.audio`
  ${Ot}

  &::-webkit-media-controls {
    display: flex;
    justify-content: center;
    background-color: ${de.background};
  }
  &::-webkit-media-controls-panel {
    background-color: ${de.backgroundHoverd};
  }
`,Ze=({el:e,setIsForm:n,setRecording:t,setTranslation:f})=>{const u=z.useRef(null),p=z.useRef(null),r=z.useRef(null),c=le(),{user:y}=ue(),{activeCluster:A}=ie(),[$,T]=z.useState(""),{_id:w,element:h,caption:S}=e,{register:R,watch:m,setValue:d,handleSubmit:l,setFocus:v}=On({mode:"onBlur",defaultValues:{element:h,caption:S}});z.useEffect(()=>{d("caption",S)},[S,d]);const{ref:o,...i}=R("element"),{ref:C,...j}=R("caption"),I=[u.current,p.current,r.current],W=[m("caption"),m("element")];Fn(I,W),z.useEffect(()=>{v("element"),$&&h.trim().startsWith("der")?d("element",$+h.replace("der","").trim()+", "):$&&h.trim().startsWith("die")?d("element",$+h.replace("die","").trim()+", "):$&&h.trim().startsWith("das")?d("element",$+h.replace("das","").trim()+", "):$?d("element",$+h+", "):d("element",$+h)},[$,h,v,d]),z.useEffect(()=>{const E=async _=>{_.code==="NumpadAdd"&&(_.preventDefault(),await k(y.engine),l(B)()),_.key==="Enter"&&(_.preventDefault(),l(B)()),_.key==="Escape"&&(_.preventDefault(),n(!1)),_.code==="AltRight"&&u.current.focus()};return addEventListener("keydown",E),()=>{removeEventListener("keydown",E)}},[]);const B=E=>{const _=y.lang;let P=E.caption.trim(),O=Ke(E.element,A.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();O=De(O,","),P=De(P,","),y.lang.includes("en")&&A.lang.includes("de")&&(O.includes("hat")||O.includes("ist"))&&O.split(`
`)[0].split(/,\s+/)[0].endsWith("n")&&(P=P.split(/,\s+/).map(s=>s.startsWith("to ")?s:`to ${s}`).join(", ")),c(w?Pe({_id:w,lang:_,element:O,caption:P}):St({...e,element:O,caption:P})).then(c(kt())),w||(Rt(),t(""),f("")),n(!1)},X=()=>{$===""&&T("der "),$==="der "&&T("die "),$==="die "&&T("das "),$==="das "&&T("")},k=async E=>{const _=m("element"),P=Ke(_,A.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim(),O={from:A.lang,to:y.lang},M=await we(P,O,E);d("caption",M)};return b.jsxs(Lr,{onSubmit:l(B),children:[b.jsx(yt,{...i,name:"element",ref:E=>{o(E),u.current=E}}),b.jsxs(jr,{ref:r,children:[b.jsx(Mr,{type:"button",onClick:X,children:b.jsx(zn,{size:"18px"})}),b.jsx(He,{type:"button",onClick:()=>k("google"),children:b.jsx(hn,{size:"16px"})}),b.jsx(He,{type:"button",onClick:()=>k("deepl"),children:b.jsx(dn,{size:"18px"})}),b.jsx(Pr,{children:b.jsx(gn,{size:"16px"})})]}),b.jsx(yt,{...j,name:"caption",ref:E=>{C(E),p.current=E}})]})};Ze.propTypes={el:N.object,setIsForm:N.func,setRecording:N.func,setTranslation:N.func};const{button:zr}=Y.shadows,{m:Ir,xl:Nr}=Y.indents,Br=()=>{const{user:e}=ue(),[n,t]=z.useState(!1),{activeCluster:f}=ie(),[u,p]=z.useState(""),[r,c]=z.useState(""),{transcript:y,listening:A,resetTranscript:$}=ye.useSpeechRecognition(),{isMicrophoneAvailable:T}=ye.useSpeechRecognition(),{browserSupportsSpeechRecognition:w}=ye.useSpeechRecognition(),h=u.endsWith(", ")||u.replace(/[a-z]$/,"*#").endsWith("*#")?y.replace(/^./,l=>` ${l}`):y.replace(/^./,l=>l.toUpperCase()),S=`${u}${h}`,R=In(S,Un),m=(l,v)=>l.trim().endsWith(v)?`${l.trim()} `:`${l.trim()}${v} `;if(z.useEffect(()=>{if(!A||!n)return;const l=[".","?","!",","],v=o=>{if(l.includes(o.key)){o.preventDefault();const i=m(R,o.key);p(i),$()}if(o.key==="Backspace"){o.preventDefault();const i=R.length-1,C=R.substring(0,i);p(C),$()}if(o.key==="Space"){o.preventDefault();const i=R+" ";p(i),$()}};return addEventListener("keydown",v),()=>{removeEventListener("keydown",v)}},[n,A,R,$]),z.useEffect(()=>{const l=async v=>{if(A||v.metaKey&&v.key==="r"&&!v.altKey&&!v.shiftKey&&(v.preventDefault(),t(!0),be.startListening({language:f.lang,continuous:!0})),A&&v.metaKey&&v.key==="r"&&!v.altKey&&!v.shiftKey){v.preventDefault(),be.stopListening();const o=R.at(-1),i=!o||["!"].includes(o)?R:m(R,"."),C=await we(i,{from:f.lang,to:e.lang},e.engine);p(i),c(C),$()}};return addEventListener("keydown",l),()=>{removeEventListener("keydown",l)}},[f.lang,n,A,R,$,e.engine,e.lang]),z.useEffect(()=>{const l=async v=>{if(v.key==="Escape"||v.key==="Enter"){v.preventDefault(),be.stopListening(),t(!1),p(""),c(""),$();return}};return addEventListener("keyup",l),()=>{removeEventListener("keyup",l)}},[$]),!w||!T)return;const d=async l=>{if(l==null||l.currentTarget.blur(),!A)t(!0),be.startListening({language:f.lang,continuous:!0});else{be.stopListening();const v=R.at(-1),o=!v||["!"].includes(v)?R:m(R,"."),i={from:f.lang,to:e.lang},C=await we(o,i,e.engine);p(o),c(C),$()}};return b.jsxs(b.Fragment,{children:[b.jsx(pe,{onClick:d,$s:"m",$round:!0,$bs:zr,children:A?b.jsx(vn,{size:18}):b.jsx(mn,{size:18})}),n&&b.jsx(bn,{$x:`left: ${Ir}`,$y:`top: ${Nr}`,$bd:"none",children:b.jsx(Ze,{el:{cluster:f._id,element:R.trim(),caption:r.trim(),favorite:!0,checked:R.split(/\s+/).length<20},setIsForm:t,setRecording:p,setTranslation:c})})]})},{m:Wr,s:Fr}=Y.indents,zt=({className:e})=>{const{pathname:n}=yn(),{elementTrash:t}=fe(),{activeCluster:f}=ie(),u=t.length>0?" 1fr":"",p=f?" 1fr":"",r=u+p+" 1fr 1fr";if(n.includes("/element"))return b.jsxs(qe,{className:e,$m:`${Fr} ${Wr}`,$pos:"fixed",$side:"left",$high:"bottom",$gtc:r,children:[b.jsx(sr,{}),b.jsx(Br,{}),p&&b.jsx(er,{}),u&&b.jsx(nr,{})]})};zt.propTypes={className:N.string};const{colors:We}=Y,Gr=V.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  &:hover svg {
    stroke: ${We.yellow};
  }

  & svg {
    transition: stroke 250ms;
    stroke: ${We.hovered};
    /* stroke: ${({$colored:e})=>e&&We.yellow}; */
    @keyframes refresh-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
    animation: refresh-spin infinite 12s linear;
  }
`,It=({onClick:e})=>b.jsx(Gr,{onClick:e,children:b.jsx(wn,{size:"35px"})});It.propTypes={onClick:N.func};const{background:Fe}=Y.colors,{button:$t}=Y.shadows,{m:Vr,s:Kr}=Y.indents,Nt=({className:e,filtredElements:n,setLiColor:t})=>{const{user:f}=ue(),{activeCluster:u}=ie(),{activeElement:p}=fe(),[r,c]=z.useState(null);if(z.useEffect(()=>{const m=window.speechSynthesis.getVoices();Array.isArray(m)&&m.length>0&&c(m),"onvoiceschanged"in window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{const d=window.speechSynthesis.getVoices();c(d)})},[]),!Array.isArray(r)||r.length===0)return;const y=m=>{if(!m.length)return;let d="",l=0;const v=m.reduce((o,i)=>(o[i.lang]||(o[i.lang]=0),o[i.lang]+=1,o),{});for(const o in v)v[o]>l&&(l=v[o],d=o);return d},A=n.length?y(n):f.lang,$=(m,d)=>m.replaceAll(", `",`;${d} `).replaceAll(" `",`${d} `).replaceAll(",`",";"),T=({text:m,playList:d,divider:l})=>{let v="";for(let o=0;o<d.length;o+=1){let i=d[o][m];const C=`@±@${d[o].lang}${l}`;i.endsWith(".")||i.endsWith("!")||i.endsWith("?")||i.endsWith('"')?(v+=$(i,l).replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",m!=="caption"?`__${l}`:`__${C}`).replaceAll(".",m!=="caption"?`.${l}`:`.${C}`).replaceAll(",",m!=="caption"?`,${l}`:`,${C}`).replaceAll("!",m!=="caption"?`!${l}`:`!${C}`).replaceAll("?",m!=="caption"?`?${l}`:`?${C}`).replaceAll(":",m!=="caption"?`:${l}`:`:${C}`),u.lang.includes("de")&&(v=v.replaceAll(`0.${l}`,"0.").replaceAll(`1.${l}`,"1.").replaceAll(`2.${l}`,"2.").replaceAll(`3.${l}`,"3.").replaceAll(`4.${l}`,"4.").replaceAll(`5.${l}`,"5.").replaceAll(`6.${l}`,"6.").replaceAll(`7.${l}`,"7.").replaceAll(`8.${l}`,"8.").replaceAll(`9.${l}`,"9."))):d[o].element.startsWith("[")||(m==="caption"&&(i.includes(" [")&&(i=i.substring(0,i.indexOf(" ["))),i=`${i}@±@${d[o].lang}`),v+=i+l)}return v},w=r,h=m=>{m.currentTarget.blur(),t(Fe);const d="$*@",l=n.findIndex(i=>i.element===p.element),v=n.splice(l===-1?0:l),o=Me({setLiColor:t,divider:d,voices:w,text:T({text:"element",playList:v,divider:d}),lang:u.lang,rate:u.rate});o&&ne.error(o)},S=m=>{m.currentTarget.blur();const d="$*@";t(Fe);const l=n.findIndex(i=>i.element===p.element),v=n.splice(l===-1?0:l),o=Me({setLiColor:t,divider:d,voices:w,text:T({text:"caption",playList:v,divider:d}),lang:A,rate:f.rate});o&&ne.error(o)},R=m=>{m.currentTarget.blur(),t(Fe);let d="";const l="$*@",v=n.findIndex(C=>C.element===p.element),o=n.splice(v===-1?0:v);for(let C=0;C<o.length;C+=1){const{element:j,caption:I,lang:W}=o[C];if(!j.startsWith("[")){const B=$(j,""),X=I.includes(" [")?I.substring(0,I.indexOf(" [")):$(I,"");d+=B+`@±@${W}`+X+l}}const i=$n({setLiColor:t,divider:l,voices:w,text:d,lang:u.lang,rate:f.rate});i&&ne.error(i)};return b.jsxs(qe,{className:e,$m:`${Kr} ${Vr}`,$pos:"fixed",$side:"right",$high:"bottom",$gtc:"1fr 0.5fr 1fr",children:[b.jsx(pe,{onClick:h,$s:"m",$round:!0,$bs:$t,children:(u==null?void 0:u.lang.at(0).toUpperCase())+(u==null?void 0:u.lang.substring(1))}),b.jsx(It,{onClick:R}),b.jsx(pe,{onClick:S,$s:"m",$round:!0,$bs:$t,children:(A==null?void 0:A.at(0).toUpperCase())+(A==null?void 0:A.substring(1))})]})};Nt.propTypes={className:N.string,filtredElements:N.array,setLiColor:N.func};const Bt=({el:e,sortByDate:n,setSortByDate:t,setLiColor:f})=>{var v;const u=le(),{user:p}=ue(),{activeCluster:r}=ie(),[c,y]=z.useState(),A="$*@",$=(o,i)=>{let C="";return i?(o.trim().endsWith(".")||o.trim().endsWith("!")||o.trim().endsWith("?")||o.endsWith('"')?(C=o.trim().replaceAll(", `",`;${i} `).replaceAll(" `",`${i} `).replaceAll(",`",";").replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",`__${i}`).replaceAll(".",`.${i}`).replaceAll(",",`,${i}`).replaceAll("!",`!${i}`).replaceAll("?",`?${i}`).replaceAll(":",`:${i}`),r.lang.includes("de")&&(C=C.replaceAll(`0.${i}`,"0.").replaceAll(`1.${i}`,"1.").replaceAll(`2.${i}`,"2.").replaceAll(`3.${i}`,"3.").replaceAll(`4.${i}`,"4.").replaceAll(`5.${i}`,"5.").replaceAll(`6.${i}`,"6.").replaceAll(`7.${i}`,"7.").replaceAll(`8.${i}`,"8.").replaceAll(`9.${i}`,"9."))):C=o.trim()+i,C.includes("[")?C.substring(0,C.indexOf("["))+i:C):o},T=o=>{o.currentTarget.blur();const i=Me({setLiColor:f,divider:A,voices:window.speechSynthesis.getVoices(),text:$(e.element,A),lang:r.lang,rate:r.rate});i&&ne.error(i)},w=o=>{o.currentTarget.blur();const i=Me({setLiColor:f,divider:A,voices:window.speechSynthesis.getVoices(),text:$(e.caption,A),lang:e.lang,rate:p.rate});i&&ne.error(i)},h=o=>{t(!n),n?ne.success("Below is Recent"):ne.success("Above is Recent"),o.stopPropagation()},S=o=>{const{_id:i}=r;u(At(e)),o.currentTarget.closest("li").id!=="active-element"&&u(Ge({_id:i,activeEl:e._id}))},R=Tn(e.caption),m=Sn({onSuccess:o=>{const{access_token:i,expires_in:C}=o,j={accessToken:i,expiresIn:C*1e3+Date.now()};u(Rn(j))},onError:o=>ne(o.message)}),d=async o=>{const i=await kn.get(R.file,{responseType:"blob",headers:{Authorization:`Bearer ${o}`}}).then(j=>j.data),C=URL.createObjectURL(i);y(C)},l=Date.now()>((v=p==null?void 0:p.googleToken)==null?void 0:v.expiresIn);return b.jsx(b.Fragment,{children:b.jsxs(_r,{onClick:S,children:[b.jsx(wt,{onClick:T,children:e.element}),b.jsx(xr,{onClick:e.element.startsWith("[")?p.googleToken?()=>d(p.googleToken.accessToken):()=>m():h}),R.text&&b.jsx(wt,{onClick:w,children:R.text}),c&&!l&&b.jsx(Or,{src:c,controls:!0}),(!c||l)&&R.link&&b.jsx(Dr,{src:R.link})]})})};Bt.propTypes={el:N.object,sortByDate:N.bool,setSortByDate:N.func,$active:N.bool,$hovered:N.bool,setLiColor:N.func};const Wt=({el:e,index:n,length:t,sortByDate:f,setSortByDate:u,translateAll:p,liColor:r,setLiColor:c})=>{const y=le(),{elementTrash:A,activeElement:$}=fe(),[T,w]=z.useState(!1),{_id:h,favorite:S,checked:R}=e,m=A.find(C=>C._id===h),d=()=>{y(Pe({_id:h,favorite:!S}))},l=()=>{y(Pe({_id:h,checked:!R}))},v=()=>y(Ln(e)),o=()=>w(!T),i=h===($==null?void 0:$._id);return b.jsxs(Rr,{id:i?"active-element":null,licolor:r,children:[b.jsxs(Ve,{$h:"100%",$p:"0",$fd:"column",children:[b.jsxs(kr,{$hovered:S,children:[b.jsx("input",{type:"checkbox",name:"favorite",checked:S,onChange:d}),b.jsx(Mn,{size:"20px"})]}),b.jsxs(Ar,{$hovered:R,children:[b.jsx("input",{type:"checkbox",name:"checked",checked:R,onChange:l}),b.jsx(An,{size:"15px"})]}),T&&t===n+1&&b.jsx(He,{onClick:p,children:b.jsx(Cn,{size:"16px"})})]}),T&&b.jsx(Ze,{el:e,setIsForm:w}),!T&&b.jsx(Bt,{el:e,sortByDate:f,setSortByDate:u,setLiColor:c}),b.jsxs(Ve,{$h:"100%",$p:"0",$fd:"column",children:[b.jsx(Cr,{$hovered:m,onClick:v,children:b.jsx(En,{size:"16px"})}),b.jsx(Er,{onClick:o,children:b.jsx(_n,{size:"15px"})})]})]})};Wt.propTypes={el:N.object,index:N.number,length:N.number,sortByDate:N.bool,setSortByDate:N.func,translateAll:N.func,liColor:N.string,setLiColor:N.func};const Ur=V.ul`
  width: 100%;
  list-style: none;
`,{white:Hr}=Y.colors,qr=()=>{const e=le(),{ref:n,inView:t,entry:f}=Jn({initialInView:!0,rootMargin:"0px 0px -30px 0px"}),{user:u}=ue(),{activeCluster:p}=ie(),{allElements:r,elementTrash:c,elementFilter:y,isLoading:A}=fe(),[$,T]=z.useState(Hr);let{elementSelect:w}=fe();w=w||[];const[h,S]=z.useState(!1);z.useEffect(()=>{p&&e(kt({cluster:p._id})).unwrap().then(({result:o})=>{if(!p.activeEl)return;const i=o.elements.find(({_id:C})=>C===p.activeEl);e(At(i))}).then(()=>{const o=document.getElementById("active-element");o&&xn(o)})},[]);const R=r.filter(o=>o.cluster===(p==null?void 0:p._id)).sort((o,i)=>o.createdAt.localeCompare(i.createdAt)),d=(()=>{const o=c.map(i=>i._id);return w.includes("trash")?R.filter(i=>o.includes(i._id)):R})().filter(({element:o,caption:i,favorite:C,checked:j})=>{const I=o.toLowerCase().replace("·","").includes(y)||o.toLowerCase().includes(y)||i.toLowerCase().includes(y),W=w.includes("wordlist")?I&&Nn(o):I,B=()=>w.some(k=>["favorite","unfavorite"].includes(k))?w.includes("favorite")?W&&C===!0:W&&C===!1:W;return(()=>w.some(k=>["checked","unchecked"].includes(k))?w.includes("checked")?B()&&j===!0:B()&&j===!1:B())()}).sort(h?(o,i)=>i.createdAt.localeCompare(o.createdAt):(o,i)=>o.createdAt.localeCompare(i.createdAt)),l=async()=>{const o=u.lang;let i=0;await d.forEach(async C=>{if(i>1)return;const{_id:j,element:I}=C;if(!I.startsWith("[")||o!==C.lang){const W={from:p.lang,to:o},B=await we(I,W,u.engine);e(Pe({_id:j,lang:o,caption:B})),i=i+1}})},v=window.innerHeight<(f==null?void 0:f.target.getBoundingClientRect().y)+(f==null?void 0:f.target.getBoundingClientRect().height)*1.5;return b.jsxs(b.Fragment,{children:[b.jsxs(Ur,{children:[d.map((o,i,C)=>b.jsx(Wt,{el:o,index:i,length:C.length,sortByDate:h,setSortByDate:S,translateAll:l,liColor:$,setLiColor:T},o._id)),b.jsxs("div",{ref:n,children:[b.jsx(_t,{}),b.jsx(zt,{className:!t||!v?"shown":"hidden"}),b.jsx(Nt,{className:!t||!v?"shown":"hidden",filtredElements:d,setLiColor:T})]})]}),A&&b.jsx(jn,{})]})},{s:Tt,m:Yr}=Y.indents,ti=()=>b.jsx(Ve,{$p:`0 ${Yr} ${Tt} ${Tt}`,children:b.jsx(qr,{})});export{ti as default};
