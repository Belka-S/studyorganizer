import{U as Ne,r as D,t as K,P as N,u as oe,b as ue,w as ie,j as S,T as qe,V as ke,y as Ge,G as dt,H as gt,x as pe,S as hn,W as kt,X as At,Q as ee,A as fe,Y as dn,Z as gn,_ as mn,$ as vn,k as Ct,n as de,s as W,a0 as bn,a1 as yn,a2 as wn,a3 as je,a4 as Et,a5 as $n,a6 as Sn,M as Tn,a7 as Rn,a8 as Pe,a9 as kn,aa as An,ab as Cn,ac as En,ad as xn,ae as xt,F as Ve,E as _n,af as Ln,D as jn,C as Pn,ag as Mn,N as On,ah as Dn}from"./index-bc972c66.js";import{r as _t,H as In,T as zn}from"./index-a7ae1272.js";import{w as Lt}from"./writeClipboard-4545275e.js";import{v as Nn,u as Bn}from"./index.esm-f293f25c.js";import{a as Wn}from"./index-51e04b50.js";const Ue=(e,n)=>{if(!n.includes("de"))return e;const t=e.trim().split(`
`);return t.length===1?e:["der","die","das"].includes(t[0].split(" ")[0])?`${t[0].trim()}, ${t[1].split("·")[1].replaceAll("⁰","").replaceAll("/"," / ").trim()}`:(e.includes("hat")||e.includes("ist"))&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e.includes("am")&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e},Fn=(e,n)=>{let t=e;for(const r in n)t=t.replaceAll(r,n[r]);const u=r=>r.replace(/^./,s=>s.toUpperCase()),o=[...t.split(/\s+/)];for(let r=0;r<o.length;r+=1)[".","!","?"].includes(o[r].at(-1))&&o[r+1]&&o.splice(r+1,1,u(o[r+1]));return o.join(" ")},Gn=e=>/[a-z]/.test(e.charAt(0)),{VITE_DEEPL_API_KEY:Vn}={VITE_GOOGLE_CLIENT_ID:"689266183428-lh3lmpaqnd2qd6t93voa8s6ipt3836q1.apps.googleusercontent.com",VITE_DEEPL_API_KEY:"d15bf272-fb1f-4f29-bbc3-d3bbdd686c53:fx",VITE_GOOGLE_API_KEY:"AIzaSyDqQndBxYEuOG7F6iYDqQoiNF90tptRmBQ",VITE_PROD_BACK_URL:"https://studyorganizer.onrender.com",BASE_URL:"/studyorganizer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Un={google:"",deepl:Vn},we=async(e,{from:n,to:t},u)=>{var l,r;if(!e||e.length===0)return"";const o=e.replaceAll(" ·",",").replaceAll("·","");Ne.engine=u,Ne.key=Un[u];try{let s=await Ne(`${o}`,{from:n,to:t});if(t.includes("en")&&o.toLowerCase().includes("uhr")&&(s=s.replaceAll("a.m. on","am on").replaceAll("p.m. on","pm on").replaceAll("a.m. to","am to").replaceAll("p.m. to","pm to").replaceAll("a.m.","am.").replaceAll("p.m.","pm.")),[".","!","?"].includes(o.at(-1)))return s;const k=o.split(o.includes(", ")?", ":/\s+/),y=s.split(", "),g=t.includes("de")?y[0]:y[0].at(0).toLowerCase()+y[0].substring(1);return k.length===1?s.toLocaleLowerCase()+", ":["der","die","das"].includes(k[0].split(" ")[0])?s.replace("The ","").replace("the ","").split(", ")[0].toLocaleLowerCase()+", ":t.includes("en")&&((l=k[2])!=null&&l.startsWith("am"))?y[2].startsWith("the")?s:`${g}, ${y[1]}, the ${y[2]}`:(k[0].endsWith("n")&&["hat","ist"].includes((r=k[2])==null?void 0:r.split(" ")[0])&&n.includes("de")&&(s=t.includes("en")?"to "+g+", ":g+", "),s)}catch(s){return s.message}},Me=(e,n)=>e.endsWith(n)?e.substring(0,e.length-1):e,Kn=(e,n)=>{let t=84;e[0]&&(t=Number(e[0].style.height.replace("px",""))),D.useEffect(()=>{if(!e[0])return;let u=Math.max(...e.map(o=>o.scrollHeight));t!==u&&(u=u<=90?u:u+6,e.forEach(o=>{o.style.height=u+"px"}))},[t,e,n])},Ae=[{value:"de",label:"German"},{value:"en",label:"English"},{value:"uk",label:"Ukrainian"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"it",label:"Italian"}],Ce=[{value:.3,label:"Rate: 0.3"},{value:.4,label:"Rate: 0.4"},{value:.5,label:"Rate: 0.5"},{value:.6,label:"Rate: 0.6"},{value:.8,label:"Rate: 0.8"},{value:1,label:"Rate: 1"},{value:1.25,label:"Rate: 1.25"},{value:1.5,label:"Rate: 1.5"}],Hn={"..":".",". .":".","?.":"?","? .":"?","!.":"!","! .":"!",",,":",",", ,":","},qn={" Dot":"."," dot":"."," exclamation mark":"!"," question mark":"?"," comma":","," colon":":"," semi-colon":";","Yes ":"Yes, ","No ":"No, "},Yn={" Punkt":"."," Ausrufezeichen":"!"," Fragezeichen":"?"," Komma":","," Doppelpunkt":":"," Semikolon":";","Ja ":"Ja, ","Nein ":"Nein, "," weil":", weil"," aber":", aber"," als":", als"," ob":", ob"," damit":", damit"," bevor":", bevor"," obwohl":", obwohl"," dass":", dass"," dann":", dann"," deshalb":", deshalb"," desvegen":", desvegen"," trotzdem":", trotzdem"},Qn={...qn,...Yn,...Hn};var Ke=new Map,Ee=new WeakMap,mt=0,Xn=void 0;function Zn(e){return e?(Ee.has(e)||(mt+=1,Ee.set(e,mt.toString())),Ee.get(e)):"0"}function Jn(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?Zn(e.root):e[n]}`).toString()}function er(e){const n=Jn(e);let t=Ke.get(n);if(!t){const u=new Map;let o;const l=new IntersectionObserver(r=>{r.forEach(s=>{var d;const k=s.isIntersecting&&o.some(y=>s.intersectionRatio>=y);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=k),(d=u.get(s.target))==null||d.forEach(y=>{y(k,s)})})},e);o=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:n,observer:l,elements:u},Ke.set(n,t)}return t}function tr(e,n,t={},u=Xn){if(typeof window.IntersectionObserver>"u"&&u!==void 0){const d=e.getBoundingClientRect();return n(u,{isIntersecting:u,target:e,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:o,observer:l,elements:r}=er(t),s=r.get(e)||[];return r.has(e)||r.set(e,s),s.push(n),l.observe(e),function(){s.splice(s.indexOf(n),1),s.length===0&&(r.delete(e),l.unobserve(e)),r.size===0&&(l.disconnect(),Ke.delete(o))}}function nr({threshold:e,delay:n,trackVisibility:t,rootMargin:u,root:o,triggerOnce:l,skip:r,initialInView:s,fallbackInView:d,onChange:k}={}){var y;const[g,$]=D.useState(null),p=D.useRef(k),[T,E]=D.useState({inView:!!s,entry:void 0});p.current=k,D.useEffect(()=>{if(r||!g)return;let v;return v=tr(g,(i,h)=>{E({inView:i,entry:h}),p.current&&p.current(i,h),h.isIntersecting&&l&&v&&(v(),v=void 0)},{root:o,rootMargin:u,threshold:e,trackVisibility:t,delay:n},d),()=>{v&&v()}},[Array.isArray(e)?e.toString():e,g,o,u,l,r,t,d,n]);const f=(y=T.entry)==null?void 0:y.target,b=D.useRef(void 0);!g&&f&&!l&&!r&&b.current!==f&&(b.current=f,E({inView:!!s,entry:void 0}));const m=[$,T.inView,T.entry];return m.ref=m[0],m.inView=m[1],m.entry=m[2],m}const{backgroundHoverd:xe,white:_e,borderLight:Le}=K.colors,jt=()=>{const e=oe(),{user:n}=ue(),{activeCluster:t}=ie(),u=({value:s})=>{e(Ge({_id:t._id,lang:s})).unwrap().then(d=>e(dt(d.result.cluster)))},o=({value:s})=>{e(Ge({_id:t._id,rate:s})).unwrap().then(d=>e(dt(d.result.cluster)))},l=({value:s})=>{const d=new FormData;d.append("lang",s),e(gt(d))},r=({value:s})=>{const d=new FormData;d.append("rate",s),e(gt(d))};return S.jsxs(qe,{$m:"0",$cg:"8px",$ai:"center",$gtc:"2fr 2fr 2fr 2fr",children:[S.jsx(ke,{options:Ae,defaultValue:Ae.find(s=>s.value===(t==null?void 0:t.lang)),onChange:u,placeholder:"Language...",$ol:xe,$b:_e,$bh:Le}),S.jsx(ke,{options:Ce,defaultValue:Ce.find(s=>s.value==(t==null?void 0:t.rate)),onChange:o,placeholder:"Rate...",$ol:xe,$b:_e,$bh:Le}),S.jsx(ke,{options:Ae,defaultValue:Ae.find(s=>s.value===n.lang),onChange:l,placeholder:"Language...",$ol:xe,$b:_e,$bh:Le}),S.jsx(ke,{options:Ce,defaultValue:Ce.find(s=>s.value==n.rate),onChange:r,placeholder:"Rate...",$ol:xe,$b:_e,$bh:Le})]})};jt.propTypes={filtredElements:N.array,setLiColor:N.func};const{button:rr}=K.shadows,ir=()=>{const e=oe(),{user:n}=ue(),{activeCluster:t}=ie();D.useEffect(()=>{const o=async l=>{l.key==="e"&&l.metaKey&&!l.altKey&&!l.shiftKey&&(l.preventDefault(),await u())};return addEventListener("keydown",o),()=>{removeEventListener("keydown",o)}},[]);const u=async o=>{const l=window.getSelection().toString();l&&await Lt(l);const r=await _t();let s=Ue(r,t.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();s=Me(s,",");const d={from:t.lang,to:n.lang};let k=await we(s,d,n.engine);k=Me(k.trim(),",");const{_id:y}=t;try{const g={cluster:y,element:"[]",caption:s},$={cluster:y,element:s,caption:k,favorite:!0,checked:s.split(/\s+/).length<20},p=s.includes("https://")?g:$;e(kt(p)).unwrap().then(()=>(o==null?void 0:o.target)&&At()).finally(()=>{var T;return(T=o==null?void 0:o.target)==null?void 0:T.blur()})}catch(g){o==null||o.currentTarget.blur(),ee.error(`Invalid element, ${g.message}`)}};return S.jsx(pe,{onClick:u,$s:"m",$round:!0,$bs:rr,children:S.jsx(hn,{size:18})})},{button:sr}=K.shadows,or=()=>{const e=oe(),{elementTrash:n}=fe(),t=()=>{confirm("Are you sure you want to delete the selected Element(s)?")&&e(dn(n.map(u=>u._id).join("&"))).unwrap().then(()=>e(gn()))};return S.jsx(pe,{onClick:t,$s:"m",$round:!0,$bs:sr,children:S.jsx(In,{size:16})})};function ar(e){return mn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M250.73,210.63l-56-112a12,12,0,0,0-21.46,0l-20.52,41A84.2,84.2,0,0,1,114,126.22,107.48,107.48,0,0,0,139.33,68H160a12,12,0,0,0,0-24H108V32a12,12,0,0,0-24,0V44H32a12,12,0,0,0,0,24h83.13A83.69,83.69,0,0,1,96,110.35,84,84,0,0,1,83.6,91a12,12,0,1,0-21.81,10A107.55,107.55,0,0,0,78,126.24,83.54,83.54,0,0,1,32,140a12,12,0,0,0,0,24,107.47,107.47,0,0,0,64-21.07,108.4,108.4,0,0,0,45.39,19.44l-24.13,48.26a12,12,0,1,0,21.46,10.73L151.41,196h65.17l12.68,25.36a12,12,0,1,0,21.47-10.73ZM163.41,172,184,130.83,204.58,172Z"},child:[]}]})(e)}const{button:cr}=K.shadows,lr=()=>{const{activeCluster:e}=ie();D.useEffect(()=>{const l=async r=>{r.metaKey&&r.key==="d"&&!r.altKey&&!r.shiftKey&&(r.preventDefault(),await o())};return addEventListener("keydown",l),()=>{removeEventListener("keydown",l)}},[]);let n=[];function t(l){l.forEach(r=>{const s=window.open(r,"_blank");s?n.push(s):ee.error(`Failed to open tab: ${r}`)})}const u=()=>{n.forEach(l=>{l.close()}),n=[]},o=async()=>{const l=window.getSelection().toString();l&&await Lt(l);const r=await _t();let s=[];e.lang.includes("de")&&s.push(`https://www.verbformen.com/conjugation/?w=${r}`),e.lang.includes("en")&&s.push(`https://dictionary.cambridge.org/dictionary/english-russian/${r}`),u(),t(s)};return S.jsx(pe,{onClick:o,$s:"m",$round:!0,$bs:cr,children:S.jsx(ar,{size:18})})},{s:vt,m:ur}=K.indents,Pt=({className:e})=>{const{pathname:n}=vn(),{elementTrash:t}=fe(),{activeCluster:u}=ie(),o=t.length>0?" 1fr":"",l=u?" 1fr":"",r=o+l+" 1fr";if(n.includes("/element"))return S.jsxs(qe,{className:e,$m:`${vt} ${ur}`,$pos:"fixed",$side:"left",$high:"bottom",$gtc:r,$cg:vt,children:[S.jsx(lr,{}),l&&S.jsx(ir,{}),o&&S.jsx(or,{})]})};Pt.propTypes={className:N.string};var pr={exports:{}};(function(e){var n=function(t){var u=Object.prototype,o=u.hasOwnProperty,l=Object.defineProperty||function(a,c,w){a[c]=w.value},r,s=typeof Symbol=="function"?Symbol:{},d=s.iterator||"@@iterator",k=s.asyncIterator||"@@asyncIterator",y=s.toStringTag||"@@toStringTag";function g(a,c,w){return Object.defineProperty(a,c,{value:w,enumerable:!0,configurable:!0,writable:!0}),a[c]}try{g({},"")}catch{g=function(c,w,L){return c[w]=L}}function $(a,c,w,L){var x=c&&c.prototype instanceof v?c:v,O=Object.create(x.prototype),H=new z(L||[]);return l(O,"_invoke",{value:R(a,w,H)}),O}t.wrap=$;function p(a,c,w){try{return{type:"normal",arg:a.call(c,w)}}catch(L){return{type:"throw",arg:L}}}var T="suspendedStart",E="suspendedYield",f="executing",b="completed",m={};function v(){}function i(){}function h(){}var _={};g(_,d,function(){return this});var j=Object.getPrototypeOf,I=j&&j(j(M([])));I&&I!==u&&o.call(I,d)&&(_=I);var F=h.prototype=v.prototype=Object.create(_);i.prototype=h,l(F,"constructor",{value:h,configurable:!0}),l(h,"constructor",{value:i,configurable:!0}),i.displayName=g(h,y,"GeneratorFunction");function B(a){["next","throw","return"].forEach(function(c){g(a,c,function(w){return this._invoke(c,w)})})}t.isGeneratorFunction=function(a){var c=typeof a=="function"&&a.constructor;return c?c===i||(c.displayName||c.name)==="GeneratorFunction":!1},t.mark=function(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,h):(a.__proto__=h,g(a,y,"GeneratorFunction")),a.prototype=Object.create(F),a},t.awrap=function(a){return{__await:a}};function J(a,c){function w(O,H,q,Q){var U=p(a[O],a,H);if(U.type==="throw")Q(U.arg);else{var ge=U.arg,ae=ge.value;return ae&&typeof ae=="object"&&o.call(ae,"__await")?c.resolve(ae.__await).then(function(re){w("next",re,q,Q)},function(re){w("throw",re,q,Q)}):c.resolve(ae).then(function(re){ge.value=re,q(ge)},function(re){return w("throw",re,q,Q)})}}var L;function x(O,H){function q(){return new c(function(Q,U){w(O,H,Q,U)})}return L=L?L.then(q,q):q()}l(this,"_invoke",{value:x})}B(J.prototype),g(J.prototype,k,function(){return this}),t.AsyncIterator=J,t.async=function(a,c,w,L,x){x===void 0&&(x=Promise);var O=new J($(a,c,w,L),x);return t.isGeneratorFunction(c)?O:O.next().then(function(H){return H.done?H.value:O.next()})};function R(a,c,w){var L=T;return function(O,H){if(L===f)throw new Error("Generator is already running");if(L===b){if(O==="throw")throw H;return G()}for(w.method=O,w.arg=H;;){var q=w.delegate;if(q){var Q=A(q,w);if(Q){if(Q===m)continue;return Q}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(L===T)throw L=b,w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);L=f;var U=p(a,c,w);if(U.type==="normal"){if(L=w.done?b:E,U.arg===m)continue;return{value:U.arg,done:w.done}}else U.type==="throw"&&(L=b,w.method="throw",w.arg=U.arg)}}}function A(a,c){var w=c.method,L=a.iterator[w];if(L===r)return c.delegate=null,w==="throw"&&a.iterator.return&&(c.method="return",c.arg=r,A(a,c),c.method==="throw")||w!=="return"&&(c.method="throw",c.arg=new TypeError("The iterator does not provide a '"+w+"' method")),m;var x=p(L,a.iterator,c.arg);if(x.type==="throw")return c.method="throw",c.arg=x.arg,c.delegate=null,m;var O=x.arg;if(!O)return c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,m;if(O.done)c[a.resultName]=O.value,c.next=a.nextLoc,c.method!=="return"&&(c.method="next",c.arg=r);else return O;return c.delegate=null,m}B(F),g(F,y,"Generator"),g(F,d,function(){return this}),g(F,"toString",function(){return"[object Generator]"});function C(a){var c={tryLoc:a[0]};1 in a&&(c.catchLoc=a[1]),2 in a&&(c.finallyLoc=a[2],c.afterLoc=a[3]),this.tryEntries.push(c)}function P(a){var c=a.completion||{};c.type="normal",delete c.arg,a.completion=c}function z(a){this.tryEntries=[{tryLoc:"root"}],a.forEach(C,this),this.reset(!0)}t.keys=function(a){var c=Object(a),w=[];for(var L in c)w.push(L);return w.reverse(),function x(){for(;w.length;){var O=w.pop();if(O in c)return x.value=O,x.done=!1,x}return x.done=!0,x}};function M(a){if(a!=null){var c=a[d];if(c)return c.call(a);if(typeof a.next=="function")return a;if(!isNaN(a.length)){var w=-1,L=function x(){for(;++w<a.length;)if(o.call(a,w))return x.value=a[w],x.done=!1,x;return x.value=r,x.done=!0,x};return L.next=L}}throw new TypeError(typeof a+" is not iterable")}t.values=M;function G(){return{value:r,done:!0}}return z.prototype={constructor:z,reset:function(a){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!a)for(var c in this)c.charAt(0)==="t"&&o.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=r)},stop:function(){this.done=!0;var a=this.tryEntries[0],c=a.completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(a){if(this.done)throw a;var c=this;function w(Q,U){return O.type="throw",O.arg=a,c.next=Q,U&&(c.method="next",c.arg=r),!!U}for(var L=this.tryEntries.length-1;L>=0;--L){var x=this.tryEntries[L],O=x.completion;if(x.tryLoc==="root")return w("end");if(x.tryLoc<=this.prev){var H=o.call(x,"catchLoc"),q=o.call(x,"finallyLoc");if(H&&q){if(this.prev<x.catchLoc)return w(x.catchLoc,!0);if(this.prev<x.finallyLoc)return w(x.finallyLoc)}else if(H){if(this.prev<x.catchLoc)return w(x.catchLoc,!0)}else if(q){if(this.prev<x.finallyLoc)return w(x.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(a,c){for(var w=this.tryEntries.length-1;w>=0;--w){var L=this.tryEntries[w];if(L.tryLoc<=this.prev&&o.call(L,"finallyLoc")&&this.prev<L.finallyLoc){var x=L;break}}x&&(a==="break"||a==="continue")&&x.tryLoc<=c&&c<=x.finallyLoc&&(x=null);var O=x?x.completion:{};return O.type=a,O.arg=c,x?(this.method="next",this.next=x.finallyLoc,m):this.complete(O)},complete:function(a,c){if(a.type==="throw")throw a.arg;return a.type==="break"||a.type==="continue"?this.next=a.arg:a.type==="return"?(this.rval=this.arg=a.arg,this.method="return",this.next="end"):a.type==="normal"&&c&&(this.next=c),m},finish:function(a){for(var c=this.tryEntries.length-1;c>=0;--c){var w=this.tryEntries[c];if(w.finallyLoc===a)return this.complete(w.completion,w.afterLoc),P(w),m}},catch:function(a){for(var c=this.tryEntries.length-1;c>=0;--c){var w=this.tryEntries[c];if(w.tryLoc===a){var L=w.completion;if(L.type==="throw"){var x=L.arg;P(w)}return x}}throw new Error("illegal catch attempt")},delegateYield:function(a,c,w){return this.delegate={iterator:M(a),resultName:c,nextLoc:w},this.method==="next"&&(this.arg=r),m}},t}(e.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(pr);var ye={},Mt={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.browserSupportsPolyfills=X.compareTwoStringsUsingDiceCoefficient=X.commandToRegExp=X.concatTranscripts=X.debounce=void 0;var fr=function(n,t,u){var o;return function(){var l=this,r=arguments,s=function(){o=null,u||n.apply(l,r)},d=u&&!o;clearTimeout(o),o=setTimeout(s,t),d&&n.apply(l,r)}};X.debounce=fr;var hr=function(){for(var n=arguments.length,t=new Array(n),u=0;u<n;u++)t[u]=arguments[u];return t.map(function(o){return o.trim()}).join(" ").trim()};X.concatTranscripts=hr;var dr=/\s*\((.*?)\)\s*/g,gr=/(\(\?:[^)]+\))\?/g,mr=/(\(\?)?:\w+/g,vr=/\*/g,br=/[-{}[\]+?.,\\^$|#]/g,yr=function(n){return n instanceof RegExp?new RegExp(n.source,"i"):(n=n.replace(br,"\\$&").replace(dr,"(?:$1)?").replace(mr,function(t,u){return u?t:"([^\\s]+)"}).replace(vr,"(.*?)").replace(gr,"\\s*$1?\\s*"),new RegExp("^"+n+"$","i"))};X.commandToRegExp=yr;var wr=function(n,t){if(n=n.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!n.length&&!t.length)return 1;if(!n.length||!t.length)return 0;if(n===t)return 1;if(n.length===1&&t.length===1||n.length<2||t.length<2)return 0;for(var u=new Map,o=0;o<n.length-1;o++){var l=n.substring(o,o+2),r=u.has(l)?u.get(l)+1:1;u.set(l,r)}for(var s=0,d=0;d<t.length-1;d++){var k=t.substring(d,d+2),y=u.has(k)?u.get(k):0;y>0&&(u.set(k,y-1),s++)}return 2*s/(n.length+t.length-2)};X.compareTwoStringsUsingDiceCoefficient=wr;var $r=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};X.browserSupportsPolyfills=$r;var he={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.APPEND_TRANSCRIPT=le.CLEAR_TRANSCRIPT=void 0;var Sr="CLEAR_TRANSCRIPT";le.CLEAR_TRANSCRIPT=Sr;var Tr="APPEND_TRANSCRIPT";le.APPEND_TRANSCRIPT=Tr;Object.defineProperty(he,"__esModule",{value:!0});he.appendTranscript=he.clearTranscript=void 0;var Ot=le,Rr=function(){return{type:Ot.CLEAR_TRANSCRIPT}};he.clearTranscript=Rr;var kr=function(n,t){return{type:Ot.APPEND_TRANSCRIPT,payload:{interimTranscript:n,finalTranscript:t}}};he.appendTranscript=kr;var De={};Object.defineProperty(De,"__esModule",{value:!0});De.transcriptReducer=void 0;var bt=le,Ar=X,Cr=function(n,t){switch(t.type){case bt.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case bt.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,Ar.concatTranscripts)(n.finalTranscript,t.payload.finalTranscript)};default:throw new Error}};De.transcriptReducer=Cr;var Dt={},Ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=n})(Ye);var Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var n=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),t=function(l){return l===n};e.isNative=t;var u=n;e.default=u})(Qe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(Ye),t=X,u=Qe;function o(g){return g&&g.__esModule?g:{default:g}}function l(g,$,p,T,E,f,b){try{var m=g[f](b),v=m.value}catch(i){p(i);return}m.done?$(v):Promise.resolve(v).then(T,E)}function r(g){return function(){var $=this,p=arguments;return new Promise(function(T,E){var f=g.apply($,p);function b(v){l(f,T,E,b,m,"next",v)}function m(v){l(f,T,E,b,m,"throw",v)}b(void 0)})}}function s(g,$){if(!(g instanceof $))throw new TypeError("Cannot call a class as a function")}function d(g,$){for(var p=0;p<$.length;p++){var T=$[p];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(g,T.key,T)}}function k(g,$,p){return $&&d(g.prototype,$),p&&d(g,p),g}var y=function(){function g($){s(this,g),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition($),(0,n.default)()&&(this.updateFinalTranscript=(0,t.debounce)(this.updateFinalTranscript,250,!0))}return k(g,[{key:"setSpeechRecognition",value:function(p){var T=!!p&&((0,u.isNative)(p)||(0,t.browserSupportsPolyfills)());T&&(this.disableRecognition(),this.recognition=new p,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(T)}},{key:"subscribe",value:function(p,T){this.subscribers[p]=T}},{key:"unsubscribe",value:function(p){delete this.subscribers[p]}},{key:"emitListeningChange",value:function(p){var T=this;this.listening=p,Object.keys(this.subscribers).forEach(function(E){var f=T.subscribers[E].onListeningChange;f(p)})}},{key:"emitMicrophoneAvailabilityChange",value:function(p){var T=this;this.isMicrophoneAvailable=p,Object.keys(this.subscribers).forEach(function(E){var f=T.subscribers[E].onMicrophoneAvailabilityChange;f(p)})}},{key:"emitTranscriptChange",value:function(p,T){var E=this;Object.keys(this.subscribers).forEach(function(f){var b=E.subscribers[f].onTranscriptChange;b(p,T)})}},{key:"emitClearTranscript",value:function(){var p=this;Object.keys(this.subscribers).forEach(function(T){var E=p.subscribers[T].onClearTranscript;E()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(p){var T=this;Object.keys(this.subscribers).forEach(function(E){var f=T.subscribers[E],b=f.onBrowserSupportsSpeechRecognitionChange,m=f.onBrowserSupportsContinuousListeningChange;b(p),m(p)})}},{key:"disconnect",value:function(p){if(this.recognition&&this.listening)switch(p){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(p){p&&p.error&&p.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(p){var T=p.results,E=p.resultIndex,f=E===void 0?T.length-1:E;this.interimTranscript="",this.finalTranscript="";for(var b=f;b<T.length;++b)T[b].isFinal&&(!(0,n.default)()||T[b][0].confidence>0)?this.updateFinalTranscript(T[b][0].transcript):this.interimTranscript=(0,t.concatTranscripts)(this.interimTranscript,T[b][0].transcript);var m=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(m=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,m||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(p){this.finalTranscript=(0,t.concatTranscripts)(this.finalTranscript,p)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var $=r(regeneratorRuntime.mark(function T(){var E,f,b,m,v,i,h=arguments;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(E=h.length>0&&h[0]!==void 0?h[0]:{},f=E.continuous,b=f===void 0?!1:f,m=E.language,this.recognition){j.next=3;break}return j.abrupt("return");case 3:if(v=b!==this.recognition.continuous,i=m&&m!==this.recognition.lang,!(v||i)){j.next=11;break}if(!this.listening){j.next=9;break}return j.next=9,this.stopListening();case 9:this.recognition.continuous=v?b:this.recognition.continuous,this.recognition.lang=i?m:this.recognition.lang;case 11:if(this.listening){j.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),j.prev=13,j.next=16,this.start();case 16:this.emitListeningChange(!0),j.next=22;break;case 19:j.prev=19,j.t0=j.catch(13),j.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return j.stop()}},T,this,[[13,19]])}));function p(){return $.apply(this,arguments)}return p}()},{key:"abortListening",value:function(){var $=r(regeneratorRuntime.mark(function T(){var E=this;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),b.next=4,new Promise(function(m){E.onStopListening=m});case 4:case"end":return b.stop()}},T,this)}));function p(){return $.apply(this,arguments)}return p}()},{key:"stopListening",value:function(){var $=r(regeneratorRuntime.mark(function T(){var E=this;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),b.next=4,new Promise(function(m){E.onStopListening=m});case 4:case"end":return b.stop()}},T,this)}));function p(){return $.apply(this,arguments)}return p}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var $=r(regeneratorRuntime.mark(function T(){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.recognition&&!this.listening)){f.next=4;break}return f.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return f.stop()}},T,this)}));function p(){return $.apply(this,arguments)}return p}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),g}();e.default=y})(Dt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var n=D,t=X,u=he,o=De,l=d(Dt),r=d(Ye),s=d(Qe);function d(R){return R&&R.__esModule?R:{default:R}}function k(R,A,C,P,z,M,G){try{var a=R[M](G),c=a.value}catch(w){C(w);return}a.done?A(c):Promise.resolve(c).then(P,z)}function y(R){return function(){var A=this,C=arguments;return new Promise(function(P,z){var M=R.apply(A,C);function G(c){k(M,P,z,G,a,"next",c)}function a(c){k(M,P,z,G,a,"throw",c)}G(void 0)})}}function g(R){return T(R)||p(R)||m(R)||$()}function $(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(R){if(typeof Symbol<"u"&&Symbol.iterator in Object(R))return Array.from(R)}function T(R){if(Array.isArray(R))return v(R)}function E(R){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(C){return typeof C}:E=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},E(R)}function f(R,A){return h(R)||i(R,A)||m(R,A)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m(R,A){if(R){if(typeof R=="string")return v(R,A);var C=Object.prototype.toString.call(R).slice(8,-1);if(C==="Object"&&R.constructor&&(C=R.constructor.name),C==="Map"||C==="Set")return Array.from(R);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return v(R,A)}}function v(R,A){(A==null||A>R.length)&&(A=R.length);for(var C=0,P=new Array(A);C<A;C++)P[C]=R[C];return P}function i(R,A){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(R)))){var C=[],P=!0,z=!1,M=void 0;try{for(var G=R[Symbol.iterator](),a;!(P=(a=G.next()).done)&&(C.push(a.value),!(A&&C.length===A));P=!0);}catch(c){z=!0,M=c}finally{try{!P&&G.return!=null&&G.return()}finally{if(z)throw M}}return C}}function h(R){if(Array.isArray(R))return R}var _=!!s.default,j=_&&!(0,r.default)(),I,F=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=A.transcribing,P=C===void 0?!0:C,z=A.clearTranscriptOnListen,M=z===void 0?!0:z,G=A.commands,a=G===void 0?[]:G,c=(0,n.useState)(B.getRecognitionManager()),w=f(c,1),L=w[0],x=(0,n.useState)(_),O=f(x,2),H=O[0],q=O[1],Q=(0,n.useState)(j),U=f(Q,2),ge=U[0],ae=U[1],re=(0,n.useReducer)(o.transcriptReducer,{interimTranscript:L.interimTranscript,finalTranscript:""}),Ze=f(re,2),Je=Ze[0],et=Je.interimTranscript,tt=Je.finalTranscript,nt=Ze[1],Ht=(0,n.useState)(L.listening),rt=f(Ht,2),qt=rt[0],Yt=rt[1],Qt=(0,n.useState)(L.isMicrophoneAvailable),it=f(Qt,2),Xt=it[0],Zt=it[1],st=(0,n.useRef)(a);st.current=a;var ot=function(){nt((0,u.clearTranscript)())},me=(0,n.useCallback)(function(){L.resetTranscript(),ot()},[L]),Jt=function(Y,ne,ce){var se=E(Y)==="object"?Y.toString():Y,ve=se.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),Se=(0,t.compareTwoStringsUsingDiceCoefficient)(ve,ne);return Se>=ce?{command:Y,commandWithoutSpecials:ve,howSimilar:Se,isFuzzyMatch:!0}:null},en=function(Y,ne){var ce=(0,t.commandToRegExp)(Y),se=ce.exec(ne);return se?{command:Y,parameters:se.slice(1)}:null},at=(0,n.useCallback)(function(te,Y){st.current.forEach(function(ne){var ce=ne.command,se=ne.callback,ve=ne.matchInterim,Se=ve===void 0?!1:ve,ut=ne.isFuzzyMatch,pt=ut===void 0?!1:ut,ft=ne.fuzzyMatchingThreshold,nn=ft===void 0?.8:ft,ht=ne.bestMatchOnly,rn=ht===void 0?!1:ht,Te=!Y&&Se?te.trim():Y.trim(),sn=Array.isArray(ce)?ce:[ce],Re=sn.map(function(Z){return pt?Jt(Z,Te,nn):en(Z,Te)}).filter(function(Z){return Z});if(pt&&rn&&Re.length>=2){Re.sort(function(Z,ze){return ze.howSimilar-Z.howSimilar});var Ie=Re[0],on=Ie.command,an=Ie.commandWithoutSpecials,cn=Ie.howSimilar;se(an,Te,cn,{command:on,resetTranscript:me})}else Re.forEach(function(Z){if(Z.isFuzzyMatch){var ze=Z.command,ln=Z.commandWithoutSpecials,un=Z.howSimilar;se(ln,Te,un,{command:ze,resetTranscript:me})}else{var pn=Z.command,fn=Z.parameters;se.apply(void 0,g(fn).concat([{command:pn,resetTranscript:me}]))}})})},[me]),ct=(0,n.useCallback)(function(te,Y){P&&nt((0,u.appendTranscript)(te,Y)),at(te,Y)},[at,P]),lt=(0,n.useCallback)(function(){M&&ot()},[M]);(0,n.useEffect)(function(){var te=B.counter;B.counter+=1;var Y={onListeningChange:Yt,onMicrophoneAvailabilityChange:Zt,onTranscriptChange:ct,onClearTranscript:lt,onBrowserSupportsSpeechRecognitionChange:q,onBrowserSupportsContinuousListeningChange:ae};return L.subscribe(te,Y),function(){L.unsubscribe(te)}},[P,M,L,ct,lt]);var tn=(0,t.concatTranscripts)(tt,et);return{transcript:tn,interimTranscript:et,finalTranscript:tt,listening:qt,isMicrophoneAvailable:Xt,resetTranscript:me,browserSupportsSpeechRecognition:H,browserSupportsContinuousListening:ge}};e.useSpeechRecognition=F;var B={counter:0,applyPolyfill:function(A){I?I.setSpeechRecognition(A):I=new l.default(A);var C=!!A&&(0,t.browserSupportsPolyfills)();_=C,j=C},removePolyfill:function(){I?I.setSpeechRecognition(s.default):I=new l.default(s.default),_=!!s.default,j=_&&!(0,r.default)()},getRecognitionManager:function(){return I||(I=new l.default(s.default)),I},getRecognition:function(){var A=B.getRecognitionManager();return A.getRecognition()},startListening:function(){var R=y(regeneratorRuntime.mark(function C(){var P,z,M,G,a=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return P=a.length>0&&a[0]!==void 0?a[0]:{},z=P.continuous,M=P.language,G=B.getRecognitionManager(),w.next=4,G.startListening({continuous:z,language:M});case 4:case"end":return w.stop()}},C)}));function A(){return R.apply(this,arguments)}return A}(),stopListening:function(){var R=y(regeneratorRuntime.mark(function C(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=B.getRecognitionManager(),M.next=3,P.stopListening();case 3:case"end":return M.stop()}},C)}));function A(){return R.apply(this,arguments)}return A}(),abortListening:function(){var R=y(regeneratorRuntime.mark(function C(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=B.getRecognitionManager(),M.next=3,P.abortListening();case 3:case"end":return M.stop()}},C)}));function A(){return R.apply(this,arguments)}return A}(),browserSupportsSpeechRecognition:function(){return _},browserSupportsContinuousListening:function(){return j}},J=B;e.default=J})(Mt);(function(e){function n(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(d){return typeof d}:n=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},n(r)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return t.useSpeechRecognition}}),e.default=void 0;var t=o(Mt);function u(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return u=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(r===null||n(r)!=="object"&&typeof r!="function")return{default:r};var s=u();if(s&&s.has(r))return s.get(r);var d={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in r)if(Object.prototype.hasOwnProperty.call(r,y)){var g=k?Object.getOwnPropertyDescriptor(r,y):null;g&&(g.get||g.set)?Object.defineProperty(d,y,g):d[y]=r[y]}return d.default=r,s&&s.set(r,d),d}var l=t.default;e.default=l})(ye);const be=Ct(ye);var It={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var n={}.hasOwnProperty;function t(){for(var u=[],o=0;o<arguments.length;o++){var l=arguments[o];if(l){var r=typeof l;if(r==="string"||r==="number")u.push(l);else if(Array.isArray(l)){if(l.length){var s=t.apply(null,l);s&&u.push(s)}}else if(r==="object"){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){u.push(l.toString());continue}for(var d in l)n.call(l,d)&&l[d]&&u.push(d)}}}return u.join(" ")}e.exports?(t.default=t,e.exports=t):window.classNames=t})()})(It);var Er=It.exports;const xr=Ct(Er),{colors:V,shadows:yt,indents:Be}=K,_r=de`
  margin-bottom: 7px;
  padding-block: ${Be.xs};

  display: grid;
  align-items: center;
  grid-template-columns: 1fr 25fr 1fr;
  column-gap: 4px;

  border: 1px solid transparent;
  background-color: ${({licolor:e})=>e};
  border-radius: ${Be.xs};
  font-size: 22px;

  &:last-of-type {
    margin-bottom: ${Be.s};
  }
`,Lr=W.li`
  ${_r}

  transition: box-shadow 250ms, border-color 250ms;

  &#active-element {
    border-color: ${V.border};
    background-color: ${V.background};
    box-shadow: ${yt.back};

    &:hover {
      border-color: ${V.accent};
    }
    & div button {
      transition: color 250ms;
      color: ${V.smokeBlack};
      &:hover {
        color: ${V.hovered};
      }
    }
  }

  & div button {
    transition: color 250ms;
    &:hover {
      color: ${V.hovered};
    }
  }

  &:hover {
    border-color: ${V.accent};
    box-shadow: ${yt.back};
  }

  &:hover label,
  &:hover button {
    opacity: 1;
  }
`,zt=de`
  min-height: 19px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & input {
    ${Nn}
  }
`,jr=W.label`
  ${zt}

  & svg {
    transition: stroke 250ms;
    stroke-width: 2px;
    color: ${({$hovered:e})=>e?V.yellow:"transparent"};
    stroke: ${({$hovered:e})=>e?V.yellow:V.border};
  }
  &:hover svg {
    stroke: ${V.placeholder};
  }
`,Pr=W.label`
  ${zt}
  opacity: ${({$hovered:e})=>e?1:0};
  transition: opacity 250ms;

  & svg {
    transition: border-color 250ms, color 250ms;
    padding: 1px;
    border: 2px solid ${V.border};
    border-radius: 50%;
    color: ${({$hovered:e})=>e?V.border:"transparent"};
  }
  &:hover svg {
    border-color: ${V.placeholder};
    color: ${({$hovered:e})=>e?V.placeholder:"transparent"};
  }
`,$e=de`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: transparent;
  border-color: transparent;
  transition: opacity 250ms color 250ms;
  color: ${V.black};

  & svg {
    transition: color 250ms;
    color: ${V.border};
  }
  &:hover,
  &:hover svg {
    color: ${V.placeholder};
  }
`,Mr=W.button`
  ${$e}

  opacity: ${({$hovered:e})=>e?1:0};
`,Or=W.button`
  ${$e}

  opacity: 0;
`,{colors:Oe,indents:Nt}=K,Bt=de`
  padding-block: 4px;
  display: grid;
  align-items: start;
  grid-template-columns: 20fr 1fr 20fr;
`,Dr=W.div`
  ${Bt}
`,Ir=W.form`
  ${Bt}

  max-height: 70vh;
  overflow-y: scroll;
  scrollbar-width: none;
  grid-template-columns: 12fr 1fr 12fr;
`,wt=W.textarea`
  height: 84px;
  outline: none;
  border: 1px solid ${Oe.accent};
  border-radius: ${Nt.xs};
  resize: none;
  overflow: clip;
  transition: height 150ms;
`,zr=W.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &::after {
    content: '';
    height: calc(100% - 8px);
    width: 1px;
    border: 1px solid ${Oe.borderLight};
    transition: border-color 250ms;
  }

  &:hover::after {
    border-color: ${Oe.placeholder};
  }
`,Nr=W.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Br=W.button`
  ${$e}
`,He=W.button`
  ${$e}
`,Wr=W.button`
  ${$e}
`,$t=W.button`
  height: 100%;
  text-align: left;
  display: flex;
  align-items: top;
  background-color: transparent;
  border-color: transparent;
  border-radius: ${Nt.xs};
  color: ${Oe.black};
  transition: background-color 250ms;
`,Fr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Gr=W.iframe`
  ${Fr}
`,Xe=({el:e,setIsForm:n,setRecording:t,setTranslation:u})=>{const o=D.useRef(null),l=D.useRef(null),r=D.useRef(null),s=oe(),{user:d}=ue(),{activeCluster:k}=ie(),[y,g]=D.useState(""),{_id:$,element:p,caption:T}=e,{register:E,watch:f,setValue:b,handleSubmit:m,setFocus:v}=Bn({mode:"onBlur",defaultValues:{element:p,caption:T}});D.useEffect(()=>{b("caption",T)},[T,b]);const{ref:i,...h}=E("element"),{ref:_,...j}=E("caption"),I=[o.current,l.current,r.current],F=[f("caption"),f("element")];Kn(I,F),D.useEffect(()=>{v("element"),y&&p.trim().startsWith("der")?b("element",y+p.replace("der","").trim()+", "):y&&p.trim().startsWith("die")?b("element",y+p.replace("die","").trim()+", "):y&&p.trim().startsWith("das")?b("element",y+p.replace("das","").trim()+", "):y?b("element",y+p+", "):b("element",y+p)},[y,p,v,b]),D.useEffect(()=>{const A=async C=>{C.code==="NumpadAdd"&&(C.preventDefault(),await R(d.engine),m(B)()),(C.key==="Enter"||C.key==="F1")&&(C.preventDefault(),m(B)()),C.key==="Escape"&&(C.preventDefault(),n(!1)),C.code==="AltRight"&&o.current.focus()};return addEventListener("keydown",A),()=>{removeEventListener("keydown",A)}},[]);const B=A=>{const C=d.lang;let P=A.caption.trim(),z=Ue(A.element,k.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();z=Me(z,","),P=Me(P,","),d.lang.includes("en")&&k.lang.includes("de")&&(z.includes("hat")||z.includes("ist"))&&z.split(`
`)[0].split(/,\s+/)[0].endsWith("n")&&(P=P.split(/,\s+/).map(a=>a.startsWith("to ")?a:`to ${a}`).join(", ")),s($?je({_id:$,lang:C,element:z,caption:P}):kt({...e,element:z,caption:P})).then(s(Et())),$||(At(),t(""),u("")),n(!1)},J=()=>{y===""&&g("der "),y==="der "&&g("die "),y==="die "&&g("das "),y==="das "&&g("")},R=async A=>{const C=f("element"),P=Ue(C,k.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim(),z={from:k.lang,to:d.lang},M=await we(P,z,A);b("caption",M)};return S.jsxs(Ir,{onSubmit:m(B),children:[S.jsx(wt,{...h,name:"element",ref:A=>{i(A),o.current=A}}),S.jsxs(Nr,{ref:r,children:[S.jsx(Wr,{type:"button",onClick:J,children:S.jsx(Wn,{size:"18px"})}),S.jsx(He,{type:"button",onClick:()=>R("google"),children:S.jsx(bn,{size:"16px"})}),S.jsx(He,{type:"button",onClick:()=>R("deepl"),children:S.jsx(yn,{size:"18px"})}),S.jsx(Br,{children:S.jsx(wn,{size:"16px"})})]}),S.jsx(wt,{...j,name:"caption",ref:A=>{_(A),l.current=A}})]})};Xe.propTypes={el:N.object,setIsForm:N.func,setRecording:N.func,setTranslation:N.func};const{button:Vr}=K.shadows,{m:Ur,xl:Kr}=K.indents,Wt=({className:e})=>{const{user:n}=ue(),[t,u]=D.useState(!1),{activeCluster:o}=ie(),[l,r]=D.useState(""),[s,d]=D.useState(""),{transcript:k,listening:y,resetTranscript:g}=ye.useSpeechRecognition(),{isMicrophoneAvailable:$}=ye.useSpeechRecognition(),{browserSupportsSpeechRecognition:p}=ye.useSpeechRecognition(),T=l.endsWith(", ")||l.replace(/[a-z]$/,"*#").endsWith("*#")?k.replace(/^./,v=>` ${v}`):k.replace(/^./,v=>v.toUpperCase()),E=`${l}${T}`,f=Fn(E,Qn),b=(v,i)=>v.trim().endsWith(i)?`${v.trim()} `:`${v.trim()}${i} `;if(D.useEffect(()=>{if(!y||!t)return;const v=[".","?","!",","],i=h=>{if(v.includes(h.key)){h.preventDefault();const _=b(f,h.key);r(_),g()}if(h.key==="Backspace"){h.preventDefault();const _=f.length-1,j=f.substring(0,_);r(j),g()}if(h.key==="Space"){h.preventDefault();const _=f+" ";r(_),g()}};return addEventListener("keydown",i),()=>{removeEventListener("keydown",i)}},[t,y,f,g]),D.useEffect(()=>{const v=async i=>{const h=i.key==="F2"||i.key==="r"&&i.metaKey&&!i.altKey&&!i.shiftKey;if(y||h&&(i.preventDefault(),u(!0),be.startListening({language:o.lang,continuous:!0})),y&&h){i.preventDefault(),be.stopListening();const _=f.at(-1),j=!_||["!"].includes(_)?f:b(f,"."),I=await we(j,{from:o.lang,to:n.lang},n.engine);r(j),d(I),g()}};return addEventListener("keydown",v),()=>{removeEventListener("keydown",v)}},[o.lang,t,y,f,g,n.engine,n.lang]),D.useEffect(()=>{const v=async i=>{if(i.key==="Escape"||i.key==="Enter"||i.key==="F1"){i.preventDefault(),be.stopListening(),u(!1),r(""),d(""),g();return}};return addEventListener("keyup",v),()=>{removeEventListener("keyup",v)}},[g]),!p||!$)return;const m=async v=>{if(v==null||v.currentTarget.blur(),!y)u(!0),be.startListening({language:o.lang,continuous:!0});else{be.stopListening();const i=f.at(-1),h=!i||["!"].includes(i)?f:b(f,"."),_={from:o.lang,to:n.lang},j=await we(h,_,n.engine);r(h),d(j),g()}};return S.jsxs("div",{className:xr(e,"speak-btn",!t&&"hidden"),children:[S.jsx(pe,{onClick:m,$s:"m",$round:!0,$bs:Vr,children:y?S.jsx(Sn,{size:18}):S.jsx($n,{size:18})}),t&&S.jsx(Tn,{$x:`left: ${Ur}`,$y:`top: ${Kr}`,$bd:"none",children:S.jsx(Xe,{el:{cluster:o._id,element:f.trim(),caption:s.trim(),favorite:!0,checked:f.split(/\s+/).length<20},setIsForm:u,setRecording:r,setTranslation:d})})]})};Wt.propTypes={className:N.string};const{colors:We}=K,Hr=W.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  &:hover svg {
    stroke: ${We.yellow};
  }

  & svg {
    transition: stroke 250ms;
    stroke: ${We.hovered};
    /* stroke: ${({$colored:e})=>e&&We.yellow}; */
    @keyframes refresh-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
    animation: refresh-spin infinite 12s linear;
  }
`,Ft=({onClick:e})=>S.jsx(Hr,{onClick:e,children:S.jsx(Rn,{size:"35px"})});Ft.propTypes={onClick:N.func};const{background:Fe}=K.colors,{button:St}=K.shadows,{s:Tt,m:qr}=K.indents,Gt=({className:e,filtredElements:n,setLiColor:t})=>{const{user:u}=ue(),{activeCluster:o}=ie(),{activeElement:l}=fe(),[r,s]=D.useState(null);if(D.useEffect(()=>{const f=window.speechSynthesis.getVoices();Array.isArray(f)&&f.length>0&&s(f),"onvoiceschanged"in window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{const b=window.speechSynthesis.getVoices();s(b)})},[]),!Array.isArray(r)||r.length===0)return;const d=f=>{if(!f.length)return;let b="",m=0;const v=f.reduce((i,h)=>(i[h.lang]||(i[h.lang]=0),i[h.lang]+=1,i),{});for(const i in v)v[i]>m&&(m=v[i],b=i);return b},k=n.length?d(n):u.lang,y=(f,b)=>f.replaceAll(", `",`;${b} `).replaceAll(" `",`${b} `).replaceAll(",`",";"),g=({text:f,playList:b,divider:m})=>{let v="";for(let i=0;i<b.length;i+=1){let h=b[i][f];const _=`@±@${b[i].lang}${m}`;h.endsWith(".")||h.endsWith("!")||h.endsWith("?")||h.endsWith('"')?(v+=y(h,m).replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",f!=="caption"?`__${m}`:`__${_}`).replaceAll(".",f!=="caption"?`.${m}`:`.${_}`).replaceAll(",",f!=="caption"?`,${m}`:`,${_}`).replaceAll("!",f!=="caption"?`!${m}`:`!${_}`).replaceAll("?",f!=="caption"?`?${m}`:`?${_}`).replaceAll(":",f!=="caption"?`:${m}`:`:${_}`),o.lang.includes("de")&&(v=v.replaceAll(`0.${m}`,"0.").replaceAll(`1.${m}`,"1.").replaceAll(`2.${m}`,"2.").replaceAll(`3.${m}`,"3.").replaceAll(`4.${m}`,"4.").replaceAll(`5.${m}`,"5.").replaceAll(`6.${m}`,"6.").replaceAll(`7.${m}`,"7.").replaceAll(`8.${m}`,"8.").replaceAll(`9.${m}`,"9."))):b[i].element.startsWith("[")||(f==="caption"&&(h.includes(" [")&&(h=h.substring(0,h.indexOf(" ["))),h=`${h}@±@${b[i].lang}`),v+=h+m)}return v},$=r,p=f=>{f.currentTarget.blur(),t(Fe);const b="$*@",m=n.findIndex(h=>h.element===l.element),v=n.splice(m===-1?0:m),i=Pe({setLiColor:t,divider:b,voices:$,text:g({text:"element",playList:v,divider:b}),lang:o.lang,rate:o.rate});i&&ee.error(i)},T=f=>{f.currentTarget.blur();const b="$*@";t(Fe);const m=n.findIndex(h=>h.element===l.element),v=n.splice(m===-1?0:m),i=Pe({setLiColor:t,divider:b,voices:$,text:g({text:"caption",playList:v,divider:b}),lang:k,rate:u.rate});i&&ee.error(i)},E=f=>{f.currentTarget.blur(),t(Fe);let b="";const m="$*@",v=n.findIndex(_=>_.element===l.element),i=n.splice(v===-1?0:v);for(let _=0;_<i.length;_+=1){const{element:j,caption:I,lang:F}=i[_];if(!j.startsWith("[")){const B=y(j,""),J=I.includes(" [")?I.substring(0,I.indexOf(" [")):y(I,"");b+=B+`@±@${F}`+J+m}}const h=kn({setLiColor:t,divider:m,voices:$,text:b,lang:o.lang,rate:u.rate});h&&ee.error(h)};return S.jsxs(qe,{className:e,$m:`${Tt} ${qr}`,$pos:"fixed",$side:"right",$high:"bottom",$gtc:"1fr 0.5fr 1fr",$cg:Tt,children:[S.jsx(pe,{onClick:p,$s:"m",$round:!0,$bs:St,children:(o==null?void 0:o.lang.at(0).toUpperCase())+(o==null?void 0:o.lang.substring(1))}),S.jsx(Ft,{onClick:E}),S.jsx(pe,{onClick:T,$s:"m",$round:!0,$bs:St,children:(k==null?void 0:k.at(0).toUpperCase())+(k==null?void 0:k.substring(1))})]})};Gt.propTypes={className:N.string,filtredElements:N.array,setLiColor:N.func};const{background:Yr,backgroundHoverd:Qr}=K.colors,Xr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Zr=W.audio`
  ${Xr}

  &::-webkit-media-controls {
    display: flex;
    justify-content: center;
    background-color: ${Yr};
  }

  &::-webkit-media-controls-panel {
    background-color: ${Qr};
  }
`,Vt=({src:e,accessToken:n,expiresIn:t})=>{const u=oe(),o=D.useRef(),[l,r]=D.useState("dump"),s=An({onSuccess:y=>{const{access_token:g,expires_in:$}=y,p={accessToken:g,expiresIn:$*1e3+Date.now()};u(Cn(p)),d(g)},onError:y=>ee(y.message)}),d=async y=>{try{const g=await En.get(e,{responseType:"blob",headers:{Authorization:`Bearer ${y}`}}).then(p=>p.blob),$=URL.createObjectURL(g);r($)}catch(g){ee(g.message)}},k=Date.now()<t;return S.jsx(Zr,{ref:o,src:e.endsWith(".mp3")?e:l,onError:()=>{!k&&s(),k&&d(n)},onPause:y=>y.target.blur(),onEnded:y=>y.target.blur(),controls:!0})};Vt.propTypes={src:N.string,accessToken:N.string,expiresIn:N.number};const Ut=({el:e,sortByDate:n,setSortByDate:t,setLiColor:u})=>{var b,m;const o=oe(),{user:l}=ue(),{activeCluster:r}=ie(),s=xn(e.caption),[d,k]=D.useState(!!s.file.endsWith(".mp3")),y="$*@",g=(v,i)=>{let h="";return i?(v.trim().endsWith(".")||v.trim().endsWith("!")||v.trim().endsWith("?")||v.endsWith('"')?(h=v.trim().replaceAll(", `",`;${i} `).replaceAll(" `",`${i} `).replaceAll(",`",";").replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",`__${i}`).replaceAll(".",`.${i}`).replaceAll(",",`,${i}`).replaceAll("!",`!${i}`).replaceAll("?",`?${i}`).replaceAll(":",`:${i}`),r.lang.includes("de")&&(h=h.replaceAll(`0.${i}`,"0.").replaceAll(`1.${i}`,"1.").replaceAll(`2.${i}`,"2.").replaceAll(`3.${i}`,"3.").replaceAll(`4.${i}`,"4.").replaceAll(`5.${i}`,"5.").replaceAll(`6.${i}`,"6.").replaceAll(`7.${i}`,"7.").replaceAll(`8.${i}`,"8.").replaceAll(`9.${i}`,"9."))):h=v.trim()+i,h.includes("[")?h.substring(0,h.indexOf("["))+i:h):v},$=v=>{v.currentTarget.blur();const i=Pe({setLiColor:u,divider:y,voices:window.speechSynthesis.getVoices(),text:g(e.element,y),lang:r.lang,rate:r.rate});i&&ee.error(i)},p=v=>{v.currentTarget.blur();const i=Pe({setLiColor:u,divider:y,voices:window.speechSynthesis.getVoices(),text:g(e.caption,y),lang:e.lang,rate:l.rate});i&&ee.error(i)},T=v=>{const{_id:i}=r;o(xt(e)),v.currentTarget.closest("li").id!=="active-element"&&o(Ge({_id:i,activeEl:e._id}))},E=v=>{t(!n),n?ee.success("Below is Recent"):ee.success("Above is Recent"),v.stopPropagation()},f=()=>{d?k(!d):E()};return S.jsx(S.Fragment,{children:S.jsxs(Dr,{onClick:T,children:[S.jsx($t,{onClick:$,children:e.element}),S.jsx(zr,{onClick:f}),s.text&&S.jsx($t,{onClick:p,children:s.text}),d&&!s.text&&S.jsx(Gr,{src:s.link}),!d&&!s.text&&S.jsx(Vt,{src:s.file,accessToken:(b=l.googleToken)==null?void 0:b.accessToken,expiresIn:(m=l.googleToken)==null?void 0:m.expiresIn})]})})};Ut.propTypes={el:N.object,sortByDate:N.bool,setSortByDate:N.func,$active:N.bool,$hovered:N.bool,setLiColor:N.func};const Kt=({el:e,index:n,length:t,sortByDate:u,setSortByDate:o,translateAll:l,liColor:r,setLiColor:s})=>{const d=oe(),{elementTrash:k,activeElement:y}=fe(),[g,$]=D.useState(!1),{_id:p,favorite:T,checked:E}=e,f=k.find(_=>_._id===p),b=()=>{d(je({_id:p,favorite:!T}))},m=()=>{d(je({_id:p,checked:!E}))},v=()=>d(Mn(e)),i=()=>$(!g),h=p===(y==null?void 0:y._id);return S.jsxs(Lr,{id:h?"active-element":null,licolor:r,children:[S.jsxs(Ve,{$h:"100%",$p:"0",$fd:"column",children:[S.jsxs(jr,{$hovered:T,children:[S.jsx("input",{type:"checkbox",name:"favorite",checked:T,onChange:b}),S.jsx(zn,{size:"20px"})]}),S.jsxs(Pr,{$hovered:E,children:[S.jsx("input",{type:"checkbox",name:"checked",checked:E,onChange:m}),S.jsx(_n,{size:"15px"})]}),g&&t===n+1&&S.jsx(He,{onClick:l,children:S.jsx(Ln,{size:"16px"})})]}),g&&S.jsx(Xe,{el:e,setIsForm:$}),!g&&S.jsx(Ut,{el:e,sortByDate:u,setSortByDate:o,setLiColor:s}),S.jsxs(Ve,{$h:"100%",$p:"0",$fd:"column",children:[S.jsx(Mr,{$hovered:f,onClick:v,children:S.jsx(jn,{size:"16px"})}),S.jsx(Or,{onClick:i,children:S.jsx(Pn,{size:"15px"})})]})]})};Kt.propTypes={el:N.object,index:N.number,length:N.number,sortByDate:N.bool,setSortByDate:N.func,translateAll:N.func,liColor:N.string,setLiColor:N.func};const Jr=W.ul`
  width: 100%;
  list-style: none;
`,ei=W.div`
  & .speak-btn {
    position: fixed;
    bottom: ${K.indents.s};
    left: calc(45% + 10px);
    /* transform: translateX(calc(-50%)); */
  }

  & .hidden {
    opacity: 0;
    transition: opacity 150ms;
    &:hover {
      opacity: 1;
    }
    & button {
      transition: color 750ms, border-color 750ms, background-color 750ms;
    }
  }
`,{white:ti}=K.colors,ni=()=>{const e=oe(),{ref:n,inView:t,entry:u}=nr({initialInView:!0,rootMargin:"0px 0px -30px 0px"}),{user:o}=ue(),{activeCluster:l}=ie(),{allElements:r,elementTrash:s,elementFilter:d,isLoading:k}=fe(),[y,g]=D.useState(ti);let{elementSelect:$}=fe();$=$||[];const[p,T]=D.useState(!1);D.useEffect(()=>{l&&e(Et({cluster:l._id})).unwrap().then(({result:i})=>{if(!l.activeEl)return;const h=i.elements.find(({_id:_})=>_===l.activeEl);e(xt(h))}).then(()=>{const i=document.getElementById("active-element");i&&On(i)})},[]);const E=r.filter(i=>i.cluster===(l==null?void 0:l._id)).sort((i,h)=>i.createdAt.localeCompare(h.createdAt)),b=(()=>{const i=s.map(h=>h._id);return $.includes("trash")?E.filter(h=>i.includes(h._id)):E})().filter(({element:i,caption:h,favorite:_,checked:j})=>{const I=i.toLowerCase().replace("·","").includes(d)||i.toLowerCase().includes(d)||h.toLowerCase().includes(d),F=$.includes("wordlist")?I&&Gn(i):I,B=()=>$.some(R=>["favorite","unfavorite"].includes(R))?$.includes("favorite")?F&&_===!0:F&&_===!1:F;return(()=>$.some(R=>["checked","unchecked"].includes(R))?$.includes("checked")?B()&&j===!0:B()&&j===!1:B())()}).sort(p?(i,h)=>h.createdAt.localeCompare(i.createdAt):(i,h)=>i.createdAt.localeCompare(h.createdAt)),m=async()=>{const i=o.lang;let h=0;await b.forEach(async _=>{if(h>1)return;const{_id:j,element:I}=_;if(!I.startsWith("[")||i!==_.lang){const F={from:l.lang,to:i},B=await we(I,F,o.engine);e(je({_id:j,lang:i,caption:B})),h=h+1}})},v=window.innerHeight<(u==null?void 0:u.target.getBoundingClientRect().y)+(u==null?void 0:u.target.getBoundingClientRect().height)*1.5;return S.jsxs(S.Fragment,{children:[S.jsxs(Jr,{children:[b.map((i,h,_)=>S.jsx(Kt,{el:i,index:h,length:_.length,sortByDate:p,setSortByDate:T,translateAll:m,liColor:y,setLiColor:g},i._id)),S.jsxs(ei,{ref:n,children:[S.jsx(jt,{}),S.jsx(Wt,{className:!t||!v?"shown":"hidden"}),S.jsx(Pt,{className:!t||!v?"shown":"hidden"}),S.jsx(Gt,{className:!t||!v?"shown":"hidden",filtredElements:b,setLiColor:g})]})]}),k&&S.jsx(Dn,{})]})},{s:Rt,m:ri}=K.indents,li=()=>S.jsx(Ve,{$p:`0 ${ri} ${Rt} ${Rt}`,children:S.jsx(ni,{})});export{li as default};
