import{U as Ie,r as z,t as q,P as I,u as le,b as ue,w as ie,j as y,T as qe,V as Ae,y as Ge,G as dt,H as gt,x as pe,S as hn,W as kt,X as At,Q as ne,A as fe,Y as dn,Z as gn,_ as mn,$ as vn,k as Ct,n as $e,s as W,a0 as bn,a1 as yn,a2 as wn,a3 as Pe,a4 as Et,a5 as $n,a6 as Sn,M as Tn,a7 as Rn,a8 as Me,a9 as kn,aa as An,ab as Cn,ac as xt,ad as En,ae as xn,F as Ve,E as _n,af as Ln,D as jn,C as Pn,ag as Mn,N as On,ah as Dn}from"./index-466c1be1.js";import{r as _t,H as zn,T as Nn}from"./index-4a290aab.js";import{w as Lt}from"./writeClipboard-f875d608.js";import{v as In,u as Bn}from"./index.esm-db2b760c.js";import{a as Wn}from"./index-9eb513ed.js";const Ke=(e,n)=>{if(!n.includes("de"))return e;const t=e.trim().split(`
`);return t.length===1?e:["der","die","das"].includes(t[0].split(" ")[0])?`${t[0].trim()}, ${t[1].split("·")[1].replaceAll("⁰","").replaceAll("/"," / ").trim()}`:(e.includes("hat")||e.includes("ist"))&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e.includes("am")&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e},Fn=(e,n)=>{let t=e;for(const r in n)t=t.replaceAll(r,n[r]);const p=r=>r.replace(/^./,l=>l.toUpperCase()),a=[...t.split(/\s+/)];for(let r=0;r<a.length;r+=1)[".","!","?"].includes(a[r].at(-1))&&a[r+1]&&a.splice(r+1,1,p(a[r+1]));return a.join(" ")},Gn=e=>/[a-z]/.test(e.charAt(0)),{VITE_DEEPL_API_KEY:Vn}={VITE_GOOGLE_CLIENT_ID:"689266183428-lh3lmpaqnd2qd6t93voa8s6ipt3836q1.apps.googleusercontent.com",VITE_DEEPL_API_KEY:"d15bf272-fb1f-4f29-bbc3-d3bbdd686c53:fx",VITE_GOOGLE_API_KEY:"AIzaSyDqQndBxYEuOG7F6iYDqQoiNF90tptRmBQ",VITE_PROD_BACK_URL:"https://studyorganizer.onrender.com",BASE_URL:"/studyorganizer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Kn={google:"",deepl:Vn},we=async(e,{from:n,to:t},p)=>{var u,r;if(!e||e.length===0)return"";const a=e.replaceAll(" ·",",").replaceAll("·","");Ie.engine=p,Ie.key=Kn[p];try{let l=await Ie(`${a}`,{from:n,to:t});if(t.includes("en")&&a.toLowerCase().includes("uhr")&&(l=l.replaceAll("a.m. on","am on").replaceAll("p.m. on","pm on").replaceAll("a.m. to","am to").replaceAll("p.m. to","pm to").replaceAll("a.m.","am.").replaceAll("p.m.","pm.")),[".","!","?"].includes(a.at(-1)))return l;const C=a.split(a.includes(", ")?", ":/\s+/),S=l.split(", "),b=t.includes("de")?S[0]:S[0].at(0).toLowerCase()+S[0].substring(1);return C.length===1?l.toLocaleLowerCase()+", ":["der","die","das"].includes(C[0].split(" ")[0])?l.replace("The ","").replace("the ","").split(", ")[0].toLocaleLowerCase()+", ":t.includes("en")&&((u=C[2])!=null&&u.startsWith("am"))?S[2].startsWith("the")?l:`${b}, ${S[1]}, the ${S[2]}`:(C[0].endsWith("n")&&["hat","ist"].includes((r=C[2])==null?void 0:r.split(" ")[0])&&n.includes("de")&&(l=t.includes("en")?"to "+b+", ":b+", "),l)}catch(l){return l.message}},Oe=(e,n)=>e.endsWith(n)?e.substring(0,e.length-1):e,Un=(e,n)=>{let t=84;e[0]&&(t=Number(e[0].style.height.replace("px",""))),z.useEffect(()=>{if(!e[0])return;let p=Math.max(...e.map(a=>a.scrollHeight));t!==p&&(p=p<=90?p:p+6,e.forEach(a=>{a.style.height=p+"px"}))},[t,e,n])},Ce=[{value:"de",label:"German"},{value:"en",label:"English"},{value:"uk",label:"Ukrainian"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"it",label:"Italian"}],Ee=[{value:.3,label:"Rate: 0.3"},{value:.4,label:"Rate: 0.4"},{value:.5,label:"Rate: 0.5"},{value:.6,label:"Rate: 0.6"},{value:.8,label:"Rate: 0.8"},{value:1,label:"Rate: 1"},{value:1.25,label:"Rate: 1.25"},{value:1.5,label:"Rate: 1.5"}],Hn={"..":".",". .":".","?.":"?","? .":"?","!.":"!","! .":"!",",,":",",", ,":","},qn={" Dot":"."," dot":"."," exclamation mark":"!"," question mark":"?"," comma":","," colon":":"," semi-colon":";","Yes ":"Yes, ","No ":"No, "},Yn={" Punkt":"."," Ausrufezeichen":"!"," Fragezeichen":"?"," Komma":","," Doppelpunkt":":"," Semikolon":";","Ja ":"Ja, ","Nein ":"Nein, "," weil":", weil"," aber":", aber"," als":", als"," ob":", ob"," damit":", damit"," bevor":", bevor"," obwohl":", obwohl"," dass":", dass"," dann":", dann"," deshalb":", deshalb"," desvegen":", desvegen"," trotzdem":", trotzdem"},Qn={...qn,...Yn,...Hn};var Ue=new Map,xe=new WeakMap,mt=0,Xn=void 0;function Zn(e){return e?(xe.has(e)||(mt+=1,xe.set(e,mt.toString())),xe.get(e)):"0"}function Jn(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?Zn(e.root):e[n]}`).toString()}function er(e){const n=Jn(e);let t=Ue.get(n);if(!t){const p=new Map;let a;const u=new IntersectionObserver(r=>{r.forEach(l=>{var v;const C=l.isIntersecting&&a.some(S=>l.intersectionRatio>=S);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=C),(v=p.get(l.target))==null||v.forEach(S=>{S(C,l)})})},e);a=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:n,observer:u,elements:p},Ue.set(n,t)}return t}function tr(e,n,t={},p=Xn){if(typeof window.IntersectionObserver>"u"&&p!==void 0){const v=e.getBoundingClientRect();return n(p,{isIntersecting:p,target:e,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:v,intersectionRect:v,rootBounds:v}),()=>{}}const{id:a,observer:u,elements:r}=er(t),l=r.get(e)||[];return r.has(e)||r.set(e,l),l.push(n),u.observe(e),function(){l.splice(l.indexOf(n),1),l.length===0&&(r.delete(e),u.unobserve(e)),r.size===0&&(u.disconnect(),Ue.delete(a))}}function nr({threshold:e,delay:n,trackVisibility:t,rootMargin:p,root:a,triggerOnce:u,skip:r,initialInView:l,fallbackInView:v,onChange:C}={}){var S;const[b,w]=z.useState(null),h=z.useRef(C),[T,A]=z.useState({inView:!!l,entry:void 0});h.current=C,z.useEffect(()=>{if(r||!b)return;let $;return $=tr(b,(i,s)=>{A({inView:i,entry:s}),h.current&&h.current(i,s),s.isIntersecting&&u&&$&&($(),$=void 0)},{root:a,rootMargin:p,threshold:e,trackVisibility:t,delay:n},v),()=>{$&&$()}},[Array.isArray(e)?e.toString():e,b,a,p,u,r,t,v,n]);const f=(S=T.entry)==null?void 0:S.target,g=z.useRef(void 0);!b&&f&&!u&&!r&&g.current!==f&&(g.current=f,A({inView:!!l,entry:void 0}));const d=[w,T.inView,T.entry];return d.ref=d[0],d.inView=d[1],d.entry=d[2],d}const{backgroundHoverd:_e,white:Le,borderLight:je}=q.colors,jt=()=>{const e=le(),{user:n}=ue(),{activeCluster:t}=ie(),p=({value:l})=>{e(Ge({_id:t._id,lang:l})).unwrap().then(v=>e(dt(v.result.cluster)))},a=({value:l})=>{e(Ge({_id:t._id,rate:l})).unwrap().then(v=>e(dt(v.result.cluster)))},u=({value:l})=>{const v=new FormData;v.append("lang",l),e(gt(v))},r=({value:l})=>{const v=new FormData;v.append("rate",l),e(gt(v))};return y.jsxs(qe,{$m:"0",$cg:"8px",$ai:"center",$gtc:"2fr 2fr 2fr 2fr",children:[y.jsx(Ae,{options:Ce,defaultValue:Ce.find(l=>l.value===(t==null?void 0:t.lang)),onChange:p,placeholder:"Language...",$ol:_e,$b:Le,$bh:je}),y.jsx(Ae,{options:Ee,defaultValue:Ee.find(l=>l.value==(t==null?void 0:t.rate)),onChange:a,placeholder:"Rate...",$ol:_e,$b:Le,$bh:je}),y.jsx(Ae,{options:Ce,defaultValue:Ce.find(l=>l.value===n.lang),onChange:u,placeholder:"Language...",$ol:_e,$b:Le,$bh:je}),y.jsx(Ae,{options:Ee,defaultValue:Ee.find(l=>l.value==n.rate),onChange:r,placeholder:"Rate...",$ol:_e,$b:Le,$bh:je})]})};jt.propTypes={filtredElements:I.array,setLiColor:I.func};const{button:rr}=q.shadows,ir=()=>{const e=le(),{user:n}=ue(),{activeCluster:t}=ie();z.useEffect(()=>{const a=async u=>{u.key==="e"&&u.metaKey&&!u.altKey&&!u.shiftKey&&(u.preventDefault(),await p())};return addEventListener("keydown",a),()=>{removeEventListener("keydown",a)}},[]);const p=async a=>{const u=window.getSelection().toString();u&&await Lt(u);const r=await _t();let l=Ke(r,t.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();l=Oe(l,",");const v={from:t.lang,to:n.lang};let C=await we(l,v,n.engine);C=Oe(C.trim(),",");const{_id:S}=t;try{const b={cluster:S,element:"[]",caption:l},w={cluster:S,element:l,caption:C,favorite:!0,checked:l.split(/\s+/).length<20},h=l.includes("https://")?b:w;e(kt(h)).unwrap().then(()=>(a==null?void 0:a.target)&&At()).finally(()=>{var T;return(T=a==null?void 0:a.target)==null?void 0:T.blur()})}catch(b){a==null||a.currentTarget.blur(),ne.error(`Invalid element, ${b.message}`)}};return y.jsx(pe,{onClick:p,$s:"m",$round:!0,$bs:rr,children:y.jsx(hn,{size:18})})},{button:sr}=q.shadows,ar=()=>{const e=le(),{elementTrash:n}=fe(),t=()=>{confirm("Are you sure you want to delete the selected Element(s)?")&&e(dn(n.map(p=>p._id).join("&"))).unwrap().then(()=>e(gn()))};return y.jsx(pe,{onClick:t,$s:"m",$round:!0,$bs:sr,children:y.jsx(zn,{size:16})})};function or(e){return mn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M250.73,210.63l-56-112a12,12,0,0,0-21.46,0l-20.52,41A84.2,84.2,0,0,1,114,126.22,107.48,107.48,0,0,0,139.33,68H160a12,12,0,0,0,0-24H108V32a12,12,0,0,0-24,0V44H32a12,12,0,0,0,0,24h83.13A83.69,83.69,0,0,1,96,110.35,84,84,0,0,1,83.6,91a12,12,0,1,0-21.81,10A107.55,107.55,0,0,0,78,126.24,83.54,83.54,0,0,1,32,140a12,12,0,0,0,0,24,107.47,107.47,0,0,0,64-21.07,108.4,108.4,0,0,0,45.39,19.44l-24.13,48.26a12,12,0,1,0,21.46,10.73L151.41,196h65.17l12.68,25.36a12,12,0,1,0,21.47-10.73ZM163.41,172,184,130.83,204.58,172Z"},child:[]}]})(e)}const{button:cr}=q.shadows,lr=()=>{const{activeCluster:e}=ie();z.useEffect(()=>{const u=async r=>{r.metaKey&&r.key==="d"&&!r.altKey&&!r.shiftKey&&(r.preventDefault(),await a())};return addEventListener("keydown",u),()=>{removeEventListener("keydown",u)}},[]);let n=[];function t(u){u.forEach(r=>{const l=window.open(r,"_blank");l?n.push(l):ne.error(`Failed to open tab: ${r}`)})}const p=()=>{n.forEach(u=>{u.close()}),n=[]},a=async()=>{const u=window.getSelection().toString();u&&await Lt(u);const r=await _t();let l=[];e.lang.includes("de")&&l.push(`https://www.verbformen.com/conjugation/?w=${r}`),e.lang.includes("en")&&l.push(`https://dictionary.cambridge.org/dictionary/english-russian/${r}`),p(),t(l)};return y.jsx(pe,{onClick:a,$s:"m",$round:!0,$bs:cr,children:y.jsx(or,{size:18})})},{s:vt,m:ur}=q.indents,Pt=({className:e})=>{const{pathname:n}=vn(),{elementTrash:t}=fe(),{activeCluster:p}=ie(),a=t.length>0?" 1fr":"",u=p?" 1fr":"",r=a+u+" 1fr";if(n.includes("/element"))return y.jsxs(qe,{className:e,$m:`${vt} ${ur}`,$pos:"fixed",$side:"left",$high:"bottom",$gtc:r,$cg:vt,children:[y.jsx(lr,{}),u&&y.jsx(ir,{}),a&&y.jsx(ar,{})]})};Pt.propTypes={className:I.string};var pr={exports:{}};(function(e){var n=function(t){var p=Object.prototype,a=p.hasOwnProperty,u=Object.defineProperty||function(o,c,m){o[c]=m.value},r,l=typeof Symbol=="function"?Symbol:{},v=l.iterator||"@@iterator",C=l.asyncIterator||"@@asyncIterator",S=l.toStringTag||"@@toStringTag";function b(o,c,m){return Object.defineProperty(o,c,{value:m,enumerable:!0,configurable:!0,writable:!0}),o[c]}try{b({},"")}catch{b=function(c,m,L){return c[m]=L}}function w(o,c,m,L){var _=c&&c.prototype instanceof $?c:$,O=Object.create(_.prototype),U=new D(L||[]);return u(O,"_invoke",{value:R(o,m,U)}),O}t.wrap=w;function h(o,c,m){try{return{type:"normal",arg:o.call(c,m)}}catch(L){return{type:"throw",arg:L}}}var T="suspendedStart",A="suspendedYield",f="executing",g="completed",d={};function $(){}function i(){}function s(){}var k={};b(k,v,function(){return this});var j=Object.getPrototypeOf,N=j&&j(j(M([])));N&&N!==p&&a.call(N,v)&&(k=N);var F=s.prototype=$.prototype=Object.create(k);i.prototype=s,u(F,"constructor",{value:s,configurable:!0}),u(s,"constructor",{value:i,configurable:!0}),i.displayName=b(s,S,"GeneratorFunction");function B(o){["next","throw","return"].forEach(function(c){b(o,c,function(m){return this._invoke(c,m)})})}t.isGeneratorFunction=function(o){var c=typeof o=="function"&&o.constructor;return c?c===i||(c.displayName||c.name)==="GeneratorFunction":!1},t.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,s):(o.__proto__=s,b(o,S,"GeneratorFunction")),o.prototype=Object.create(F),o},t.awrap=function(o){return{__await:o}};function J(o,c){function m(O,U,H,Q){var K=h(o[O],o,U);if(K.type==="throw")Q(K.arg);else{var ge=K.arg,ae=ge.value;return ae&&typeof ae=="object"&&a.call(ae,"__await")?c.resolve(ae.__await).then(function(re){m("next",re,H,Q)},function(re){m("throw",re,H,Q)}):c.resolve(ae).then(function(re){ge.value=re,H(ge)},function(re){return m("throw",re,H,Q)})}}var L;function _(O,U){function H(){return new c(function(Q,K){m(O,U,Q,K)})}return L=L?L.then(H,H):H()}u(this,"_invoke",{value:_})}B(J.prototype),b(J.prototype,C,function(){return this}),t.AsyncIterator=J,t.async=function(o,c,m,L,_){_===void 0&&(_=Promise);var O=new J(w(o,c,m,L),_);return t.isGeneratorFunction(c)?O:O.next().then(function(U){return U.done?U.value:O.next()})};function R(o,c,m){var L=T;return function(O,U){if(L===f)throw new Error("Generator is already running");if(L===g){if(O==="throw")throw U;return G()}for(m.method=O,m.arg=U;;){var H=m.delegate;if(H){var Q=E(H,m);if(Q){if(Q===d)continue;return Q}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(L===T)throw L=g,m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);L=f;var K=h(o,c,m);if(K.type==="normal"){if(L=m.done?g:A,K.arg===d)continue;return{value:K.arg,done:m.done}}else K.type==="throw"&&(L=g,m.method="throw",m.arg=K.arg)}}}function E(o,c){var m=c.method,L=o.iterator[m];if(L===r)return c.delegate=null,m==="throw"&&o.iterator.return&&(c.method="return",c.arg=r,E(o,c),c.method==="throw")||m!=="return"&&(c.method="throw",c.arg=new TypeError("The iterator does not provide a '"+m+"' method")),d;var _=h(L,o.iterator,c.arg);if(_.type==="throw")return c.method="throw",c.arg=_.arg,c.delegate=null,d;var O=_.arg;if(!O)return c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,d;if(O.done)c[o.resultName]=O.value,c.next=o.nextLoc,c.method!=="return"&&(c.method="next",c.arg=r);else return O;return c.delegate=null,d}B(F),b(F,S,"Generator"),b(F,v,function(){return this}),b(F,"toString",function(){return"[object Generator]"});function x(o){var c={tryLoc:o[0]};1 in o&&(c.catchLoc=o[1]),2 in o&&(c.finallyLoc=o[2],c.afterLoc=o[3]),this.tryEntries.push(c)}function P(o){var c=o.completion||{};c.type="normal",delete c.arg,o.completion=c}function D(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(x,this),this.reset(!0)}t.keys=function(o){var c=Object(o),m=[];for(var L in c)m.push(L);return m.reverse(),function _(){for(;m.length;){var O=m.pop();if(O in c)return _.value=O,_.done=!1,_}return _.done=!0,_}};function M(o){if(o!=null){var c=o[v];if(c)return c.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var m=-1,L=function _(){for(;++m<o.length;)if(a.call(o,m))return _.value=o[m],_.done=!1,_;return _.value=r,_.done=!0,_};return L.next=L}}throw new TypeError(typeof o+" is not iterable")}t.values=M;function G(){return{value:r,done:!0}}return D.prototype={constructor:D,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!o)for(var c in this)c.charAt(0)==="t"&&a.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=r)},stop:function(){this.done=!0;var o=this.tryEntries[0],c=o.completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var c=this;function m(Q,K){return O.type="throw",O.arg=o,c.next=Q,K&&(c.method="next",c.arg=r),!!K}for(var L=this.tryEntries.length-1;L>=0;--L){var _=this.tryEntries[L],O=_.completion;if(_.tryLoc==="root")return m("end");if(_.tryLoc<=this.prev){var U=a.call(_,"catchLoc"),H=a.call(_,"finallyLoc");if(U&&H){if(this.prev<_.catchLoc)return m(_.catchLoc,!0);if(this.prev<_.finallyLoc)return m(_.finallyLoc)}else if(U){if(this.prev<_.catchLoc)return m(_.catchLoc,!0)}else if(H){if(this.prev<_.finallyLoc)return m(_.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(o,c){for(var m=this.tryEntries.length-1;m>=0;--m){var L=this.tryEntries[m];if(L.tryLoc<=this.prev&&a.call(L,"finallyLoc")&&this.prev<L.finallyLoc){var _=L;break}}_&&(o==="break"||o==="continue")&&_.tryLoc<=c&&c<=_.finallyLoc&&(_=null);var O=_?_.completion:{};return O.type=o,O.arg=c,_?(this.method="next",this.next=_.finallyLoc,d):this.complete(O)},complete:function(o,c){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&c&&(this.next=c),d},finish:function(o){for(var c=this.tryEntries.length-1;c>=0;--c){var m=this.tryEntries[c];if(m.finallyLoc===o)return this.complete(m.completion,m.afterLoc),P(m),d}},catch:function(o){for(var c=this.tryEntries.length-1;c>=0;--c){var m=this.tryEntries[c];if(m.tryLoc===o){var L=m.completion;if(L.type==="throw"){var _=L.arg;P(m)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(o,c,m){return this.delegate={iterator:M(o),resultName:c,nextLoc:m},this.method==="next"&&(this.arg=r),d}},t}(e.exports);try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})(pr);var ye={},Mt={},X={};Object.defineProperty(X,"__esModule",{value:!0});X.browserSupportsPolyfills=X.compareTwoStringsUsingDiceCoefficient=X.commandToRegExp=X.concatTranscripts=X.debounce=void 0;var fr=function(n,t,p){var a;return function(){var u=this,r=arguments,l=function(){a=null,p||n.apply(u,r)},v=p&&!a;clearTimeout(a),a=setTimeout(l,t),v&&n.apply(u,r)}};X.debounce=fr;var hr=function(){for(var n=arguments.length,t=new Array(n),p=0;p<n;p++)t[p]=arguments[p];return t.map(function(a){return a.trim()}).join(" ").trim()};X.concatTranscripts=hr;var dr=/\s*\((.*?)\)\s*/g,gr=/(\(\?:[^)]+\))\?/g,mr=/(\(\?)?:\w+/g,vr=/\*/g,br=/[-{}[\]+?.,\\^$|#]/g,yr=function(n){return n instanceof RegExp?new RegExp(n.source,"i"):(n=n.replace(br,"\\$&").replace(dr,"(?:$1)?").replace(mr,function(t,p){return p?t:"([^\\s]+)"}).replace(vr,"(.*?)").replace(gr,"\\s*$1?\\s*"),new RegExp("^"+n+"$","i"))};X.commandToRegExp=yr;var wr=function(n,t){if(n=n.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!n.length&&!t.length)return 1;if(!n.length||!t.length)return 0;if(n===t)return 1;if(n.length===1&&t.length===1||n.length<2||t.length<2)return 0;for(var p=new Map,a=0;a<n.length-1;a++){var u=n.substring(a,a+2),r=p.has(u)?p.get(u)+1:1;p.set(u,r)}for(var l=0,v=0;v<t.length-1;v++){var C=t.substring(v,v+2),S=p.has(C)?p.get(C):0;S>0&&(p.set(C,S-1),l++)}return 2*l/(n.length+t.length-2)};X.compareTwoStringsUsingDiceCoefficient=wr;var $r=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};X.browserSupportsPolyfills=$r;var he={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.APPEND_TRANSCRIPT=ce.CLEAR_TRANSCRIPT=void 0;var Sr="CLEAR_TRANSCRIPT";ce.CLEAR_TRANSCRIPT=Sr;var Tr="APPEND_TRANSCRIPT";ce.APPEND_TRANSCRIPT=Tr;Object.defineProperty(he,"__esModule",{value:!0});he.appendTranscript=he.clearTranscript=void 0;var Ot=ce,Rr=function(){return{type:Ot.CLEAR_TRANSCRIPT}};he.clearTranscript=Rr;var kr=function(n,t){return{type:Ot.APPEND_TRANSCRIPT,payload:{interimTranscript:n,finalTranscript:t}}};he.appendTranscript=kr;var De={};Object.defineProperty(De,"__esModule",{value:!0});De.transcriptReducer=void 0;var bt=ce,Ar=X,Cr=function(n,t){switch(t.type){case bt.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case bt.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,Ar.concatTranscripts)(n.finalTranscript,t.payload.finalTranscript)};default:throw new Error}};De.transcriptReducer=Cr;var Dt={},Ye={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=n})(Ye);var Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var n=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),t=function(u){return u===n};e.isNative=t;var p=n;e.default=p})(Qe);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(Ye),t=X,p=Qe;function a(b){return b&&b.__esModule?b:{default:b}}function u(b,w,h,T,A,f,g){try{var d=b[f](g),$=d.value}catch(i){h(i);return}d.done?w($):Promise.resolve($).then(T,A)}function r(b){return function(){var w=this,h=arguments;return new Promise(function(T,A){var f=b.apply(w,h);function g($){u(f,T,A,g,d,"next",$)}function d($){u(f,T,A,g,d,"throw",$)}g(void 0)})}}function l(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function v(b,w){for(var h=0;h<w.length;h++){var T=w[h];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(b,T.key,T)}}function C(b,w,h){return w&&v(b.prototype,w),h&&v(b,h),b}var S=function(){function b(w){l(this,b),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(w),(0,n.default)()&&(this.updateFinalTranscript=(0,t.debounce)(this.updateFinalTranscript,250,!0))}return C(b,[{key:"setSpeechRecognition",value:function(h){var T=!!h&&((0,p.isNative)(h)||(0,t.browserSupportsPolyfills)());T&&(this.disableRecognition(),this.recognition=new h,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(T)}},{key:"subscribe",value:function(h,T){this.subscribers[h]=T}},{key:"unsubscribe",value:function(h){delete this.subscribers[h]}},{key:"emitListeningChange",value:function(h){var T=this;this.listening=h,Object.keys(this.subscribers).forEach(function(A){var f=T.subscribers[A].onListeningChange;f(h)})}},{key:"emitMicrophoneAvailabilityChange",value:function(h){var T=this;this.isMicrophoneAvailable=h,Object.keys(this.subscribers).forEach(function(A){var f=T.subscribers[A].onMicrophoneAvailabilityChange;f(h)})}},{key:"emitTranscriptChange",value:function(h,T){var A=this;Object.keys(this.subscribers).forEach(function(f){var g=A.subscribers[f].onTranscriptChange;g(h,T)})}},{key:"emitClearTranscript",value:function(){var h=this;Object.keys(this.subscribers).forEach(function(T){var A=h.subscribers[T].onClearTranscript;A()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(h){var T=this;Object.keys(this.subscribers).forEach(function(A){var f=T.subscribers[A],g=f.onBrowserSupportsSpeechRecognitionChange,d=f.onBrowserSupportsContinuousListeningChange;g(h),d(h)})}},{key:"disconnect",value:function(h){if(this.recognition&&this.listening)switch(h){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(h){h&&h.error&&h.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(h){var T=h.results,A=h.resultIndex,f=A===void 0?T.length-1:A;this.interimTranscript="",this.finalTranscript="";for(var g=f;g<T.length;++g)T[g].isFinal&&(!(0,n.default)()||T[g][0].confidence>0)?this.updateFinalTranscript(T[g][0].transcript):this.interimTranscript=(0,t.concatTranscripts)(this.interimTranscript,T[g][0].transcript);var d=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(d=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,d||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(h){this.finalTranscript=(0,t.concatTranscripts)(this.finalTranscript,h)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var w=r(regeneratorRuntime.mark(function T(){var A,f,g,d,$,i,s=arguments;return regeneratorRuntime.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(A=s.length>0&&s[0]!==void 0?s[0]:{},f=A.continuous,g=f===void 0?!1:f,d=A.language,this.recognition){j.next=3;break}return j.abrupt("return");case 3:if($=g!==this.recognition.continuous,i=d&&d!==this.recognition.lang,!($||i)){j.next=11;break}if(!this.listening){j.next=9;break}return j.next=9,this.stopListening();case 9:this.recognition.continuous=$?g:this.recognition.continuous,this.recognition.lang=i?d:this.recognition.lang;case 11:if(this.listening){j.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),j.prev=13,j.next=16,this.start();case 16:this.emitListeningChange(!0),j.next=22;break;case 19:j.prev=19,j.t0=j.catch(13),j.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return j.stop()}},T,this,[[13,19]])}));function h(){return w.apply(this,arguments)}return h}()},{key:"abortListening",value:function(){var w=r(regeneratorRuntime.mark(function T(){var A=this;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),g.next=4,new Promise(function(d){A.onStopListening=d});case 4:case"end":return g.stop()}},T,this)}));function h(){return w.apply(this,arguments)}return h}()},{key:"stopListening",value:function(){var w=r(regeneratorRuntime.mark(function T(){var A=this;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),g.next=4,new Promise(function(d){A.onStopListening=d});case 4:case"end":return g.stop()}},T,this)}));function h(){return w.apply(this,arguments)}return h}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var w=r(regeneratorRuntime.mark(function T(){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.recognition&&!this.listening)){f.next=4;break}return f.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return f.stop()}},T,this)}));function h(){return w.apply(this,arguments)}return h}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),b}();e.default=S})(Dt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var n=z,t=X,p=he,a=De,u=v(Dt),r=v(Ye),l=v(Qe);function v(R){return R&&R.__esModule?R:{default:R}}function C(R,E,x,P,D,M,G){try{var o=R[M](G),c=o.value}catch(m){x(m);return}o.done?E(c):Promise.resolve(c).then(P,D)}function S(R){return function(){var E=this,x=arguments;return new Promise(function(P,D){var M=R.apply(E,x);function G(c){C(M,P,D,G,o,"next",c)}function o(c){C(M,P,D,G,o,"throw",c)}G(void 0)})}}function b(R){return T(R)||h(R)||d(R)||w()}function w(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(R){if(typeof Symbol<"u"&&Symbol.iterator in Object(R))return Array.from(R)}function T(R){if(Array.isArray(R))return $(R)}function A(R){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(x){return typeof x}:A=function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},A(R)}function f(R,E){return s(R)||i(R,E)||d(R,E)||g()}function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function d(R,E){if(R){if(typeof R=="string")return $(R,E);var x=Object.prototype.toString.call(R).slice(8,-1);if(x==="Object"&&R.constructor&&(x=R.constructor.name),x==="Map"||x==="Set")return Array.from(R);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return $(R,E)}}function $(R,E){(E==null||E>R.length)&&(E=R.length);for(var x=0,P=new Array(E);x<E;x++)P[x]=R[x];return P}function i(R,E){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(R)))){var x=[],P=!0,D=!1,M=void 0;try{for(var G=R[Symbol.iterator](),o;!(P=(o=G.next()).done)&&(x.push(o.value),!(E&&x.length===E));P=!0);}catch(c){D=!0,M=c}finally{try{!P&&G.return!=null&&G.return()}finally{if(D)throw M}}return x}}function s(R){if(Array.isArray(R))return R}var k=!!l.default,j=k&&!(0,r.default)(),N,F=function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x=E.transcribing,P=x===void 0?!0:x,D=E.clearTranscriptOnListen,M=D===void 0?!0:D,G=E.commands,o=G===void 0?[]:G,c=(0,n.useState)(B.getRecognitionManager()),m=f(c,1),L=m[0],_=(0,n.useState)(k),O=f(_,2),U=O[0],H=O[1],Q=(0,n.useState)(j),K=f(Q,2),ge=K[0],ae=K[1],re=(0,n.useReducer)(a.transcriptReducer,{interimTranscript:L.interimTranscript,finalTranscript:""}),Ze=f(re,2),Je=Ze[0],et=Je.interimTranscript,tt=Je.finalTranscript,nt=Ze[1],Ht=(0,n.useState)(L.listening),rt=f(Ht,2),qt=rt[0],Yt=rt[1],Qt=(0,n.useState)(L.isMicrophoneAvailable),it=f(Qt,2),Xt=it[0],Zt=it[1],st=(0,n.useRef)(o);st.current=o;var at=function(){nt((0,p.clearTranscript)())},me=(0,n.useCallback)(function(){L.resetTranscript(),at()},[L]),Jt=function(Y,te,oe){var se=A(Y)==="object"?Y.toString():Y,ve=se.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),Te=(0,t.compareTwoStringsUsingDiceCoefficient)(ve,te);return Te>=oe?{command:Y,commandWithoutSpecials:ve,howSimilar:Te,isFuzzyMatch:!0}:null},en=function(Y,te){var oe=(0,t.commandToRegExp)(Y),se=oe.exec(te);return se?{command:Y,parameters:se.slice(1)}:null},ot=(0,n.useCallback)(function(ee,Y){st.current.forEach(function(te){var oe=te.command,se=te.callback,ve=te.matchInterim,Te=ve===void 0?!1:ve,ut=te.isFuzzyMatch,pt=ut===void 0?!1:ut,ft=te.fuzzyMatchingThreshold,nn=ft===void 0?.8:ft,ht=te.bestMatchOnly,rn=ht===void 0?!1:ht,Re=!Y&&Te?ee.trim():Y.trim(),sn=Array.isArray(oe)?oe:[oe],ke=sn.map(function(Z){return pt?Jt(Z,Re,nn):en(Z,Re)}).filter(function(Z){return Z});if(pt&&rn&&ke.length>=2){ke.sort(function(Z,Ne){return Ne.howSimilar-Z.howSimilar});var ze=ke[0],an=ze.command,on=ze.commandWithoutSpecials,cn=ze.howSimilar;se(on,Re,cn,{command:an,resetTranscript:me})}else ke.forEach(function(Z){if(Z.isFuzzyMatch){var Ne=Z.command,ln=Z.commandWithoutSpecials,un=Z.howSimilar;se(ln,Re,un,{command:Ne,resetTranscript:me})}else{var pn=Z.command,fn=Z.parameters;se.apply(void 0,b(fn).concat([{command:pn,resetTranscript:me}]))}})})},[me]),ct=(0,n.useCallback)(function(ee,Y){P&&nt((0,p.appendTranscript)(ee,Y)),ot(ee,Y)},[ot,P]),lt=(0,n.useCallback)(function(){M&&at()},[M]);(0,n.useEffect)(function(){var ee=B.counter;B.counter+=1;var Y={onListeningChange:Yt,onMicrophoneAvailabilityChange:Zt,onTranscriptChange:ct,onClearTranscript:lt,onBrowserSupportsSpeechRecognitionChange:H,onBrowserSupportsContinuousListeningChange:ae};return L.subscribe(ee,Y),function(){L.unsubscribe(ee)}},[P,M,L,ct,lt]);var tn=(0,t.concatTranscripts)(tt,et);return{transcript:tn,interimTranscript:et,finalTranscript:tt,listening:qt,isMicrophoneAvailable:Xt,resetTranscript:me,browserSupportsSpeechRecognition:U,browserSupportsContinuousListening:ge}};e.useSpeechRecognition=F;var B={counter:0,applyPolyfill:function(E){N?N.setSpeechRecognition(E):N=new u.default(E);var x=!!E&&(0,t.browserSupportsPolyfills)();k=x,j=x},removePolyfill:function(){N?N.setSpeechRecognition(l.default):N=new u.default(l.default),k=!!l.default,j=k&&!(0,r.default)()},getRecognitionManager:function(){return N||(N=new u.default(l.default)),N},getRecognition:function(){var E=B.getRecognitionManager();return E.getRecognition()},startListening:function(){var R=S(regeneratorRuntime.mark(function x(){var P,D,M,G,o=arguments;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return P=o.length>0&&o[0]!==void 0?o[0]:{},D=P.continuous,M=P.language,G=B.getRecognitionManager(),m.next=4,G.startListening({continuous:D,language:M});case 4:case"end":return m.stop()}},x)}));function E(){return R.apply(this,arguments)}return E}(),stopListening:function(){var R=S(regeneratorRuntime.mark(function x(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=B.getRecognitionManager(),M.next=3,P.stopListening();case 3:case"end":return M.stop()}},x)}));function E(){return R.apply(this,arguments)}return E}(),abortListening:function(){var R=S(regeneratorRuntime.mark(function x(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=B.getRecognitionManager(),M.next=3,P.abortListening();case 3:case"end":return M.stop()}},x)}));function E(){return R.apply(this,arguments)}return E}(),browserSupportsSpeechRecognition:function(){return k},browserSupportsContinuousListening:function(){return j}},J=B;e.default=J})(Mt);(function(e){function n(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(v){return typeof v}:n=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},n(r)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return t.useSpeechRecognition}}),e.default=void 0;var t=a(Mt);function p(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return p=function(){return r},r}function a(r){if(r&&r.__esModule)return r;if(r===null||n(r)!=="object"&&typeof r!="function")return{default:r};var l=p();if(l&&l.has(r))return l.get(r);var v={},C=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in r)if(Object.prototype.hasOwnProperty.call(r,S)){var b=C?Object.getOwnPropertyDescriptor(r,S):null;b&&(b.get||b.set)?Object.defineProperty(v,S,b):v[S]=r[S]}return v.default=r,l&&l.set(r,v),v}var u=t.default;e.default=u})(ye);const be=Ct(ye);var zt={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var n={}.hasOwnProperty;function t(){for(var p=[],a=0;a<arguments.length;a++){var u=arguments[a];if(u){var r=typeof u;if(r==="string"||r==="number")p.push(u);else if(Array.isArray(u)){if(u.length){var l=t.apply(null,u);l&&p.push(l)}}else if(r==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){p.push(u.toString());continue}for(var v in u)n.call(u,v)&&u[v]&&p.push(v)}}}return p.join(" ")}e.exports?(t.default=t,e.exports=t):window.classNames=t})()})(zt);var Er=zt.exports;const xr=Ct(Er),{colors:V,shadows:yt,indents:Be}=q,_r=$e`
  margin-bottom: 7px;
  padding-block: ${Be.xs};

  display: grid;
  align-items: center;
  grid-template-columns: 1fr 25fr 1fr;
  column-gap: 2px;

  border: 1px solid transparent;
  background-color: ${({licolor:e})=>e};
  border-radius: ${Be.xs};
  font-size: 22px;

  &:last-of-type {
    margin-bottom: ${Be.s};
  }
`,Lr=W.li`
  ${_r}

  transition: box-shadow 250ms, border-color 250ms;

  &#active-element {
    border-color: ${V.border};
    background-color: ${V.background};
    box-shadow: ${yt.back};

    &:hover {
      border-color: ${V.accent};
    }
    & div button {
      transition: color 250ms;
      color: ${V.smokeBlack};
      &:hover {
        color: ${V.hovered};
      }
    }
  }

  & div button {
    transition: color 250ms;
    &:hover {
      color: ${V.hovered};
    }
  }

  &:hover {
    border-color: ${V.accent};
    box-shadow: ${yt.back};
  }

  &:hover label,
  &:hover button {
    opacity: 1;
  }
`,Nt=$e`
  min-height: 19px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & input {
    ${In}
  }
`,jr=W.label`
  ${Nt}

  & svg {
    transition: stroke 250ms;
    stroke-width: 2px;
    color: ${({$hovered:e})=>e?V.yellow:"transparent"};
    stroke: ${({$hovered:e})=>e?V.yellow:V.border};
  }
  &:hover svg {
    stroke: ${V.placeholder};
  }
`,Pr=W.label`
  ${Nt}
  opacity: ${({$hovered:e})=>e?1:0};
  transition: opacity 250ms;

  & svg {
    transition: border-color 250ms, color 250ms;
    padding: 1px;
    border: 2px solid ${V.border};
    border-radius: 50%;
    color: ${({$hovered:e})=>e?V.border:"transparent"};
  }
  &:hover svg {
    border-color: ${V.placeholder};
    color: ${({$hovered:e})=>e?V.placeholder:"transparent"};
  }
`,Se=$e`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: transparent;
  border-color: transparent;
  transition: opacity 250ms color 250ms;
  color: ${V.black};

  & svg {
    transition: color 250ms;
    color: ${V.border};
  }
  &:hover,
  &:hover svg {
    color: ${V.placeholder};
  }
`,Mr=W.button`
  ${Se}

  opacity: ${({$hovered:e})=>e?1:0};
`,Or=W.button`
  ${Se}

  opacity: 0;
`,{colors:de,indents:It}=q,Bt=$e`
  padding-block: 4px;
  display: grid;
  align-items: start;
  grid-template-columns: 20fr 1fr 20fr;
`,Dr=W.div`
  ${Bt}
`,zr=W.form`
  ${Bt}

  max-height: 70vh;
  overflow-y: scroll;
  scrollbar-width: none;
  grid-template-columns: 12fr 1fr 12fr;
`,wt=W.textarea`
  height: 84px;
  outline: none;
  border: 1px solid ${de.accent};
  border-radius: ${It.xs};
  resize: none;
  overflow: clip;
  transition: height 150ms;
`,Nr=W.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &::after {
    content: '';
    height: calc(100% - 8px);
    width: 1px;
    border: 1px solid ${de.borderLight};
    transition: border-color 250ms;
  }

  &:hover::after {
    border-color: ${de.placeholder};
  }
`,Ir=W.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Br=W.button`
  ${Se}
`,He=W.button`
  ${Se}
`,Wr=W.button`
  ${Se}
`,$t=W.button`
  height: 100%;
  text-align: left;
  display: flex;
  align-items: top;
  background-color: transparent;
  border-color: transparent;
  border-radius: ${It.xs};
  color: ${de.black};
  transition: background-color 250ms;
`,Wt=$e`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Fr=W.iframe`
  ${Wt}
`,Gr=W.audio`
  ${Wt}

  &::-webkit-media-controls {
    display: flex;
    justify-content: center;
    background-color: ${de.background};
  }
  &::-webkit-media-controls-panel {
    background-color: ${de.backgroundHoverd};
  }
`,Xe=({el:e,setIsForm:n,setRecording:t,setTranslation:p})=>{const a=z.useRef(null),u=z.useRef(null),r=z.useRef(null),l=le(),{user:v}=ue(),{activeCluster:C}=ie(),[S,b]=z.useState(""),{_id:w,element:h,caption:T}=e,{register:A,watch:f,setValue:g,handleSubmit:d,setFocus:$}=Bn({mode:"onBlur",defaultValues:{element:h,caption:T}});z.useEffect(()=>{g("caption",T)},[T,g]);const{ref:i,...s}=A("element"),{ref:k,...j}=A("caption"),N=[a.current,u.current,r.current],F=[f("caption"),f("element")];Un(N,F),z.useEffect(()=>{$("element"),S&&h.trim().startsWith("der")?g("element",S+h.replace("der","").trim()+", "):S&&h.trim().startsWith("die")?g("element",S+h.replace("die","").trim()+", "):S&&h.trim().startsWith("das")?g("element",S+h.replace("das","").trim()+", "):S?g("element",S+h+", "):g("element",S+h)},[S,h,$,g]),z.useEffect(()=>{const E=async x=>{x.code==="NumpadAdd"&&(x.preventDefault(),await R(v.engine),d(B)()),x.key==="Enter"&&(x.preventDefault(),d(B)()),x.key==="Escape"&&(x.preventDefault(),n(!1)),x.code==="AltRight"&&a.current.focus()};return addEventListener("keydown",E),()=>{removeEventListener("keydown",E)}},[]);const B=E=>{const x=v.lang;let P=E.caption.trim(),D=Ke(E.element,C.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();D=Oe(D,","),P=Oe(P,","),v.lang.includes("en")&&C.lang.includes("de")&&(D.includes("hat")||D.includes("ist"))&&D.split(`
`)[0].split(/,\s+/)[0].endsWith("n")&&(P=P.split(/,\s+/).map(o=>o.startsWith("to ")?o:`to ${o}`).join(", ")),l(w?Pe({_id:w,lang:x,element:D,caption:P}):kt({...e,element:D,caption:P})).then(l(Et())),w||(At(),t(""),p("")),n(!1)},J=()=>{S===""&&b("der "),S==="der "&&b("die "),S==="die "&&b("das "),S==="das "&&b("")},R=async E=>{const x=f("element"),P=Ke(x,C.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim(),D={from:C.lang,to:v.lang},M=await we(P,D,E);g("caption",M)};return y.jsxs(zr,{onSubmit:d(B),children:[y.jsx(wt,{...s,name:"element",ref:E=>{i(E),a.current=E}}),y.jsxs(Ir,{ref:r,children:[y.jsx(Wr,{type:"button",onClick:J,children:y.jsx(Wn,{size:"18px"})}),y.jsx(He,{type:"button",onClick:()=>R("google"),children:y.jsx(bn,{size:"16px"})}),y.jsx(He,{type:"button",onClick:()=>R("deepl"),children:y.jsx(yn,{size:"18px"})}),y.jsx(Br,{children:y.jsx(wn,{size:"16px"})})]}),y.jsx(wt,{...j,name:"caption",ref:E=>{k(E),u.current=E}})]})};Xe.propTypes={el:I.object,setIsForm:I.func,setRecording:I.func,setTranslation:I.func};const{button:Vr}=q.shadows,{m:Kr,xl:Ur}=q.indents,Ft=({className:e})=>{const{user:n}=ue(),[t,p]=z.useState(!1),{activeCluster:a}=ie(),[u,r]=z.useState(""),[l,v]=z.useState(""),{transcript:C,listening:S,resetTranscript:b}=ye.useSpeechRecognition(),{isMicrophoneAvailable:w}=ye.useSpeechRecognition(),{browserSupportsSpeechRecognition:h}=ye.useSpeechRecognition(),T=u.endsWith(", ")||u.replace(/[a-z]$/,"*#").endsWith("*#")?C.replace(/^./,$=>` ${$}`):C.replace(/^./,$=>$.toUpperCase()),A=`${u}${T}`,f=Fn(A,Qn),g=($,i)=>$.trim().endsWith(i)?`${$.trim()} `:`${$.trim()}${i} `;if(z.useEffect(()=>{if(!S||!t)return;const $=[".","?","!",","],i=s=>{if($.includes(s.key)){s.preventDefault();const k=g(f,s.key);r(k),b()}if(s.key==="Backspace"){s.preventDefault();const k=f.length-1,j=f.substring(0,k);r(j),b()}if(s.key==="Space"){s.preventDefault();const k=f+" ";r(k),b()}};return addEventListener("keydown",i),()=>{removeEventListener("keydown",i)}},[t,S,f,b]),z.useEffect(()=>{const $=async i=>{if(S||i.metaKey&&i.key==="r"&&!i.altKey&&!i.shiftKey&&(i.preventDefault(),p(!0),be.startListening({language:a.lang,continuous:!0})),S&&i.metaKey&&i.key==="r"&&!i.altKey&&!i.shiftKey){i.preventDefault(),be.stopListening();const s=f.at(-1),k=!s||["!"].includes(s)?f:g(f,"."),j=await we(k,{from:a.lang,to:n.lang},n.engine);r(k),v(j),b()}};return addEventListener("keydown",$),()=>{removeEventListener("keydown",$)}},[a.lang,t,S,f,b,n.engine,n.lang]),z.useEffect(()=>{const $=async i=>{if(i.key==="Escape"||i.key==="Enter"){i.preventDefault(),be.stopListening(),p(!1),r(""),v(""),b();return}};return addEventListener("keyup",$),()=>{removeEventListener("keyup",$)}},[b]),!h||!w)return;const d=async $=>{if($==null||$.currentTarget.blur(),!S)p(!0),be.startListening({language:a.lang,continuous:!0});else{be.stopListening();const i=f.at(-1),s=!i||["!"].includes(i)?f:g(f,"."),k={from:a.lang,to:n.lang},j=await we(s,k,n.engine);r(s),v(j),b()}};return y.jsxs("div",{className:xr(e,"speak-btn-wrap",!t&&"hidden"),children:[y.jsx(pe,{onClick:d,$s:"m",$round:!0,$bs:Vr,children:S?y.jsx(Sn,{size:18}):y.jsx($n,{size:18})}),t&&y.jsx(Tn,{$x:`left: ${Kr}`,$y:`top: ${Ur}`,$bd:"none",children:y.jsx(Xe,{el:{cluster:a._id,element:f.trim(),caption:l.trim(),favorite:!0,checked:f.split(/\s+/).length<20},setIsForm:p,setRecording:r,setTranslation:v})})]})};Ft.propTypes={className:I.string};const{colors:We}=q,Hr=W.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  &:hover svg {
    stroke: ${We.yellow};
  }

  & svg {
    transition: stroke 250ms;
    stroke: ${We.hovered};
    /* stroke: ${({$colored:e})=>e&&We.yellow}; */
    @keyframes refresh-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
    animation: refresh-spin infinite 12s linear;
  }
`,Gt=({onClick:e})=>y.jsx(Hr,{onClick:e,children:y.jsx(Rn,{size:"35px"})});Gt.propTypes={onClick:I.func};const{background:Fe}=q.colors,{button:St}=q.shadows,{s:Tt,m:qr}=q.indents,Vt=({className:e,filtredElements:n,setLiColor:t})=>{const{user:p}=ue(),{activeCluster:a}=ie(),{activeElement:u}=fe(),[r,l]=z.useState(null);if(z.useEffect(()=>{const f=window.speechSynthesis.getVoices();Array.isArray(f)&&f.length>0&&l(f),"onvoiceschanged"in window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{const g=window.speechSynthesis.getVoices();l(g)})},[]),!Array.isArray(r)||r.length===0)return;const v=f=>{if(!f.length)return;let g="",d=0;const $=f.reduce((i,s)=>(i[s.lang]||(i[s.lang]=0),i[s.lang]+=1,i),{});for(const i in $)$[i]>d&&(d=$[i],g=i);return g},C=n.length?v(n):p.lang,S=(f,g)=>f.replaceAll(", `",`;${g} `).replaceAll(" `",`${g} `).replaceAll(",`",";"),b=({text:f,playList:g,divider:d})=>{let $="";for(let i=0;i<g.length;i+=1){let s=g[i][f];const k=`@±@${g[i].lang}${d}`;s.endsWith(".")||s.endsWith("!")||s.endsWith("?")||s.endsWith('"')?($+=S(s,d).replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",f!=="caption"?`__${d}`:`__${k}`).replaceAll(".",f!=="caption"?`.${d}`:`.${k}`).replaceAll(",",f!=="caption"?`,${d}`:`,${k}`).replaceAll("!",f!=="caption"?`!${d}`:`!${k}`).replaceAll("?",f!=="caption"?`?${d}`:`?${k}`).replaceAll(":",f!=="caption"?`:${d}`:`:${k}`),a.lang.includes("de")&&($=$.replaceAll(`0.${d}`,"0.").replaceAll(`1.${d}`,"1.").replaceAll(`2.${d}`,"2.").replaceAll(`3.${d}`,"3.").replaceAll(`4.${d}`,"4.").replaceAll(`5.${d}`,"5.").replaceAll(`6.${d}`,"6.").replaceAll(`7.${d}`,"7.").replaceAll(`8.${d}`,"8.").replaceAll(`9.${d}`,"9."))):g[i].element.startsWith("[")||(f==="caption"&&(s.includes(" [")&&(s=s.substring(0,s.indexOf(" ["))),s=`${s}@±@${g[i].lang}`),$+=s+d)}return $},w=r,h=f=>{f.currentTarget.blur(),t(Fe);const g="$*@",d=n.findIndex(s=>s.element===u.element),$=n.splice(d===-1?0:d),i=Me({setLiColor:t,divider:g,voices:w,text:b({text:"element",playList:$,divider:g}),lang:a.lang,rate:a.rate});i&&ne.error(i)},T=f=>{f.currentTarget.blur();const g="$*@";t(Fe);const d=n.findIndex(s=>s.element===u.element),$=n.splice(d===-1?0:d),i=Me({setLiColor:t,divider:g,voices:w,text:b({text:"caption",playList:$,divider:g}),lang:C,rate:p.rate});i&&ne.error(i)},A=f=>{f.currentTarget.blur(),t(Fe);let g="";const d="$*@",$=n.findIndex(k=>k.element===u.element),i=n.splice($===-1?0:$);for(let k=0;k<i.length;k+=1){const{element:j,caption:N,lang:F}=i[k];if(!j.startsWith("[")){const B=S(j,""),J=N.includes(" [")?N.substring(0,N.indexOf(" [")):S(N,"");g+=B+`@±@${F}`+J+d}}const s=kn({setLiColor:t,divider:d,voices:w,text:g,lang:a.lang,rate:p.rate});s&&ne.error(s)};return y.jsxs(qe,{className:e,$m:`${Tt} ${qr}`,$pos:"fixed",$side:"right",$high:"bottom",$gtc:"1fr 0.5fr 1fr",$cg:Tt,children:[y.jsx(pe,{onClick:h,$s:"m",$round:!0,$bs:St,children:(a==null?void 0:a.lang.at(0).toUpperCase())+(a==null?void 0:a.lang.substring(1))}),y.jsx(Gt,{onClick:A}),y.jsx(pe,{onClick:T,$s:"m",$round:!0,$bs:St,children:(C==null?void 0:C.at(0).toUpperCase())+(C==null?void 0:C.substring(1))})]})};Vt.propTypes={className:I.string,filtredElements:I.array,setLiColor:I.func};const Kt=({el:e,sortByDate:n,setSortByDate:t,setLiColor:p})=>{var $;const a=le(),{user:u}=ue(),{activeCluster:r}=ie(),[l,v]=z.useState(),C="$*@",S=(i,s)=>{let k="";return s?(i.trim().endsWith(".")||i.trim().endsWith("!")||i.trim().endsWith("?")||i.endsWith('"')?(k=i.trim().replaceAll(", `",`;${s} `).replaceAll(" `",`${s} `).replaceAll(",`",";").replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",`__${s}`).replaceAll(".",`.${s}`).replaceAll(",",`,${s}`).replaceAll("!",`!${s}`).replaceAll("?",`?${s}`).replaceAll(":",`:${s}`),r.lang.includes("de")&&(k=k.replaceAll(`0.${s}`,"0.").replaceAll(`1.${s}`,"1.").replaceAll(`2.${s}`,"2.").replaceAll(`3.${s}`,"3.").replaceAll(`4.${s}`,"4.").replaceAll(`5.${s}`,"5.").replaceAll(`6.${s}`,"6.").replaceAll(`7.${s}`,"7.").replaceAll(`8.${s}`,"8.").replaceAll(`9.${s}`,"9."))):k=i.trim()+s,k.includes("[")?k.substring(0,k.indexOf("["))+s:k):i},b=i=>{i.currentTarget.blur();const s=Me({setLiColor:p,divider:C,voices:window.speechSynthesis.getVoices(),text:S(e.element,C),lang:r.lang,rate:r.rate});s&&ne.error(s)},w=i=>{i.currentTarget.blur();const s=Me({setLiColor:p,divider:C,voices:window.speechSynthesis.getVoices(),text:S(e.caption,C),lang:e.lang,rate:u.rate});s&&ne.error(s)},h=i=>{t(!n),n?ne.success("Below is Recent"):ne.success("Above is Recent"),i.stopPropagation()},T=i=>{const{_id:s}=r;a(xt(e)),i.currentTarget.closest("li").id!=="active-element"&&a(Ge({_id:s,activeEl:e._id}))},A=An(e.caption),f=Cn({onSuccess:i=>{const{access_token:s,expires_in:k}=i,j={accessToken:s,expiresIn:k*1e3+Date.now()};a(En(j))},onError:i=>ne(i.message)}),g=async i=>{const s=await xn.get(A.file,{responseType:"blob",headers:{Authorization:`Bearer ${i}`}}).then(j=>j.data),k=URL.createObjectURL(s);v(k)},d=Date.now()>(($=u==null?void 0:u.googleToken)==null?void 0:$.expiresIn);return y.jsx(y.Fragment,{children:y.jsxs(Dr,{onClick:T,children:[y.jsx($t,{onClick:b,children:e.element}),y.jsx(Nr,{onClick:e.element.startsWith("[")?u.googleToken?()=>g(u.googleToken.accessToken):()=>f():h}),A.text&&y.jsx($t,{onClick:w,children:A.text}),l&&!d&&y.jsx(Gr,{src:l,controls:!0}),(!l||d)&&A.link&&y.jsx(Fr,{src:A.link})]})})};Kt.propTypes={el:I.object,sortByDate:I.bool,setSortByDate:I.func,$active:I.bool,$hovered:I.bool,setLiColor:I.func};const Ut=({el:e,index:n,length:t,sortByDate:p,setSortByDate:a,translateAll:u,liColor:r,setLiColor:l})=>{const v=le(),{elementTrash:C,activeElement:S}=fe(),[b,w]=z.useState(!1),{_id:h,favorite:T,checked:A}=e,f=C.find(k=>k._id===h),g=()=>{v(Pe({_id:h,favorite:!T}))},d=()=>{v(Pe({_id:h,checked:!A}))},$=()=>v(Mn(e)),i=()=>w(!b),s=h===(S==null?void 0:S._id);return y.jsxs(Lr,{id:s?"active-element":null,licolor:r,children:[y.jsxs(Ve,{$h:"100%",$p:"0",$fd:"column",children:[y.jsxs(jr,{$hovered:T,children:[y.jsx("input",{type:"checkbox",name:"favorite",checked:T,onChange:g}),y.jsx(Nn,{size:"20px"})]}),y.jsxs(Pr,{$hovered:A,children:[y.jsx("input",{type:"checkbox",name:"checked",checked:A,onChange:d}),y.jsx(_n,{size:"15px"})]}),b&&t===n+1&&y.jsx(He,{onClick:u,children:y.jsx(Ln,{size:"16px"})})]}),b&&y.jsx(Xe,{el:e,setIsForm:w}),!b&&y.jsx(Kt,{el:e,sortByDate:p,setSortByDate:a,setLiColor:l}),y.jsxs(Ve,{$h:"100%",$p:"0",$fd:"column",children:[y.jsx(Mr,{$hovered:f,onClick:$,children:y.jsx(jn,{size:"16px"})}),y.jsx(Or,{onClick:i,children:y.jsx(Pn,{size:"15px"})})]})]})};Ut.propTypes={el:I.object,index:I.number,length:I.number,sortByDate:I.bool,setSortByDate:I.func,translateAll:I.func,liColor:I.string,setLiColor:I.func};const Yr=W.ul`
  width: 100%;
  list-style: none;
`,Qr=W.div`
  & .speak-btn-wrap {
    position: fixed;
    bottom: ${q.indents.s};
    left: calc(45% + 10px);
    /* transform: translateX(calc(-50%)); */
  }

  & .hidden {
    opacity: 0;
    transition: opacity 150ms;
    &:hover {
      opacity: 1;
    }
    & button {
      transition: color 750ms, border-color 750ms, background-color 750ms;
    }
  }
`,{white:Xr}=q.colors,Zr=()=>{const e=le(),{ref:n,inView:t,entry:p}=nr({initialInView:!0,rootMargin:"0px 0px -30px 0px"}),{user:a}=ue(),{activeCluster:u}=ie(),{allElements:r,elementTrash:l,elementFilter:v,isLoading:C}=fe(),[S,b]=z.useState(Xr);let{elementSelect:w}=fe();w=w||[];const[h,T]=z.useState(!1);z.useEffect(()=>{u&&e(Et({cluster:u._id})).unwrap().then(({result:i})=>{if(!u.activeEl)return;const s=i.elements.find(({_id:k})=>k===u.activeEl);e(xt(s))}).then(()=>{const i=document.getElementById("active-element");i&&On(i)})},[]);const A=r.filter(i=>i.cluster===(u==null?void 0:u._id)).sort((i,s)=>i.createdAt.localeCompare(s.createdAt)),g=(()=>{const i=l.map(s=>s._id);return w.includes("trash")?A.filter(s=>i.includes(s._id)):A})().filter(({element:i,caption:s,favorite:k,checked:j})=>{const N=i.toLowerCase().replace("·","").includes(v)||i.toLowerCase().includes(v)||s.toLowerCase().includes(v),F=w.includes("wordlist")?N&&Gn(i):N,B=()=>w.some(R=>["favorite","unfavorite"].includes(R))?w.includes("favorite")?F&&k===!0:F&&k===!1:F;return(()=>w.some(R=>["checked","unchecked"].includes(R))?w.includes("checked")?B()&&j===!0:B()&&j===!1:B())()}).sort(h?(i,s)=>s.createdAt.localeCompare(i.createdAt):(i,s)=>i.createdAt.localeCompare(s.createdAt)),d=async()=>{const i=a.lang;let s=0;await g.forEach(async k=>{if(s>1)return;const{_id:j,element:N}=k;if(!N.startsWith("[")||i!==k.lang){const F={from:u.lang,to:i},B=await we(N,F,a.engine);e(Pe({_id:j,lang:i,caption:B})),s=s+1}})},$=window.innerHeight<(p==null?void 0:p.target.getBoundingClientRect().y)+(p==null?void 0:p.target.getBoundingClientRect().height)*1.5;return y.jsxs(y.Fragment,{children:[y.jsxs(Yr,{children:[g.map((i,s,k)=>y.jsx(Ut,{el:i,index:s,length:k.length,sortByDate:h,setSortByDate:T,translateAll:d,liColor:S,setLiColor:b},i._id)),y.jsxs(Qr,{ref:n,children:[y.jsx(jt,{}),y.jsx(Ft,{className:!t||!$?"shown":"hidden"}),y.jsx(Pt,{className:!t||!$?"shown":"hidden"}),y.jsx(Vt,{className:!t||!$?"shown":"hidden",filtredElements:g,setLiColor:b})]})]}),C&&y.jsx(Dn,{})]})},{s:Rt,m:Jr}=q.indents,si=()=>y.jsx(Ve,{$p:`0 ${Jr} ${Rt} ${Rt}`,children:y.jsx(Zr,{})});export{si as default};
