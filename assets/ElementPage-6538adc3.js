import{U as We,r as O,t as q,P as B,u as oe,b as pe,w as ne,j as S,T as Xe,V as Re,y as je,G as Ge,H as yt,W as _t,X as Lt,Y as Ze,Q as ie,x as fe,S as vn,A as le,Z as yn,_ as bn,$ as wn,a0 as Sn,s as V,a1 as $n,k as jt,n as de,a2 as Tn,a3 as kn,a4 as Rn,a5 as Pe,a6 as Pt,a7 as An,a8 as Cn,M as En,a9 as Me,aa as xn,ab as _n,ac as Ln,ad as jn,ae as Pn,af as Oe,F as Ue,E as Mn,ag as On,D as Dn,C as In,N as He,ah as zn,ai as Nn}from"./index-626f6078.js";import{r as Mt,H as Bn,T as Wn}from"./index-c69c1c0e.js";import{w as Ot,S as Fn}from"./googleScopes-4ab2d47f.js";import{v as Kn,u as Vn}from"./index.esm-5ab86b9d.js";import{a as Gn}from"./index-b24cbf7c.js";const qe=(e,r)=>{if(!r.includes("de"))return e;const t=e.trim().split(`
`);return t.length===1?e:["der","die","das"].includes(t[0].split(" ")[0])?`${t[0].trim()}, ${t[1].split("·")[1].replaceAll("⁰","").replaceAll("/"," / ").trim()}`:(e.includes("hat")||e.includes("ist"))&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e.includes("am")&&!t[0].trim().includes(" ")?`${t[0].trim()}, ${t[1].split("·")[1].trim()}, `+t[1].split("·")[2]:e},bt=(e,r)=>{let t=e;for(const s in r)t=t.replaceAll(s,r[s]);const p=s=>s.replace(/^./,o=>o.toUpperCase()),a=[...t.split(/\s+/)];for(let s=0;s<a.length;s+=1)[".","!","?"].includes(a[s].at(-1))&&a[s+1]&&a.splice(s+1,1,p(a[s+1]));return a.join(" ")},Un=e=>/[a-z]/.test(e.charAt(0)),{VITE_DEEPL_API_KEY:Hn}={VITE_GOOGLE_CLIENT_ID:"502819804892-294ksvklsg60pjugga88j8l13a6dgmf2.apps.googleusercontent.com",VITE_DEEPL_API_KEY:"d15bf272-fb1f-4f29-bbc3-d3bbdd686c53:fx",VITE_GOOGLE_API_KEY:"AIzaSyABIqXgO4nO0LhnoircvA4SL0uwOY_PxJ4",VITE_PROD_BACK_URL:"https://studyorganizer.onrender.com",BASE_URL:"/studyorganizer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},qn={google:"",deepl:Hn},we=async(e,{from:r,to:t},p)=>{var l,s;if(!e||e.length===0)return"";const a=e.replaceAll(" ·",",").replaceAll("·","");We.engine=p,We.key=qn[p];try{let o=await We(`${a}`,{from:r,to:t});if(t.includes("en")&&a.toLowerCase().includes("uhr")&&(o=o.replaceAll("a.m. on","am on").replaceAll("p.m. on","pm on").replaceAll("a.m. to","am to").replaceAll("p.m. to","pm to").replaceAll("a.m.","am.").replaceAll("p.m.","pm.")),[".","!","?"].includes(a.at(-1)))return o;const R=a.split(a.includes(", ")?", ":/\s+/),m=o.split(", "),d=t.includes("de")?m[0]:m[0].at(0).toLowerCase()+m[0].substring(1);return R.length===1?o.toLocaleLowerCase()+", ":["der","die","das"].includes(R[0].split(" ")[0])?o.replace("The ","").replace("the ","").split(", ")[0].toLocaleLowerCase()+", ":t.includes("en")&&((l=R[2])!=null&&l.startsWith("am"))?m[2].startsWith("the")?o:`${d}, ${m[1]}, the ${m[2]}`:(R[0].endsWith("n")&&["hat","ist"].includes((s=R[2])==null?void 0:s.split(" ")[0])&&r.includes("de")&&(o=t.includes("en")?"to "+d+", ":d+", "),o)}catch(o){return o.message}},De=(e,r)=>e.endsWith(r)?e.substring(0,e.length-1):e,Yn=(e,r)=>{let t=84;e[0]&&(t=Number(e[0].style.height.replace("px",""))),O.useEffect(()=>{if(!e[0])return;let p=Math.max(...e.map(a=>a.scrollHeight));t!==p&&(p=p<=90?p:p+6,e.forEach(a=>{a.style.height=p+"px"}))},[t,e,r])},Ae=[{value:"de",label:"German"},{value:"en",label:"English"},{value:"uk",label:"Ukrainian"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"it",label:"Italian"}],Ce=[{value:.3,label:"Rate: 0.3"},{value:.4,label:"Rate: 0.4"},{value:.5,label:"Rate: 0.5"},{value:.6,label:"Rate: 0.6"},{value:.8,label:"Rate: 0.8"},{value:1,label:"Rate: 1"},{value:1.25,label:"Rate: 1.25"},{value:1.5,label:"Rate: 1.5"}],Jn={"..":".",". .":".","?.":"?","? .":"?","!.":"!","! .":"!",",,":",",", ,":","},Xn={" Dot":"."," dot":"."," exclamation mark":"!"," question mark":"?"," comma":","," colon":":"," semi-colon":";","Yes ":"Yes, ","No ":"No, ","Wow ":"Wow, "},Zn={" Punkt":"."," Ausrufezeichen":"!"," Fragezeichen":"?"," Komma":","," Doppelpunkt":":"," Semikolon":";","Ja ":"Ja, ","Nein ":"Nein, "," weil":", weil"," aber":", aber"," als":", als"," ob":", ob"," damit":", damit"," bevor":", bevor"," obwohl":", obwohl"," dass":", dass"," dann":", dann"," deshalb":", deshalb"," desvegen":", desvegen"," trotzdem":", trotzdem"},wt={...Xn,...Zn,...Jn};var Ye=new Map,Ee=new WeakMap,St=0,Qn=void 0;function er(e){return e?(Ee.has(e)||(St+=1,Ee.set(e,St.toString())),Ee.get(e)):"0"}function tr(e){return Object.keys(e).sort().filter(r=>e[r]!==void 0).map(r=>`${r}_${r==="root"?er(e.root):e[r]}`).toString()}function nr(e){const r=tr(e);let t=Ye.get(r);if(!t){const p=new Map;let a;const l=new IntersectionObserver(s=>{s.forEach(o=>{var v;const R=o.isIntersecting&&a.some(m=>o.intersectionRatio>=m);e.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=R),(v=p.get(o.target))==null||v.forEach(m=>{m(R,o)})})},e);a=l.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:r,observer:l,elements:p},Ye.set(r,t)}return t}function rr(e,r,t={},p=Qn){if(typeof window.IntersectionObserver>"u"&&p!==void 0){const v=e.getBoundingClientRect();return r(p,{isIntersecting:p,target:e,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:v,intersectionRect:v,rootBounds:v}),()=>{}}const{id:a,observer:l,elements:s}=nr(t),o=s.get(e)||[];return s.has(e)||s.set(e,o),o.push(r),l.observe(e),function(){o.splice(o.indexOf(r),1),o.length===0&&(s.delete(e),l.unobserve(e)),s.size===0&&(l.disconnect(),Ye.delete(a))}}function ir({threshold:e,delay:r,trackVisibility:t,rootMargin:p,root:a,triggerOnce:l,skip:s,initialInView:o,fallbackInView:v,onChange:R}={}){var m;const[d,y]=O.useState(null),h=O.useRef(R),[$,C]=O.useState({inView:!!o,entry:void 0});h.current=R,O.useEffect(()=>{if(s||!d)return;let i;return i=rr(d,(g,T)=>{C({inView:g,entry:T}),h.current&&h.current(g,T),T.isIntersecting&&l&&i&&(i(),i=void 0)},{root:a,rootMargin:p,threshold:e,trackVisibility:t,delay:r},v),()=>{i&&i()}},[Array.isArray(e)?e.toString():e,d,a,p,l,s,t,v,r]);const f=(m=$.entry)==null?void 0:m.target,b=O.useRef(void 0);!d&&f&&!l&&!s&&b.current!==f&&(b.current=f,C({inView:!!o,entry:void 0}));const n=[y,$.inView,$.entry];return n.ref=n[0],n.inView=n[1],n.entry=n[2],n}const{backgroundHoverd:xe,white:_e,borderLight:Le}=q.colors,Dt=()=>{const e=oe(),{user:r}=pe(),{activeCluster:t}=ne(),p=({value:o})=>{e(je({_id:t._id,lang:o})).unwrap().then(v=>e(Ge(v.result.cluster)))},a=({value:o})=>{e(je({_id:t._id,rate:o})).unwrap().then(v=>e(Ge(v.result.cluster)))},l=({value:o})=>{const v=new FormData;v.append("lang",o),e(yt(v))},s=({value:o})=>{const v=new FormData;v.append("rate",o),e(yt(v))};return S.jsxs(Xe,{$m:"0",$cg:"8px",$ai:"center",$gtc:"2fr 2fr 2fr 2fr",children:[S.jsx(Re,{options:Ae,defaultValue:Ae.find(o=>o.value===(t==null?void 0:t.lang)),onChange:p,placeholder:"Language...",$ol:xe,$b:_e,$bh:Le}),S.jsx(Re,{options:Ce,defaultValue:Ce.find(o=>o.value==(t==null?void 0:t.rate)),onChange:a,placeholder:"Rate...",$ol:xe,$b:_e,$bh:Le}),S.jsx(Re,{options:Ae,defaultValue:Ae.find(o=>o.value===r.lang),onChange:l,placeholder:"Language...",$ol:xe,$b:_e,$bh:Le}),S.jsx(Re,{options:Ce,defaultValue:Ce.find(o=>o.value==r.rate),onChange:s,placeholder:"Rate...",$ol:xe,$b:_e,$bh:Le})]})};Dt.propTypes={filtredElements:B.array,setLiColor:B.func};const{button:sr}=q.shadows,or=()=>{const e=oe(),{user:r}=pe(),{activeCluster:t}=ne(),p=O.useCallback(async a=>{const l=window.getSelection().toString();l&&await Ot(l);const s=await Mt();let o=qe(s,t.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();o=De(o,",");const v={from:t.lang,to:r.lang};let R=await we(o,v,r.engine);R=De(R.trim(),",");const{_id:m}=t;try{const d={cluster:m,element:"[]",caption:o},y={cluster:m,element:o,caption:R,favorite:!0,checked:o.split(/\s+/).length<20},h=o.includes("https://")?d:y;e(_t(h)).unwrap().then(()=>t.sortBy?Lt():Ze()).finally(()=>{var $;return($=a==null?void 0:a.target)==null?void 0:$.blur()})}catch(d){a==null||a.currentTarget.blur(),ie.error(`Invalid element, ${d.message}`)}},[t,e,r.engine,r.lang]);return O.useEffect(()=>{const a=async l=>{l.key==="e"&&l.metaKey&&!l.altKey&&!l.shiftKey&&(l.preventDefault(),await p())};return addEventListener("keydown",a),()=>{removeEventListener("keydown",a)}},[p]),S.jsx(fe,{onClick:p,$s:"m",$round:!0,$bs:sr,children:S.jsx(vn,{size:18})})},{button:ar}=q.shadows,cr=()=>{const e=oe(),{elementTrash:r}=le(),t=()=>{confirm("Are you sure you want to delete the selected Element(s)?")&&e(yn(r.map(p=>p._id).join("&"))).unwrap().then(()=>e(bn()))};return S.jsx(fe,{onClick:t,$s:"m",$round:!0,$bs:ar,children:S.jsx(Bn,{size:16})})};function lr(e){return wn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M250.73,210.63l-56-112a12,12,0,0,0-21.46,0l-20.52,41A84.2,84.2,0,0,1,114,126.22,107.48,107.48,0,0,0,139.33,68H160a12,12,0,0,0,0-24H108V32a12,12,0,0,0-24,0V44H32a12,12,0,0,0,0,24h83.13A83.69,83.69,0,0,1,96,110.35,84,84,0,0,1,83.6,91a12,12,0,1,0-21.81,10A107.55,107.55,0,0,0,78,126.24,83.54,83.54,0,0,1,32,140a12,12,0,0,0,0,24,107.47,107.47,0,0,0,64-21.07,108.4,108.4,0,0,0,45.39,19.44l-24.13,48.26a12,12,0,1,0,21.46,10.73L151.41,196h65.17l12.68,25.36a12,12,0,1,0,21.47-10.73ZM163.41,172,184,130.83,204.58,172Z"},child:[]}]})(e)}const{button:ur}=q.shadows,pr=()=>{const{activeCluster:e}=ne();O.useEffect(()=>{const l=async s=>{s.metaKey&&s.key==="d"&&!s.altKey&&!s.shiftKey&&(s.preventDefault(),await a())};return addEventListener("keydown",l),()=>{removeEventListener("keydown",l)}},[]);let r=[];function t(l){l.forEach(s=>{const o=window.open(s,"_blank");o?r.push(o):ie.error(`Failed to open tab: ${s}`)})}const p=()=>{r.forEach(l=>{l.close()}),r=[]},a=async()=>{const l=window.getSelection().toString();l&&await Ot(l);const s=await Mt();let o=[];e.lang.includes("de")&&o.push(`https://www.verbformen.com/conjugation/?w=${s}`),e.lang.includes("en")&&o.push(`https://dictionary.cambridge.org/dictionary/english-russian/${s}`),p(),t(o)};return S.jsx(fe,{onClick:a,$s:"m",$round:!0,$bs:ur,children:S.jsx(lr,{size:18})})},{s:$t,m:fr}=q.indents,It=({className:e})=>{const{pathname:r}=Sn(),{elementTrash:t}=le(),{activeCluster:p}=ne(),a=t.length>0?" 1fr":"",l=p?" 1fr":"",s=a+l+" 1fr";if(r.includes("/element"))return S.jsxs(Xe,{className:e,$m:`${$t} ${fr}`,$pos:"fixed",$side:"left",$high:"bottom",$gtc:s,$cg:$t,children:[S.jsx(pr,{}),l&&S.jsx(or,{}),a&&S.jsx(cr,{})]})};It.propTypes={className:B.string};const{colors:Fe}=q,hr=V.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  &:hover svg {
    stroke: ${Fe.yellow};
  }

  & svg {
    transition: stroke 250ms;
    stroke: ${Fe.hovered};
    /* stroke: ${({$colored:e})=>e&&Fe.yellow}; */
    @keyframes refresh-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
    animation: refresh-spin infinite 12s linear;
  }
`,zt=({onClick:e})=>S.jsx(hr,{onClick:e,children:S.jsx($n,{size:"35px"})});zt.propTypes={onClick:B.func};var dr={exports:{}};(function(e){var r=function(t){var p=Object.prototype,a=p.hasOwnProperty,l=Object.defineProperty||function(u,c,w){u[c]=w.value},s,o=typeof Symbol=="function"?Symbol:{},v=o.iterator||"@@iterator",R=o.asyncIterator||"@@asyncIterator",m=o.toStringTag||"@@toStringTag";function d(u,c,w){return Object.defineProperty(u,c,{value:w,enumerable:!0,configurable:!0,writable:!0}),u[c]}try{d({},"")}catch{d=function(c,w,_){return c[w]=_}}function y(u,c,w,_){var E=c&&c.prototype instanceof i?c:i,z=Object.create(E.prototype),U=new N(_||[]);return l(z,"_invoke",{value:k(u,w,U)}),z}t.wrap=y;function h(u,c,w){try{return{type:"normal",arg:u.call(c,w)}}catch(_){return{type:"throw",arg:_}}}var $="suspendedStart",C="suspendedYield",f="executing",b="completed",n={};function i(){}function g(){}function T(){}var x={};d(x,v,function(){return this});var L=Object.getPrototypeOf,D=L&&L(L(M([])));D&&D!==p&&a.call(D,v)&&(x=D);var Y=T.prototype=i.prototype=Object.create(x);g.prototype=T,l(Y,"constructor",{value:T,configurable:!0}),l(T,"constructor",{value:g,configurable:!0}),g.displayName=d(T,m,"GeneratorFunction");function W(u){["next","throw","return"].forEach(function(c){d(u,c,function(w){return this._invoke(c,w)})})}t.isGeneratorFunction=function(u){var c=typeof u=="function"&&u.constructor;return c?c===g||(c.displayName||c.name)==="GeneratorFunction":!1},t.mark=function(u){return Object.setPrototypeOf?Object.setPrototypeOf(u,T):(u.__proto__=T,d(u,m,"GeneratorFunction")),u.prototype=Object.create(Y),u},t.awrap=function(u){return{__await:u}};function I(u,c){function w(z,U,H,X){var G=h(u[z],u,U);if(G.type==="throw")X(G.arg);else{var ge=G.arg,ae=ge.value;return ae&&typeof ae=="object"&&a.call(ae,"__await")?c.resolve(ae.__await).then(function(re){w("next",re,H,X)},function(re){w("throw",re,H,X)}):c.resolve(ae).then(function(re){ge.value=re,H(ge)},function(re){return w("throw",re,H,X)})}}var _;function E(z,U){function H(){return new c(function(X,G){w(z,U,X,G)})}return _=_?_.then(H,H):H()}l(this,"_invoke",{value:E})}W(I.prototype),d(I.prototype,R,function(){return this}),t.AsyncIterator=I,t.async=function(u,c,w,_,E){E===void 0&&(E=Promise);var z=new I(y(u,c,w,_),E);return t.isGeneratorFunction(c)?z:z.next().then(function(U){return U.done?U.value:z.next()})};function k(u,c,w){var _=$;return function(z,U){if(_===f)throw new Error("Generator is already running");if(_===b){if(z==="throw")throw U;return F()}for(w.method=z,w.arg=U;;){var H=w.delegate;if(H){var X=j(H,w);if(X){if(X===n)continue;return X}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(_===$)throw _=b,w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);_=f;var G=h(u,c,w);if(G.type==="normal"){if(_=w.done?b:C,G.arg===n)continue;return{value:G.arg,done:w.done}}else G.type==="throw"&&(_=b,w.method="throw",w.arg=G.arg)}}}function j(u,c){var w=c.method,_=u.iterator[w];if(_===s)return c.delegate=null,w==="throw"&&u.iterator.return&&(c.method="return",c.arg=s,j(u,c),c.method==="throw")||w!=="return"&&(c.method="throw",c.arg=new TypeError("The iterator does not provide a '"+w+"' method")),n;var E=h(_,u.iterator,c.arg);if(E.type==="throw")return c.method="throw",c.arg=E.arg,c.delegate=null,n;var z=E.arg;if(!z)return c.method="throw",c.arg=new TypeError("iterator result is not an object"),c.delegate=null,n;if(z.done)c[u.resultName]=z.value,c.next=u.nextLoc,c.method!=="return"&&(c.method="next",c.arg=s);else return z;return c.delegate=null,n}W(Y),d(Y,m,"Generator"),d(Y,v,function(){return this}),d(Y,"toString",function(){return"[object Generator]"});function A(u){var c={tryLoc:u[0]};1 in u&&(c.catchLoc=u[1]),2 in u&&(c.finallyLoc=u[2],c.afterLoc=u[3]),this.tryEntries.push(c)}function P(u){var c=u.completion||{};c.type="normal",delete c.arg,u.completion=c}function N(u){this.tryEntries=[{tryLoc:"root"}],u.forEach(A,this),this.reset(!0)}t.keys=function(u){var c=Object(u),w=[];for(var _ in c)w.push(_);return w.reverse(),function E(){for(;w.length;){var z=w.pop();if(z in c)return E.value=z,E.done=!1,E}return E.done=!0,E}};function M(u){if(u!=null){var c=u[v];if(c)return c.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length)){var w=-1,_=function E(){for(;++w<u.length;)if(a.call(u,w))return E.value=u[w],E.done=!1,E;return E.value=s,E.done=!0,E};return _.next=_}}throw new TypeError(typeof u+" is not iterable")}t.values=M;function F(){return{value:s,done:!0}}return N.prototype={constructor:N,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(P),!u)for(var c in this)c.charAt(0)==="t"&&a.call(this,c)&&!isNaN(+c.slice(1))&&(this[c]=s)},stop:function(){this.done=!0;var u=this.tryEntries[0],c=u.completion;if(c.type==="throw")throw c.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var c=this;function w(X,G){return z.type="throw",z.arg=u,c.next=X,G&&(c.method="next",c.arg=s),!!G}for(var _=this.tryEntries.length-1;_>=0;--_){var E=this.tryEntries[_],z=E.completion;if(E.tryLoc==="root")return w("end");if(E.tryLoc<=this.prev){var U=a.call(E,"catchLoc"),H=a.call(E,"finallyLoc");if(U&&H){if(this.prev<E.catchLoc)return w(E.catchLoc,!0);if(this.prev<E.finallyLoc)return w(E.finallyLoc)}else if(U){if(this.prev<E.catchLoc)return w(E.catchLoc,!0)}else if(H){if(this.prev<E.finallyLoc)return w(E.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(u,c){for(var w=this.tryEntries.length-1;w>=0;--w){var _=this.tryEntries[w];if(_.tryLoc<=this.prev&&a.call(_,"finallyLoc")&&this.prev<_.finallyLoc){var E=_;break}}E&&(u==="break"||u==="continue")&&E.tryLoc<=c&&c<=E.finallyLoc&&(E=null);var z=E?E.completion:{};return z.type=u,z.arg=c,E?(this.method="next",this.next=E.finallyLoc,n):this.complete(z)},complete:function(u,c){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&c&&(this.next=c),n},finish:function(u){for(var c=this.tryEntries.length-1;c>=0;--c){var w=this.tryEntries[c];if(w.finallyLoc===u)return this.complete(w.completion,w.afterLoc),P(w),n}},catch:function(u){for(var c=this.tryEntries.length-1;c>=0;--c){var w=this.tryEntries[c];if(w.tryLoc===u){var _=w.completion;if(_.type==="throw"){var E=_.arg;P(w)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(u,c,w){return this.delegate={iterator:M(u),resultName:c,nextLoc:w},this.method==="next"&&(this.arg=s),n}},t}(e.exports);try{regeneratorRuntime=r}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}})(dr);var be={},Nt={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.browserSupportsPolyfills=Z.compareTwoStringsUsingDiceCoefficient=Z.commandToRegExp=Z.concatTranscripts=Z.debounce=void 0;var gr=function(r,t,p){var a;return function(){var l=this,s=arguments,o=function(){a=null,p||r.apply(l,s)},v=p&&!a;clearTimeout(a),a=setTimeout(o,t),v&&r.apply(l,s)}};Z.debounce=gr;var mr=function(){for(var r=arguments.length,t=new Array(r),p=0;p<r;p++)t[p]=arguments[p];return t.map(function(a){return a.trim()}).join(" ").trim()};Z.concatTranscripts=mr;var vr=/\s*\((.*?)\)\s*/g,yr=/(\(\?:[^)]+\))\?/g,br=/(\(\?)?:\w+/g,wr=/\*/g,Sr=/[-{}[\]+?.,\\^$|#]/g,$r=function(r){return r instanceof RegExp?new RegExp(r.source,"i"):(r=r.replace(Sr,"\\$&").replace(vr,"(?:$1)?").replace(br,function(t,p){return p?t:"([^\\s]+)"}).replace(wr,"(.*?)").replace(yr,"\\s*$1?\\s*"),new RegExp("^"+r+"$","i"))};Z.commandToRegExp=$r;var Tr=function(r,t){if(r=r.replace(/\s+/g,"").toLowerCase(),t=t.replace(/\s+/g,"").toLowerCase(),!r.length&&!t.length)return 1;if(!r.length||!t.length)return 0;if(r===t)return 1;if(r.length===1&&t.length===1||r.length<2||t.length<2)return 0;for(var p=new Map,a=0;a<r.length-1;a++){var l=r.substring(a,a+2),s=p.has(l)?p.get(l)+1:1;p.set(l,s)}for(var o=0,v=0;v<t.length-1;v++){var R=t.substring(v,v+2),m=p.has(R)?p.get(R):0;m>0&&(p.set(R,m-1),o++)}return 2*o/(r.length+t.length-2)};Z.compareTwoStringsUsingDiceCoefficient=Tr;var kr=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};Z.browserSupportsPolyfills=kr;var he={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.APPEND_TRANSCRIPT=ue.CLEAR_TRANSCRIPT=void 0;var Rr="CLEAR_TRANSCRIPT";ue.CLEAR_TRANSCRIPT=Rr;var Ar="APPEND_TRANSCRIPT";ue.APPEND_TRANSCRIPT=Ar;Object.defineProperty(he,"__esModule",{value:!0});he.appendTranscript=he.clearTranscript=void 0;var Bt=ue,Cr=function(){return{type:Bt.CLEAR_TRANSCRIPT}};he.clearTranscript=Cr;var Er=function(r,t){return{type:Bt.APPEND_TRANSCRIPT,payload:{interimTranscript:r,finalTranscript:t}}};he.appendTranscript=Er;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.transcriptReducer=void 0;var Tt=ue,xr=Z,_r=function(r,t){switch(t.type){case Tt.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case Tt.APPEND_TRANSCRIPT:return{interimTranscript:t.payload.interimTranscript,finalTranscript:(0,xr.concatTranscripts)(r.finalTranscript,t.payload.finalTranscript)};default:throw new Error}};ze.transcriptReducer=_r;var Wt={},Qe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=r})(Qe);var et={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var r=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),t=function(l){return l===r};e.isNative=t;var p=r;e.default=p})(et);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(Qe),t=Z,p=et;function a(d){return d&&d.__esModule?d:{default:d}}function l(d,y,h,$,C,f,b){try{var n=d[f](b),i=n.value}catch(g){h(g);return}n.done?y(i):Promise.resolve(i).then($,C)}function s(d){return function(){var y=this,h=arguments;return new Promise(function($,C){var f=d.apply(y,h);function b(i){l(f,$,C,b,n,"next",i)}function n(i){l(f,$,C,b,n,"throw",i)}b(void 0)})}}function o(d,y){if(!(d instanceof y))throw new TypeError("Cannot call a class as a function")}function v(d,y){for(var h=0;h<y.length;h++){var $=y[h];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(d,$.key,$)}}function R(d,y,h){return y&&v(d.prototype,y),h&&v(d,h),d}var m=function(){function d(y){o(this,d),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(y),(0,r.default)()&&(this.updateFinalTranscript=(0,t.debounce)(this.updateFinalTranscript,250,!0))}return R(d,[{key:"setSpeechRecognition",value:function(h){var $=!!h&&((0,p.isNative)(h)||(0,t.browserSupportsPolyfills)());$&&(this.disableRecognition(),this.recognition=new h,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange($)}},{key:"subscribe",value:function(h,$){this.subscribers[h]=$}},{key:"unsubscribe",value:function(h){delete this.subscribers[h]}},{key:"emitListeningChange",value:function(h){var $=this;this.listening=h,Object.keys(this.subscribers).forEach(function(C){var f=$.subscribers[C].onListeningChange;f(h)})}},{key:"emitMicrophoneAvailabilityChange",value:function(h){var $=this;this.isMicrophoneAvailable=h,Object.keys(this.subscribers).forEach(function(C){var f=$.subscribers[C].onMicrophoneAvailabilityChange;f(h)})}},{key:"emitTranscriptChange",value:function(h,$){var C=this;Object.keys(this.subscribers).forEach(function(f){var b=C.subscribers[f].onTranscriptChange;b(h,$)})}},{key:"emitClearTranscript",value:function(){var h=this;Object.keys(this.subscribers).forEach(function($){var C=h.subscribers[$].onClearTranscript;C()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(h){var $=this;Object.keys(this.subscribers).forEach(function(C){var f=$.subscribers[C],b=f.onBrowserSupportsSpeechRecognitionChange,n=f.onBrowserSupportsContinuousListeningChange;b(h),n(h)})}},{key:"disconnect",value:function(h){if(this.recognition&&this.listening)switch(h){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(h){h&&h.error&&h.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(h){var $=h.results,C=h.resultIndex,f=C===void 0?$.length-1:C;this.interimTranscript="",this.finalTranscript="";for(var b=f;b<$.length;++b)$[b].isFinal&&(!(0,r.default)()||$[b][0].confidence>0)?this.updateFinalTranscript($[b][0].transcript):this.interimTranscript=(0,t.concatTranscripts)(this.interimTranscript,$[b][0].transcript);var n=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(n=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,n||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(h){this.finalTranscript=(0,t.concatTranscripts)(this.finalTranscript,h)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var y=s(regeneratorRuntime.mark(function $(){var C,f,b,n,i,g,T=arguments;return regeneratorRuntime.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(C=T.length>0&&T[0]!==void 0?T[0]:{},f=C.continuous,b=f===void 0?!1:f,n=C.language,this.recognition){L.next=3;break}return L.abrupt("return");case 3:if(i=b!==this.recognition.continuous,g=n&&n!==this.recognition.lang,!(i||g)){L.next=11;break}if(!this.listening){L.next=9;break}return L.next=9,this.stopListening();case 9:this.recognition.continuous=i?b:this.recognition.continuous,this.recognition.lang=g?n:this.recognition.lang;case 11:if(this.listening){L.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),L.prev=13,L.next=16,this.start();case 16:this.emitListeningChange(!0),L.next=22;break;case 19:L.prev=19,L.t0=L.catch(13),L.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return L.stop()}},$,this,[[13,19]])}));function h(){return y.apply(this,arguments)}return h}()},{key:"abortListening",value:function(){var y=s(regeneratorRuntime.mark(function $(){var C=this;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),b.next=4,new Promise(function(n){C.onStopListening=n});case 4:case"end":return b.stop()}},$,this)}));function h(){return y.apply(this,arguments)}return h}()},{key:"stopListening",value:function(){var y=s(regeneratorRuntime.mark(function $(){var C=this;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),b.next=4,new Promise(function(n){C.onStopListening=n});case 4:case"end":return b.stop()}},$,this)}));function h(){return y.apply(this,arguments)}return h}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var y=s(regeneratorRuntime.mark(function $(){return regeneratorRuntime.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(!(this.recognition&&!this.listening)){f.next=4;break}return f.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return f.stop()}},$,this)}));function h(){return y.apply(this,arguments)}return h}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),d}();e.default=m})(Wt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var r=O,t=Z,p=he,a=ze,l=v(Wt),s=v(Qe),o=v(et);function v(k){return k&&k.__esModule?k:{default:k}}function R(k,j,A,P,N,M,F){try{var u=k[M](F),c=u.value}catch(w){A(w);return}u.done?j(c):Promise.resolve(c).then(P,N)}function m(k){return function(){var j=this,A=arguments;return new Promise(function(P,N){var M=k.apply(j,A);function F(c){R(M,P,N,F,u,"next",c)}function u(c){R(M,P,N,F,u,"throw",c)}F(void 0)})}}function d(k){return $(k)||h(k)||n(k)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(k){if(typeof Symbol<"u"&&Symbol.iterator in Object(k))return Array.from(k)}function $(k){if(Array.isArray(k))return i(k)}function C(k){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(A){return typeof A}:C=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},C(k)}function f(k,j){return T(k)||g(k,j)||n(k,j)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n(k,j){if(k){if(typeof k=="string")return i(k,j);var A=Object.prototype.toString.call(k).slice(8,-1);if(A==="Object"&&k.constructor&&(A=k.constructor.name),A==="Map"||A==="Set")return Array.from(k);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return i(k,j)}}function i(k,j){(j==null||j>k.length)&&(j=k.length);for(var A=0,P=new Array(j);A<j;A++)P[A]=k[A];return P}function g(k,j){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(k)))){var A=[],P=!0,N=!1,M=void 0;try{for(var F=k[Symbol.iterator](),u;!(P=(u=F.next()).done)&&(A.push(u.value),!(j&&A.length===j));P=!0);}catch(c){N=!0,M=c}finally{try{!P&&F.return!=null&&F.return()}finally{if(N)throw M}}return A}}function T(k){if(Array.isArray(k))return k}var x=!!o.default,L=x&&!(0,s.default)(),D,Y=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=j.transcribing,P=A===void 0?!0:A,N=j.clearTranscriptOnListen,M=N===void 0?!0:N,F=j.commands,u=F===void 0?[]:F,c=(0,r.useState)(W.getRecognitionManager()),w=f(c,1),_=w[0],E=(0,r.useState)(x),z=f(E,2),U=z[0],H=z[1],X=(0,r.useState)(L),G=f(X,2),ge=G[0],ae=G[1],re=(0,r.useReducer)(a.transcriptReducer,{interimTranscript:_.interimTranscript,finalTranscript:""}),nt=f(re,2),rt=nt[0],it=rt.interimTranscript,st=rt.finalTranscript,ot=nt[1],Xt=(0,r.useState)(_.listening),at=f(Xt,2),Zt=at[0],Qt=at[1],en=(0,r.useState)(_.isMicrophoneAvailable),ct=f(en,2),tn=ct[0],nn=ct[1],lt=(0,r.useRef)(u);lt.current=u;var ut=function(){ot((0,p.clearTranscript)())},me=(0,r.useCallback)(function(){_.resetTranscript(),ut()},[_]),rn=function(J,te,ce){var se=C(J)==="object"?J.toString():J,ve=se.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),$e=(0,t.compareTwoStringsUsingDiceCoefficient)(ve,te);return $e>=ce?{command:J,commandWithoutSpecials:ve,howSimilar:$e,isFuzzyMatch:!0}:null},sn=function(J,te){var ce=(0,t.commandToRegExp)(J),se=ce.exec(te);return se?{command:J,parameters:se.slice(1)}:null},pt=(0,r.useCallback)(function(ee,J){lt.current.forEach(function(te){var ce=te.command,se=te.callback,ve=te.matchInterim,$e=ve===void 0?!1:ve,dt=te.isFuzzyMatch,gt=dt===void 0?!1:dt,mt=te.fuzzyMatchingThreshold,an=mt===void 0?.8:mt,vt=te.bestMatchOnly,cn=vt===void 0?!1:vt,Te=!J&&$e?ee.trim():J.trim(),ln=Array.isArray(ce)?ce:[ce],ke=ln.map(function(Q){return gt?rn(Q,Te,an):sn(Q,Te)}).filter(function(Q){return Q});if(gt&&cn&&ke.length>=2){ke.sort(function(Q,Be){return Be.howSimilar-Q.howSimilar});var Ne=ke[0],un=Ne.command,pn=Ne.commandWithoutSpecials,fn=Ne.howSimilar;se(pn,Te,fn,{command:un,resetTranscript:me})}else ke.forEach(function(Q){if(Q.isFuzzyMatch){var Be=Q.command,hn=Q.commandWithoutSpecials,dn=Q.howSimilar;se(hn,Te,dn,{command:Be,resetTranscript:me})}else{var gn=Q.command,mn=Q.parameters;se.apply(void 0,d(mn).concat([{command:gn,resetTranscript:me}]))}})})},[me]),ft=(0,r.useCallback)(function(ee,J){P&&ot((0,p.appendTranscript)(ee,J)),pt(ee,J)},[pt,P]),ht=(0,r.useCallback)(function(){M&&ut()},[M]);(0,r.useEffect)(function(){var ee=W.counter;W.counter+=1;var J={onListeningChange:Qt,onMicrophoneAvailabilityChange:nn,onTranscriptChange:ft,onClearTranscript:ht,onBrowserSupportsSpeechRecognitionChange:H,onBrowserSupportsContinuousListeningChange:ae};return _.subscribe(ee,J),function(){_.unsubscribe(ee)}},[P,M,_,ft,ht]);var on=(0,t.concatTranscripts)(st,it);return{transcript:on,interimTranscript:it,finalTranscript:st,listening:Zt,isMicrophoneAvailable:tn,resetTranscript:me,browserSupportsSpeechRecognition:U,browserSupportsContinuousListening:ge}};e.useSpeechRecognition=Y;var W={counter:0,applyPolyfill:function(j){D?D.setSpeechRecognition(j):D=new l.default(j);var A=!!j&&(0,t.browserSupportsPolyfills)();x=A,L=A},removePolyfill:function(){D?D.setSpeechRecognition(o.default):D=new l.default(o.default),x=!!o.default,L=x&&!(0,s.default)()},getRecognitionManager:function(){return D||(D=new l.default(o.default)),D},getRecognition:function(){var j=W.getRecognitionManager();return j.getRecognition()},startListening:function(){var k=m(regeneratorRuntime.mark(function A(){var P,N,M,F,u=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return P=u.length>0&&u[0]!==void 0?u[0]:{},N=P.continuous,M=P.language,F=W.getRecognitionManager(),w.next=4,F.startListening({continuous:N,language:M});case 4:case"end":return w.stop()}},A)}));function j(){return k.apply(this,arguments)}return j}(),stopListening:function(){var k=m(regeneratorRuntime.mark(function A(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=W.getRecognitionManager(),M.next=3,P.stopListening();case 3:case"end":return M.stop()}},A)}));function j(){return k.apply(this,arguments)}return j}(),abortListening:function(){var k=m(regeneratorRuntime.mark(function A(){var P;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return P=W.getRecognitionManager(),M.next=3,P.abortListening();case 3:case"end":return M.stop()}},A)}));function j(){return k.apply(this,arguments)}return j}(),browserSupportsSpeechRecognition:function(){return x},browserSupportsContinuousListening:function(){return L}},I=W;e.default=I})(Nt);(function(e){function r(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(v){return typeof v}:r=function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},r(s)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return t.useSpeechRecognition}}),e.default=void 0;var t=a(Nt);function p(){if(typeof WeakMap!="function")return null;var s=new WeakMap;return p=function(){return s},s}function a(s){if(s&&s.__esModule)return s;if(s===null||r(s)!=="object"&&typeof s!="function")return{default:s};var o=p();if(o&&o.has(s))return o.get(s);var v={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in s)if(Object.prototype.hasOwnProperty.call(s,m)){var d=R?Object.getOwnPropertyDescriptor(s,m):null;d&&(d.get||d.set)?Object.defineProperty(v,m,d):v[m]=s[m]}return v.default=s,o&&o.set(s,v),v}var l=t.default;e.default=l})(be);const ye=jt(be);var Ft={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var r={}.hasOwnProperty;function t(){for(var p=[],a=0;a<arguments.length;a++){var l=arguments[a];if(l){var s=typeof l;if(s==="string"||s==="number")p.push(l);else if(Array.isArray(l)){if(l.length){var o=t.apply(null,l);o&&p.push(o)}}else if(s==="object"){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){p.push(l.toString());continue}for(var v in l)r.call(l,v)&&l[v]&&p.push(v)}}}return p.join(" ")}e.exports?(t.default=t,e.exports=t):window.classNames=t})()})(Ft);var Lr=Ft.exports;const jr=jt(Lr),{colors:K,shadows:kt,indents:Ke}=q,Pr=de`
  margin-bottom: 7px;
  padding-block: ${Ke.xs};

  display: grid;
  align-items: center;
  grid-template-columns: 1fr 25fr 1fr;

  border: 1px solid transparent;
  background-color: ${({licolor:e})=>e};
  border-radius: ${Ke.xs};
  font-size: 22px;

  &:last-of-type {
    margin-bottom: ${Ke.s};
  }
`,Mr=V.li`
  ${Pr}

  transition: box-shadow 250ms, border-color 250ms;

  &#active-element {
    border-color: ${K.border};
    background-color: ${K.background};
    box-shadow: ${kt.back};

    &:hover {
      border-color: ${K.accent};
    }
    & div button {
      transition: color 250ms;
      color: ${K.smokeBlack};
      &:hover {
        color: ${K.hovered};
      }
    }
  }

  & div button {
    transition: color 250ms;
    &:hover {
      color: ${K.hovered};
    }
  }

  &:hover {
    border-color: ${K.accent};
    box-shadow: ${kt.back};
  }

  &:hover label,
  &:hover button {
    opacity: 1;
  }
`,Kt=de`
  min-height: 19px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & input {
    ${Kn}
  }
`,Or=V.label`
  ${Kt}

  & svg {
    transition: stroke 250ms;
    stroke-width: 2px;
    color: ${({$hovered:e})=>e?K.yellow:"transparent"};
    stroke: ${({$hovered:e})=>e?K.yellow:K.border};
  }
  &:hover svg {
    stroke: ${K.placeholder};
  }
`,Dr=V.label`
  ${Kt}
  opacity: ${({$hovered:e})=>e?1:0};
  transition: opacity 250ms;

  & svg {
    transition: border-color 250ms, color 250ms;
    padding: 1px;
    border: 2px solid ${K.border};
    border-radius: 50%;
    color: ${({$hovered:e})=>e?K.border:"transparent"};
  }
  &:hover svg {
    border-color: ${K.placeholder};
    color: ${({$hovered:e})=>e?K.placeholder:"transparent"};
  }
`,Se=de`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: transparent;
  border-color: transparent;
  transition: opacity 250ms color 250ms;
  color: ${K.black};

  & svg {
    transition: color 250ms;
    color: ${K.border};
  }
  &:hover,
  &:hover svg {
    color: ${K.placeholder};
  }
`,Ir=V.button`
  ${Se}

  opacity: ${({$hovered:e})=>e?1:0};
`,zr=V.button`
  ${Se}

  opacity: 0;
`,{colors:Ie,indents:Vt}=q,Gt=de`
  padding-block: 4px;
  display: grid;
  align-items: start;
  grid-template-columns: 20fr 1fr 20fr;
`,Nr=V.div`
  ${Gt}
`,Br=V.form`
  ${Gt}

  max-height: 70vh;
  overflow-y: scroll;
  scrollbar-width: none;
  grid-template-columns: 12fr 1fr 12fr;
`,Rt=V.textarea`
  height: 84px;
  outline: none;
  border: 1px solid ${Ie.accent};
  border-radius: ${Vt.xs};
  resize: none;
  overflow: clip;
  transition: height 150ms;
`,Wr=V.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &::after {
    content: '';
    height: calc(100% - 8px);
    width: 1px;
    border: 1px solid ${Ie.borderLight};
    transition: border-color 250ms;
  }

  &:hover::after {
    border-color: ${Ie.placeholder};
  }
`,Fr=V.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Kr=V.button`
  ${Se}
`,Je=V.button`
  ${Se}
`,Vr=V.button`
  ${Se}
`,At=V.button`
  height: 100%;
  text-align: left;
  display: flex;
  align-items: top;
  background-color: transparent;
  border-color: transparent;
  border-radius: ${Vt.xs};
  color: ${Ie.black};
  transition: background-color 250ms;
`,Gr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Ur=V.iframe`
  ${Gr}
`,tt=({el:e,setIsForm:r,setRecording:t,setTranslation:p})=>{const a=O.useRef(null),l=O.useRef(null),s=O.useRef(null),o=oe(),{user:v}=pe(),{activeCluster:R}=ne(),[m,d]=O.useState(""),{_id:y,element:h,caption:$}=e,{register:C,watch:f,setValue:b,handleSubmit:n,setFocus:i}=Vn({mode:"onBlur",defaultValues:{element:h,caption:$}});O.useEffect(()=>{b("caption",$)},[$,b]);const{ref:g,...T}=C("element"),{ref:x,...L}=C("caption"),D=[a.current,l.current,s.current],Y=[f("caption"),f("element")];Yn(D,Y),O.useEffect(()=>{i("element"),m&&h.trim().startsWith("der")?b("element",m+h.replace("der","").trim()+", "):m&&h.trim().startsWith("die")?b("element",m+h.replace("die","").trim()+", "):m&&h.trim().startsWith("das")?b("element",m+h.replace("das","").trim()+", "):m?b("element",m+h+", "):b("element",m+h)},[m,h,i,b]);const W=document.querySelector("#modal");O.useEffect(()=>{const A=async P=>{W.children.length===0&&(P.code==="NumpadAdd"||P.key==="F2")&&(P.preventDefault(),await j(v.engine),n(I)()),(P.key==="Enter"||P.key==="§"||W.children.length>0&&P.key==="F2")&&(P.preventDefault(),n(I)(),P.currentTarget.blur()),P.key==="Escape"&&(P.preventDefault(),r(!1),P.currentTarget.blur()),P.code==="AltRight"&&a.current.focus()};return addEventListener("keydown",A),()=>{removeEventListener("keydown",A)}},[]);const I=A=>{const P=v.lang;let N=A.caption.trim(),M=qe(A.element,R.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();M=De(M,","),N=De(N,","),v.lang.includes("en")&&R.lang.includes("de")&&(M.includes("hat")||M.includes("ist"))&&M.split(`
`)[0].split(/,\s+/)[0].endsWith("n")&&(N=N.split(/,\s+/).map(c=>c.startsWith("to ")?c:`to ${c}`).join(", ")),o(y?Pe({_id:y,lang:P,element:M,caption:N}):_t({...e,element:M,caption:N})).then(o(Pt())),y||(Ze(),t(""),p("")),r(!1)},k=()=>{m===""&&d("der "),m==="der "&&d("die "),m==="die "&&d("das "),m==="das "&&d("")},j=async A=>{const P=f("element"),N=qe(P,R.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim(),M={from:R.lang,to:v.lang},F=await we(N,M,A);b("caption",F)};return S.jsxs(Br,{onSubmit:n(I),children:[S.jsx(Rt,{...T,name:"element",ref:A=>{g(A),a.current=A}}),S.jsxs(Fr,{ref:s,children:[S.jsx(Vr,{type:"button",onClick:k,children:S.jsx(Gn,{size:"18px"})}),S.jsx(Je,{type:"button",onClick:()=>j("google"),children:S.jsx(Tn,{size:"16px"})}),S.jsx(Je,{type:"button",onClick:()=>j("deepl"),children:S.jsx(kn,{size:"18px"})}),S.jsx(Kr,{children:S.jsx(Rn,{size:"16px"})})]}),S.jsx(Rt,{...L,name:"caption",ref:A=>{x(A),l.current=A}})]})};tt.propTypes={el:B.object,setIsForm:B.func,setRecording:B.func,setTranslation:B.func};const{button:Hr}=q.shadows,{m:qr}=q.indents,Ut=({className:e})=>{const{user:r}=pe(),[t,p]=O.useState(!1),{activeCluster:a}=ne(),[l,s]=O.useState(""),[o,v]=O.useState(""),{transcript:R,listening:m,resetTranscript:d}=be.useSpeechRecognition(),{isMicrophoneAvailable:y}=be.useSpeechRecognition(),{browserSupportsSpeechRecognition:h}=be.useSpeechRecognition(),$=l.endsWith(", ")||l.replace(/[a-z]$/,"*#").endsWith("*#")?R.replace(/^./,i=>` ${i}`):R.replace(/^./,i=>i.toUpperCase()),C=`${l}${$}`,f=bt(C,wt),b=(i,g)=>i.trim().endsWith(g)?`${i.trim()} `:`${i.trim()}${g} `;if(O.useEffect(()=>{if(!t)return;const i=[".","?","!",","],g=T=>{if(i.includes(T.key)){T.preventDefault();const x=b(f,T.key);s(x),d()}if(T.key==="Backspace"){T.preventDefault();const x=window.getSelection().toString();if(window.getSelection().deleteFromDocument(),x){const L=f.replace(x,"");s(L)}else{const L=f.length-1,D=f.substring(0,L);s(D)}d()}if(T.key==="Space"){T.preventDefault();const x=f+" ";s(x),d()}};return addEventListener("keydown",g),()=>{removeEventListener("keydown",g)}},[t,m,f,d]),O.useEffect(()=>{const i=async g=>{const T=g.key==="F1"||g.key==="r"&&g.metaKey&&!g.altKey&&!g.shiftKey;if(m||T&&(g.preventDefault(),p(!0),ye.startListening({language:a.lang,continuous:!0})),m&&T){g.preventDefault(),ye.stopListening();const x=f.at(-1),L=!x||["!"].includes(x)?f:b(f,"."),D=await we(bt(L,wt),{from:a.lang,to:r.lang},r.engine);s(L),v(D),d()}};return addEventListener("keydown",i),()=>{removeEventListener("keydown",i)}},[a.lang,t,m,f,d,r.engine,r.lang]),O.useEffect(()=>{const i=async g=>{if(g.key==="Escape"||g.key==="Enter"||g.key==="§"){g.preventDefault(),ye.stopListening(),p(!1),s(""),v(""),d();return}};return addEventListener("keyup",i),()=>{removeEventListener("keyup",i)}},[d]),!h||!y)return;const n=async i=>{if(i==null||i.currentTarget.blur(),!m)p(!0),ye.startListening({language:a.lang,continuous:!0});else{ye.stopListening();const g=f.at(-1),T=!g||["!"].includes(g)?f:b(f,"."),x={from:a.lang,to:r.lang},L=await we(T,x,r.engine);s(T),v(L),d()}};return S.jsxs("div",{className:jr(e,!t&&"hidden"),children:[S.jsx(fe,{onClick:n,$s:"m",$round:!0,$bs:Hr,children:m?S.jsx(Cn,{size:18}):S.jsx(An,{size:18})}),t&&S.jsx(En,{$x:`left: ${qr}`,$y:"top: 50%",$bd:"none",children:S.jsx(tt,{el:{cluster:a._id,element:f.trim(),caption:o.trim(),favorite:!0,checked:f.split(/\s+/).length<20},setIsForm:p,setRecording:s,setTranslation:v})})]})};Ut.propTypes={className:B.string};const{background:Ve}=q.colors,{button:Ct}=q.shadows,{s:Et,m:Yr}=q.indents,Ht=({className:e,filtredElements:r,setLiColor:t})=>{const{user:p}=pe(),{activeCluster:a}=ne(),{activeElement:l}=le(),[s,o]=O.useState(null);if(O.useEffect(()=>{const f=window.speechSynthesis.getVoices();Array.isArray(f)&&f.length>0&&o(f),"onvoiceschanged"in window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{const b=window.speechSynthesis.getVoices();o(b)})},[]),!Array.isArray(s)||s.length===0)return;const v=f=>{if(!f.length)return;let b="",n=0;const i=f.reduce((g,T)=>(g[T.lang]||(g[T.lang]=0),g[T.lang]+=1,g),{});for(const g in i)i[g]>n&&(n=i[g],b=g);return b},R=r.length?v(r):p.lang,m=(f,b)=>f.replaceAll(", `",`;${b} `).replaceAll(" `",`${b} `).replaceAll(",`",";"),d=({text:f,playList:b,divider:n})=>{let i="";for(let g=0;g<b.length;g+=1){let T=b[g][f];const x=`@±@${b[g].lang}${n}`;T.endsWith(".")||T.endsWith("!")||T.endsWith("?")||T.endsWith('"')?(i+=m(T,n).replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",f!=="caption"?`__${n}`:`__${x}`).replaceAll(".",f!=="caption"?`.${n}`:`.${x}`).replaceAll(",",f!=="caption"?`,${n}`:`,${x}`).replaceAll("!",f!=="caption"?`!${n}`:`!${x}`).replaceAll("?",f!=="caption"?`?${n}`:`?${x}`).replaceAll(":",f!=="caption"?`:${n}`:`:${x}`),a.lang.includes("de")&&(i=i.replaceAll(`0.${n}`,"0.").replaceAll(`1.${n}`,"1.").replaceAll(`2.${n}`,"2.").replaceAll(`3.${n}`,"3.").replaceAll(`4.${n}`,"4.").replaceAll(`5.${n}`,"5.").replaceAll(`6.${n}`,"6.").replaceAll(`7.${n}`,"7.").replaceAll(`8.${n}`,"8.").replaceAll(`9.${n}`,"9."))):b[g].element.startsWith("[")||(f==="caption"&&(T.includes(" [")&&(T=T.substring(0,T.indexOf(" ["))),T=`${T}@±@${b[g].lang}`),i+=T+n)}return i},y=s,h=f=>{f.currentTarget.blur(),t(Ve);const b="$*@",n=r.findIndex(T=>T.element===l.element),i=r.splice(n===-1?0:n),g=Me({setLiColor:t,divider:b,voices:y,text:d({text:"element",playList:i,divider:b}),lang:a.lang,rate:a.rate});g&&ie.error(g)},$=f=>{f.currentTarget.blur();const b="$*@";t(Ve);const n=r.findIndex(T=>T.element===l.element),i=r.splice(n===-1?0:n),g=Me({setLiColor:t,divider:b,voices:y,text:d({text:"caption",playList:i,divider:b}),lang:R,rate:p.rate});g&&ie.error(g)},C=f=>{f.currentTarget.blur(),t(Ve);let b="";const n="$*@",i=r.findIndex(x=>x.element===l.element),g=r.splice(i===-1?0:i);for(let x=0;x<g.length;x+=1){const{element:L,caption:D,lang:Y}=g[x];if(!L.startsWith("[")){const W=m(L,""),I=D.includes(" [")?D.substring(0,D.indexOf(" [")):m(D,"");b+=W+`@±@${Y}`+I+n}}const T=xn({setLiColor:t,divider:n,voices:y,text:b,lang:a.lang,rate:p.rate});T&&ie.error(T)};return S.jsxs(Xe,{className:e,$m:`${Et} ${Yr}`,$pos:"fixed",$side:"right",$high:"bottom",$gtc:" 1fr 1fr 0.5fr 1fr",$cg:Et,children:[S.jsx(Ut,{}),S.jsx(fe,{onClick:h,$s:"m",$round:!0,$bs:Ct,children:(a==null?void 0:a.lang.at(0).toUpperCase())+(a==null?void 0:a.lang.substring(1))}),S.jsx(zt,{onClick:C}),S.jsx(fe,{onClick:$,$s:"m",$round:!0,$bs:Ct,children:(R==null?void 0:R.at(0).toUpperCase())+(R==null?void 0:R.substring(1))})]})};Ht.propTypes={className:B.string,filtredElements:B.array,setLiColor:B.func};const{background:Jr,backgroundHoverd:Xr}=q.colors,Zr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Qr=V.audio`
  ${Zr}

  &::-webkit-media-controls {
    display: flex;
    justify-content: center;
    background-color: ${Jr};
  }

  &::-webkit-media-controls-panel {
    background-color: ${Xr};
  }
`,qt=({src:e,accessToken:r,expiresIn:t})=>{const p=oe(),a=O.useRef(),[l,s]=O.useState("dump"),o=_n({onSuccess:m=>{const{access_token:d,expires_in:y}=m,h={accessToken:d,expiresIn:y*1e3+Date.now()};p(Ln(h)),v(d)},onError:m=>ie.error(m.message),scope:Fn}),v=async m=>{try{const d=await jn.get(e,{responseType:"blob",headers:{Authorization:`Bearer ${m}`}}).then(h=>h.data),y=URL.createObjectURL(d);s(y)}catch(d){ie.error(d.message)}},R=Date.now()<t;return S.jsx(Qr,{ref:a,src:e.endsWith(".mp3")?e:l,onError:()=>{!R&&o(),R&&v(r)},onPause:m=>m.target.blur(),onEnded:m=>m.target.blur(),controls:!0})};qt.propTypes={src:B.string,accessToken:B.string,expiresIn:B.number};const Yt=({el:e,setLiColor:r})=>{var f,b;const t=oe(),{user:p}=pe(),{activeCluster:a}=ne(),{activeElement:l}=le(),s=e.element,o=Pn(e.caption),[v,R]=O.useState(()=>{var n;return!((n=o.file)!=null&&n.endsWith(".mp3"))}),m="$*@",d=O.useCallback((n,i)=>{let g="";return i?(n.trim().endsWith(".")||n.trim().endsWith("!")||n.trim().endsWith("?")||n.endsWith('"')?(g=n.trim().replaceAll(", `",`;${i} `).replaceAll(" `",`${i} `).replaceAll(",`",";").replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",`__${i}`).replaceAll(".",`.${i}`).replaceAll(",",`,${i}`).replaceAll("!",`!${i}`).replaceAll("?",`?${i}`).replaceAll(":",`:${i}`),a.lang.includes("de")&&(g=g.replaceAll(`0.${i}`,"0.").replaceAll(`1.${i}`,"1.").replaceAll(`2.${i}`,"2.").replaceAll(`3.${i}`,"3.").replaceAll(`4.${i}`,"4.").replaceAll(`5.${i}`,"5.").replaceAll(`6.${i}`,"6.").replaceAll(`7.${i}`,"7.").replaceAll(`8.${i}`,"8.").replaceAll(`9.${i}`,"9."))):g=n.trim()+i,g.includes("[")?g.substring(0,g.indexOf("["))+i:g):n},[a.lang]),y=O.useCallback(n=>{if(s.startsWith("["))return;n==null||n.currentTarget.blur();const i=Me({setLiColor:r,divider:m,voices:window.speechSynthesis.getVoices(),text:d(s,m),lang:a.lang,rate:a.rate});i&&ie.error(i)},[a.lang,a.rate,s,d,r]),h=O.useCallback(n=>{n==null||n.currentTarget.blur();const i=Me({setLiColor:r,divider:m,voices:window.speechSynthesis.getVoices(),text:d(o.text,m),lang:e.lang,rate:p.rate});i&&ie.error(i)},[o.text,e.lang,d,r,p.rate]);O.useEffect(()=>{if(e._id!==(l==null?void 0:l._id))return;const n=i=>{i.key==="ArrowLeft"&&!i.metaKey&&!i.altKey&&!i.shiftKey&&(i.preventDefault(),y()),i.key==="ArrowRight"&&!i.metaKey&&!i.altKey&&!i.shiftKey&&(i.preventDefault(),h())};return addEventListener("keydown",n),()=>{removeEventListener("keydown",n)}},[l==null?void 0:l._id,e._id,h,y]);const $=n=>{if(s.startsWith("[")){R(!v);return}const{_id:i}=a;t(Oe(e)),n.currentTarget.closest("li").id!=="active-element"&&t(je({_id:i,activeEl:e._id}))},C=n=>{n.stopPropagation();const{_id:i,sortBy:g}=a;t(je({_id:i,sortBy:!g})).unwrap().then(T=>{const{sortBy:x}=T.result.cluster;t(Ge({...a,sortBy:x}))})};return S.jsxs(Nr,{onClick:$,children:[S.jsx(At,{onClick:y,children:s}),S.jsx(Wr,{onClick:C}),o.text&&S.jsx(At,{onClick:h,children:o.text}),v&&!o.text&&S.jsx(Ur,{src:o.link}),!v&&!o.text&&S.jsx(qt,{src:o.file,accessToken:(f=p.googleToken)==null?void 0:f.accessToken,expiresIn:(b=p.googleToken)==null?void 0:b.expiresIn})]})};Yt.propTypes={el:B.object,setLiColor:B.func,$active:B.bool,$hovered:B.bool};const Jt=({el:e,index:r,length:t,translateAll:p,liColor:a,setLiColor:l})=>{const s=oe(),o=O.useRef(null),{activeCluster:v}=ne(),{elementTrash:R,activeElement:m,allElements:d}=le(),[y,h]=O.useState(!1),{_id:$,favorite:C,checked:f}=e,b=R.find(D=>D._id===$),n=$===(m==null?void 0:m._id),i=document.querySelector("#modal");O.useEffect(()=>{if(!n)return;const{sortBy:D}=v,Y=m.element.startsWith("["),W=I=>{if(I.key==="F2"&&!Y&&i.children.length===0&&(I.preventDefault(),n&&h(!y),I.currentTarget.blur()),I.key==="ArrowDown"&&!I.metaKey&&!I.altKey&&!I.shiftKey){I.preventDefault();const k=d.findIndex(({_id:j})=>j===m._id);s(Oe(d[D?k-1:k+1])),He(o.current.nextElementSibling)}if(I.key==="ArrowUp"&&!I.metaKey&&!I.altKey&&!I.shiftKey){I.preventDefault();const k=d.findIndex(({_id:j})=>j===m._id);s(Oe(d[D?k+1:k-1])),He(o.current.previousElementSibling)}I.altKey&&I.key==="ArrowDown"&&!I.metaKey&&!I.shiftKey&&(I.preventDefault(),Ze()),I.altKey&&I.key==="ArrowUp"&&!I.metaKey&&!I.shiftKey&&(I.preventDefault(),Lt())};return addEventListener("keydown",W),()=>{removeEventListener("keydown",W)}},[v,m._id,d,s,n,y,i.children.length]);const g=()=>{s(Pe({_id:$,favorite:!C}))},T=()=>{s(Pe({_id:$,checked:!f}))},x=()=>s(zn(e)),L=()=>h(!y);return S.jsxs(Mr,{id:n?"active-element":null,licolor:a,ref:o,children:[S.jsxs(Ue,{$h:"100%",$p:"0",$fd:"column",children:[S.jsxs(Or,{$hovered:C,children:[S.jsx("input",{type:"checkbox",name:"favorite",checked:C,onChange:g}),S.jsx(Wn,{size:"20px"})]}),S.jsxs(Dr,{$hovered:f,children:[S.jsx("input",{type:"checkbox",name:"checked",checked:f,onChange:T}),S.jsx(Mn,{size:"15px"})]}),y&&t===r+1&&S.jsx(Je,{onClick:p,children:S.jsx(On,{size:"16px"})})]}),y&&S.jsx(tt,{el:e,setIsForm:h}),!y&&S.jsx(Yt,{el:e,setLiColor:l}),S.jsxs(Ue,{$h:"100%",$p:"0",$fd:"column",children:[S.jsx(Ir,{$hovered:b,onClick:x,children:S.jsx(Dn,{size:"16px"})}),S.jsx(zr,{onClick:L,children:S.jsx(In,{size:"15px"})})]})]})};Jt.propTypes={el:B.object,index:B.number,length:B.number,translateAll:B.func,liColor:B.string,setLiColor:B.func};const ei=V.ul`
  width: 100%;
  list-style: none;
`,{white:ti}=q.colors,ni=()=>{const e=oe(),{ref:r,inView:t,entry:p}=ir({initialInView:!0,rootMargin:"0px 0px -30px 0px"}),{user:a}=pe(),{activeCluster:l}=ne(),{allElements:s,elementTrash:o,elementFilter:v,isLoading:R}=le(),[m,d]=O.useState(ti);let{elementSelect:y}=le();y=y||[],O.useEffect(()=>{l&&e(Pt({cluster:l._id})).unwrap().then(({result:n})=>{if(!l.activeEl)return;const i=n.elements.find(({_id:g})=>g===l.activeEl);e(Oe(i))}).then(()=>{const n=document.getElementById("active-element");n&&He(n)})},[l,e]);const h=s.filter(n=>n.cluster===(l==null?void 0:l._id)).sort((n,i)=>n.createdAt.localeCompare(i.createdAt)),C=(()=>{const n=o.map(i=>i._id);return y.includes("trash")?h.filter(i=>n.includes(i._id)):h})().filter(({element:n,caption:i,favorite:g,checked:T})=>{const x=n.toLowerCase().replace("·","").includes(v)||n.toLowerCase().includes(v)||i.toLowerCase().includes(v),L=y.includes("wordlist")?x&&Un(n):x,D=()=>y.some(W=>["favorite","unfavorite"].includes(W))?y.includes("favorite")?L&&g===!0:L&&g===!1:L;return(()=>y.some(W=>["checked","unchecked"].includes(W))?y.includes("checked")?D()&&T===!0:D()&&T===!1:D())()}).sort(l.sortBy?(n,i)=>i.createdAt.localeCompare(n.createdAt):(n,i)=>n.createdAt.localeCompare(i.createdAt)),f=async()=>{const n=a.lang;let i=0;await C.forEach(async g=>{if(i>1)return;const{_id:T,element:x}=g;if(!x.startsWith("[")||n!==g.lang){const L={from:l.lang,to:n},D=await we(x,L,a.engine);e(Pe({_id:T,lang:n,caption:D})),i=i+1}})},b=window.innerHeight<(p==null?void 0:p.target.getBoundingClientRect().y)+(p==null?void 0:p.target.getBoundingClientRect().height)*1.5;return S.jsxs(S.Fragment,{children:[S.jsxs(ei,{children:[C.map((n,i,g)=>S.jsx(Jt,{el:n,index:i,length:g.length,translateAll:f,liColor:m,setLiColor:d},n._id)),S.jsxs("div",{ref:r,children:[S.jsx(Dt,{}),S.jsx(It,{className:!t||!b?"shown":"hidden"}),S.jsx(Ht,{className:!t||!b?"shown":"hidden",filtredElements:C,setLiColor:d})]})]}),R&&S.jsx(Nn,{})]})},{s:xt,m:ri}=q.indents,li=()=>S.jsx(Ue,{$p:`0 ${ri} ${xt} ${xt}`,children:S.jsx(ni,{})});export{li as default};
