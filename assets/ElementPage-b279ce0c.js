import{_ as We,r as L,Q as re,$ as wn,t as U,P as N,u as ae,h as he,q as ee,j as $,Z as Je,a0 as ke,w as _e,D as je,H as bt,a1 as jt,a2 as Ze,a3 as Qe,B as pe,X as Sn,y as oe,R as $n,a4 as Tn,a5 as kn,a6 as Rn,p as V,a7 as An,a8 as Pt,o as de,a9 as Ue,aa as Ot,ab as xn,ac as En,ad as Cn,ae as Ln,af as _n,ag as jn,M as Pn,ah as Pe,ai as On,aj as Dn,ak as Mn,al as In,am as zn,an as Oe,i as He,C as Nn,A as Bn,z as Wn,O as qe,ao as Fn,ap as Kn}from"./index-adf586b6.js";import{r as Dt,T as Vn}from"./index-054dd512.js";import{w as Mt,S as Gn}from"./googleScopes-69a7f40b.js";import{v as Un,u as Hn}from"./index.esm-e795559f.js";const Ye=(e,t)=>{if(!t.includes("de"))return e;const n=e.trim().split(`
`);return n.length===1?e:["der","die","das"].includes(n[0].split(" ")[0])?`${n[0].trim()}, ${n[1].split("·")[1].replaceAll("⁰","").replaceAll("/"," / ").trim()}`:(e.includes("hat")||e.includes("ist"))&&!n[0].trim().includes(" ")?`${n[0].trim()}, ${n[1].split("·")[1].trim()}, `+n[1].split("·")[2]:e.includes("am")&&!n[0].trim().includes(" ")?`${n[0].trim()}, ${n[1].split("·")[1].trim()}, `+n[1].split("·")[2]:e},wt=(e,t)=>{let n=e;for(const r in t)n=n.replaceAll(r,t[r]);const a=r=>r.replace(/^./,s=>s.toUpperCase()),o=[...n.split(/\s+/)];for(let r=0;r<o.length;r+=1)[".","!","?"].includes(o[r].at(-1))&&o[r+1]&&o.splice(r+1,1,a(o[r+1]));return o.join(" ")},qn=e=>/[a-z]/.test(e.charAt(0)),{VITE_DEEPL_API_KEY:Yn}={VITE_GOOGLE_CLIENT_ID:"502819804892-294ksvklsg60pjugga88j8l13a6dgmf2.apps.googleusercontent.com",VITE_DEEPL_API_KEY:"d15bf272-fb1f-4f29-bbc3-d3bbdd686c53:fx",VITE_GOOGLE_API_KEY:"AIzaSyABIqXgO4nO0LhnoircvA4SL0uwOY_PxJ4",VITE_PROD_BACK_URL:"https://studyorganizer.onrender.com",BASE_URL:"/studyorganizer/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Xn={google:"",deepl:Yn},De=async(e,{from:t,to:n},a)=>{var c,r;if(!e||e.length===0)return"";const o=e.replaceAll(" ·",",").replaceAll("·","");We.engine=a,We.key=Xn[a];try{let s=await We(`${o}`,{from:t,to:n});if(n.includes("en")&&o.toLowerCase().includes("uhr")&&(s=s.replaceAll("a.m. on","am on").replaceAll("p.m. on","pm on").replaceAll("a.m. to","am to").replaceAll("p.m. to","pm to").replaceAll("a.m.","am.").replaceAll("p.m.","pm.")),[".","!","?"].includes(o.at(-1)))return s;const k=o.split(o.includes(", ")?", ":/\s+/),h=s.split(", "),m=n.includes("de")?h[0]:h[0].at(0).toLowerCase()+h[0].substring(1);return k.length===1?s.toLocaleLowerCase()+", ":["der","die","das"].includes(k[0].split(" ")[0])?s.replace("The ","").replace("the ","").split(", ")[0].toLocaleLowerCase()+", ":n.includes("en")&&((c=k[2])!=null&&c.startsWith("am"))?h[2].startsWith("the")?s:`${m}, ${h[1]}, the ${h[2]}`:(k[0].endsWith("n")&&["hat","ist"].includes((r=k[2])==null?void 0:r.split(" ")[0])&&t.includes("de")&&(s=n.includes("en")?"to "+m+", ":m+", "),s)}catch(s){return s.message}},Me=(e,t)=>e.endsWith(t)?e.substring(0,e.length-1):e,Jn=(e,t)=>{let n=84;e[0]&&(n=Number(e[0].style.height.replace("px",""))),L.useEffect(()=>{if(!e[0])return;let a=Math.max(...e.map(o=>o.scrollHeight));n!==a&&(a=a<=90?a:a+6,e.forEach(o=>{o.style.height=a+"px"}))},[n,e,t])},Zn=()=>{const[e,t]=L.useState("ready"),[n,a]=L.useState(""),[o,c]=L.useState({}),[r,s]=L.useState(0),[d,k]=L.useState(""),h=()=>{a(void 0),t("selecting")},m=y=>{const f=document.getSelection();if(!f)return;const S=f.toString();if(!S){a(void 0),t("ready");return}let A=null;["TEXTAREA","INPUT"].includes(y.target.nodeName)?A=y.target.getBoundingClientRect():A=f.getRangeAt(0).getBoundingClientRect(),c({x:A.left+A.width/2,y:A.top+window.scrollY,width:A.width,height:A.height}),a(S),t("selected");const u=y.target.value||y.target.textContent;u!=="translate"&&k(u);const b=y.target.closest("ul").getBoundingClientRect().width,g=window.innerWidth-b;b&&s(g)};return L.useEffect(()=>(document.addEventListener("selectstart",h),document.addEventListener("mouseup",m),()=>{document.removeEventListener("selectstart",h),document.removeEventListener("mouseup",m)}),[]),{selection:n,position:o,offset:r,state:e,nodeText:d}},Qn=e=>{let t=L.useRef([]);const n=c=>{c.forEach(r=>{const s=window.open(r,"_blank");s?t.current.push(s):re.error(`Failed to open tab: ${r}`)})},a=()=>{t.current.forEach(c=>{c.close()}),t.current=[]},o=L.useCallback(async c=>{let r=[];c.forEach(s=>r.push(s)),a(),n(r)},[]);return L.useEffect(()=>{const c=async r=>{r.metaKey&&r.key==="l"&&!r.altKey&&!r.shiftKey&&(r.preventDefault(),await o(e))};return addEventListener("keydown",c),()=>{removeEventListener("keydown",c)}},[o,e]),{openUrls:o}},Re=[{value:"de",label:"German"},{value:"en",label:"English"},{value:"uk",label:"Ukrainian"},{value:"ru",label:"Russian"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"it",label:"Italian"}],Ae=[{value:.3,label:"Rate: 0.3"},{value:.4,label:"Rate: 0.4"},{value:.5,label:"Rate: 0.5"},{value:.6,label:"Rate: 0.6"},{value:.8,label:"Rate: 0.8"},{value:1,label:"Rate: 1"},{value:1.25,label:"Rate: 1.25"},{value:1.5,label:"Rate: 1.5"}],er={"..":".",". .":".","?.":"?","? .":"?","!.":"!","! .":"!",",,":",",", ,":","},tr={" Dot":"."," dot":"."," exclamation mark":"!"," question mark":"?"," comma":","," colon":":"," semi-colon":";","Yes ":"Yes, ","No ":"No, ","Wow ":"Wow, ","Look ":"Look, "," but":", but"},nr={" Punkt":"."," Ausrufezeichen":"!"," Fragezeichen":"?"," Komma":","," Doppelpunkt":":"," Semikolon":";","Ja ":"Ja, ","Nein ":"Nein, "," weil":", weil"," aber":", aber"," als":", als"," ob":", ob"," damit":", damit"," bevor":", bevor"," obwohl":", obwohl"," dass":", dass"," dann":", dann"," deshalb":", deshalb"," desvegen":", desvegen"," trotzdem":", trotzdem"},St={...tr,...nr,...er},rr=e=>[{de:`https://www.verbformen.com/conjugation/?w=${e}`},{en:`https://dictionary.cambridge.org/dictionary/english-russian/${e}`}];var Xe=new Map,xe=new WeakMap,$t=0,ir=void 0;function sr(e){return e?(xe.has(e)||($t+=1,xe.set(e,$t.toString())),xe.get(e)):"0"}function or(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?sr(e.root):e[t]}`).toString()}function ar(e){const t=or(e);let n=Xe.get(t);if(!n){const a=new Map;let o;const c=new IntersectionObserver(r=>{r.forEach(s=>{var d;const k=s.isIntersecting&&o.some(h=>s.intersectionRatio>=h);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=k),(d=a.get(s.target))==null||d.forEach(h=>{h(k,s)})})},e);o=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:c,elements:a},Xe.set(t,n)}return n}function cr(e,t,n={},a=ir){if(typeof window.IntersectionObserver>"u"&&a!==void 0){const d=e.getBoundingClientRect();return t(a,{isIntersecting:a,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:o,observer:c,elements:r}=ar(n),s=r.get(e)||[];return r.has(e)||r.set(e,s),s.push(t),c.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(r.delete(e),c.unobserve(e)),r.size===0&&(c.disconnect(),Xe.delete(o))}}function lr({threshold:e,delay:t,trackVisibility:n,rootMargin:a,root:o,triggerOnce:c,skip:r,initialInView:s,fallbackInView:d,onChange:k}={}){var h;const[m,y]=L.useState(null),f=L.useRef(k),[S,A]=L.useState({inView:!!s,entry:void 0});f.current=k,L.useEffect(()=>{if(r||!m)return;let x;return x=cr(m,(v,i)=>{A({inView:v,entry:i}),f.current&&f.current(v,i),i.isIntersecting&&c&&x&&(x(),x=void 0)},{root:o,rootMargin:a,threshold:e,trackVisibility:n,delay:t},d),()=>{x&&x()}},[Array.isArray(e)?e.toString():e,m,o,a,c,r,n,d,t]);const u=(h=S.entry)==null?void 0:h.target,b=L.useRef(void 0);!m&&u&&!c&&!r&&b.current!==u&&(b.current=u,A({inView:!!s,entry:void 0}));const g=[y,S.inView,S.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}function It(e){return wn({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M250.73,210.63l-56-112a12,12,0,0,0-21.46,0l-20.52,41A84.2,84.2,0,0,1,114,126.22,107.48,107.48,0,0,0,139.33,68H160a12,12,0,0,0,0-24H108V32a12,12,0,0,0-24,0V44H32a12,12,0,0,0,0,24h83.13A83.69,83.69,0,0,1,96,110.35,84,84,0,0,1,83.6,91a12,12,0,1,0-21.81,10A107.55,107.55,0,0,0,78,126.24,83.54,83.54,0,0,1,32,140a12,12,0,0,0,0,24,107.47,107.47,0,0,0,64-21.07,108.4,108.4,0,0,0,45.39,19.44l-24.13,48.26a12,12,0,1,0,21.46,10.73L151.41,196h65.17l12.68,25.36a12,12,0,1,0,21.47-10.73ZM163.41,172,184,130.83,204.58,172Z"},child:[]}]})(e)}const{backgroundHoverd:Ee,white:Ce,borderLight:Le}=U.colors,zt=()=>{const e=ae(),{user:t}=he(),{activeCluster:n}=ee(),a=({value:s})=>{e(_e({_id:n._id,lang:s})).unwrap().then(d=>e(je(d.result.cluster)))},o=({value:s})=>{e(_e({_id:n._id,rate:s})).unwrap().then(d=>e(je(d.result.cluster)))},c=({value:s})=>{const d=new FormData;d.append("lang",s),e(bt(d))},r=({value:s})=>{const d=new FormData;d.append("rate",s),e(bt(d))};return $.jsxs(Je,{$m:"0",$cg:"8px",$ai:"center",$gtc:"2fr 2fr 2fr 2fr",children:[$.jsx(ke,{options:Re,defaultValue:Re.find(s=>s.value===(n==null?void 0:n.lang)),onChange:a,placeholder:"Language...",$ol:Ee,$b:Ce,$bh:Le}),$.jsx(ke,{options:Ae,defaultValue:Ae.find(s=>s.value==(n==null?void 0:n.rate)),onChange:o,placeholder:"Rate...",$ol:Ee,$b:Ce,$bh:Le}),$.jsx(ke,{options:Re,defaultValue:Re.find(s=>s.value===t.lang),onChange:c,placeholder:"Language...",$ol:Ee,$b:Ce,$bh:Le}),$.jsx(ke,{options:Ae,defaultValue:Ae.find(s=>s.value==t.rate),onChange:r,placeholder:"Rate...",$ol:Ee,$b:Ce,$bh:Le})]})};zt.propTypes={filtredElements:N.array,setLiColor:N.func};const{button:ur}=U.shadows,pr=()=>{const e=ae(),{user:t}=he(),{activeCluster:n}=ee(),a=L.useCallback(async o=>{const c=window.getSelection().toString();c&&await Mt(c);const r=await Dt();let s=Ye(r,n.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();s=Me(s,",");const d={from:n.lang,to:t.lang};let k=await De(s,d,t.engine);k=Me(k.trim(),",");const{_id:h}=n;try{const m={cluster:h,element:"[]",caption:s},y={cluster:h,element:s,caption:k,favorite:!0,checked:s.split(/\s+/).length<20},f=s.includes("https://")?m:y;e(jt(f)).unwrap().then(()=>n.sortBy?Ze():Qe()).finally(()=>{var S;return(S=o==null?void 0:o.target)==null?void 0:S.blur()})}catch(m){o==null||o.currentTarget.blur(),re.error(`Invalid element, ${m.message}`)}},[n,e,t.engine,t.lang]);return L.useEffect(()=>{const o=async c=>{c.key==="e"&&c.metaKey&&!c.altKey&&!c.shiftKey&&(c.preventDefault(),await a())};return addEventListener("keydown",o),()=>{removeEventListener("keydown",o)}},[a]),$.jsx(pe,{onClick:a,$s:"m",$round:!0,$bs:ur,children:$.jsx(Sn,{size:18})})},{button:fr}=U.shadows,hr=()=>{const e=ae(),{elementTrash:t}=oe(),n=()=>{confirm("Are you sure you want to delete the selected Element(s)?")&&e(Tn(t.map(a=>a._id).join("&"))).unwrap().then(()=>e(kn()))};return $.jsx(pe,{onClick:n,$s:"m",$round:!0,$bs:fr,children:$.jsx($n,{size:16})})},{button:dr}=U.shadows,gr=()=>{const{activeCluster:e}=ee();let t=L.useRef([]);const n=c=>{c.forEach(r=>{const s=window.open(r,"_blank");s?t.current.push(s):re.error(`Failed to open tab: ${r}`)})},a=()=>{t.current.forEach(c=>{c.close()}),t.current=[]},o=L.useCallback(async()=>{const c=window.getSelection().toString();c&&await Mt(c);const r=await Dt();let s=[];e.lang.includes("de")&&s.push(`https://www.verbformen.com/conjugation/?w=${r}`),e.lang.includes("en")&&s.push(`https://dictionary.cambridge.org/dictionary/english-russian/${r}`),a(),n(s)},[e.lang]);return L.useEffect(()=>{const c=async r=>{r.metaKey&&r.key==="d"&&!r.altKey&&!r.shiftKey&&(r.preventDefault(),await o())};return addEventListener("keydown",c),()=>{removeEventListener("keydown",c)}},[o]),$.jsx(pe,{onClick:o,$s:"m",$round:!0,$bs:dr,children:$.jsx(It,{size:18})})},{s:Tt,m:mr}=U.indents,Nt=({className:e})=>{const{pathname:t}=Rn(),{elementTrash:n}=oe(),{activeCluster:a}=ee(),o=n.length>0?" 1fr":"",c=a?" 1fr":"",r=o+c+" 1fr";if(t.includes("/element"))return $.jsxs(Je,{className:e,$m:`${Tt} ${mr}`,$pos:"fixed",$side:"left",$high:"bottom",$gtc:r,$cg:Tt,children:[$.jsx(gr,{}),c&&$.jsx(pr,{}),o&&$.jsx(hr,{})]})};Nt.propTypes={className:N.string};const{colors:Fe}=U,vr=V.div`
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  &:hover svg {
    stroke: ${Fe.yellow};
  }

  & svg {
    transition: stroke 250ms;
    stroke: ${Fe.hovered};
    /* stroke: ${({$colored:e})=>e&&Fe.yellow}; */
    @keyframes refresh-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(-360deg);
      }
    }
    animation: refresh-spin infinite 12s linear;
  }
`,Bt=({onClick:e})=>$.jsx(vr,{onClick:e,children:$.jsx(An,{size:"35px"})});Bt.propTypes={onClick:N.func};var yr={exports:{}};(function(e){var t=function(n){var a=Object.prototype,o=a.hasOwnProperty,c=Object.defineProperty||function(p,l,w){p[l]=w.value},r,s=typeof Symbol=="function"?Symbol:{},d=s.iterator||"@@iterator",k=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function m(p,l,w){return Object.defineProperty(p,l,{value:w,enumerable:!0,configurable:!0,writable:!0}),p[l]}try{m({},"")}catch{m=function(l,w,P){return l[w]=P}}function y(p,l,w,P){var _=l&&l.prototype instanceof x?l:x,z=Object.create(_.prototype),q=new B(P||[]);return c(z,"_invoke",{value:R(p,w,q)}),z}n.wrap=y;function f(p,l,w){try{return{type:"normal",arg:p.call(l,w)}}catch(P){return{type:"throw",arg:P}}}var S="suspendedStart",A="suspendedYield",u="executing",b="completed",g={};function x(){}function v(){}function i(){}var T={};m(T,d,function(){return this});var E=Object.getPrototypeOf,D=E&&E(E(M([])));D&&D!==a&&o.call(D,d)&&(T=D);var F=i.prototype=x.prototype=Object.create(T);v.prototype=i,c(F,"constructor",{value:i,configurable:!0}),c(i,"constructor",{value:v,configurable:!0}),v.displayName=m(i,h,"GeneratorFunction");function W(p){["next","throw","return"].forEach(function(l){m(p,l,function(w){return this._invoke(l,w)})})}n.isGeneratorFunction=function(p){var l=typeof p=="function"&&p.constructor;return l?l===v||(l.displayName||l.name)==="GeneratorFunction":!1},n.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,i):(p.__proto__=i,m(p,h,"GeneratorFunction")),p.prototype=Object.create(F),p},n.awrap=function(p){return{__await:p}};function I(p,l){function w(z,q,Y,J){var H=f(p[z],p,q);if(H.type==="throw")J(H.arg);else{var ge=H.arg,ce=ge.value;return ce&&typeof ce=="object"&&o.call(ce,"__await")?l.resolve(ce.__await).then(function(ie){w("next",ie,Y,J)},function(ie){w("throw",ie,Y,J)}):l.resolve(ce).then(function(ie){ge.value=ie,Y(ge)},function(ie){return w("throw",ie,Y,J)})}}var P;function _(z,q){function Y(){return new l(function(J,H){w(z,q,J,H)})}return P=P?P.then(Y,Y):Y()}c(this,"_invoke",{value:_})}W(I.prototype),m(I.prototype,k,function(){return this}),n.AsyncIterator=I,n.async=function(p,l,w,P,_){_===void 0&&(_=Promise);var z=new I(y(p,l,w,P),_);return n.isGeneratorFunction(l)?z:z.next().then(function(q){return q.done?q.value:z.next()})};function R(p,l,w){var P=S;return function(z,q){if(P===u)throw new Error("Generator is already running");if(P===b){if(z==="throw")throw q;return K()}for(w.method=z,w.arg=q;;){var Y=w.delegate;if(Y){var J=j(Y,w);if(J){if(J===g)continue;return J}}if(w.method==="next")w.sent=w._sent=w.arg;else if(w.method==="throw"){if(P===S)throw P=b,w.arg;w.dispatchException(w.arg)}else w.method==="return"&&w.abrupt("return",w.arg);P=u;var H=f(p,l,w);if(H.type==="normal"){if(P=w.done?b:A,H.arg===g)continue;return{value:H.arg,done:w.done}}else H.type==="throw"&&(P=b,w.method="throw",w.arg=H.arg)}}}function j(p,l){var w=l.method,P=p.iterator[w];if(P===r)return l.delegate=null,w==="throw"&&p.iterator.return&&(l.method="return",l.arg=r,j(p,l),l.method==="throw")||w!=="return"&&(l.method="throw",l.arg=new TypeError("The iterator does not provide a '"+w+"' method")),g;var _=f(P,p.iterator,l.arg);if(_.type==="throw")return l.method="throw",l.arg=_.arg,l.delegate=null,g;var z=_.arg;if(!z)return l.method="throw",l.arg=new TypeError("iterator result is not an object"),l.delegate=null,g;if(z.done)l[p.resultName]=z.value,l.next=p.nextLoc,l.method!=="return"&&(l.method="next",l.arg=r);else return z;return l.delegate=null,g}W(F),m(F,h,"Generator"),m(F,d,function(){return this}),m(F,"toString",function(){return"[object Generator]"});function C(p){var l={tryLoc:p[0]};1 in p&&(l.catchLoc=p[1]),2 in p&&(l.finallyLoc=p[2],l.afterLoc=p[3]),this.tryEntries.push(l)}function O(p){var l=p.completion||{};l.type="normal",delete l.arg,p.completion=l}function B(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(C,this),this.reset(!0)}n.keys=function(p){var l=Object(p),w=[];for(var P in l)w.push(P);return w.reverse(),function _(){for(;w.length;){var z=w.pop();if(z in l)return _.value=z,_.done=!1,_}return _.done=!0,_}};function M(p){if(p!=null){var l=p[d];if(l)return l.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var w=-1,P=function _(){for(;++w<p.length;)if(o.call(p,w))return _.value=p[w],_.done=!1,_;return _.value=r,_.done=!0,_};return P.next=P}}throw new TypeError(typeof p+" is not iterable")}n.values=M;function K(){return{value:r,done:!0}}return B.prototype={constructor:B,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!p)for(var l in this)l.charAt(0)==="t"&&o.call(this,l)&&!isNaN(+l.slice(1))&&(this[l]=r)},stop:function(){this.done=!0;var p=this.tryEntries[0],l=p.completion;if(l.type==="throw")throw l.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var l=this;function w(J,H){return z.type="throw",z.arg=p,l.next=J,H&&(l.method="next",l.arg=r),!!H}for(var P=this.tryEntries.length-1;P>=0;--P){var _=this.tryEntries[P],z=_.completion;if(_.tryLoc==="root")return w("end");if(_.tryLoc<=this.prev){var q=o.call(_,"catchLoc"),Y=o.call(_,"finallyLoc");if(q&&Y){if(this.prev<_.catchLoc)return w(_.catchLoc,!0);if(this.prev<_.finallyLoc)return w(_.finallyLoc)}else if(q){if(this.prev<_.catchLoc)return w(_.catchLoc,!0)}else if(Y){if(this.prev<_.finallyLoc)return w(_.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(p,l){for(var w=this.tryEntries.length-1;w>=0;--w){var P=this.tryEntries[w];if(P.tryLoc<=this.prev&&o.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var _=P;break}}_&&(p==="break"||p==="continue")&&_.tryLoc<=l&&l<=_.finallyLoc&&(_=null);var z=_?_.completion:{};return z.type=p,z.arg=l,_?(this.method="next",this.next=_.finallyLoc,g):this.complete(z)},complete:function(p,l){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&l&&(this.next=l),g},finish:function(p){for(var l=this.tryEntries.length-1;l>=0;--l){var w=this.tryEntries[l];if(w.finallyLoc===p)return this.complete(w.completion,w.afterLoc),O(w),g}},catch:function(p){for(var l=this.tryEntries.length-1;l>=0;--l){var w=this.tryEntries[l];if(w.tryLoc===p){var P=w.completion;if(P.type==="throw"){var _=P.arg;O(w)}return _}}throw new Error("illegal catch attempt")},delegateYield:function(p,l,w){return this.delegate={iterator:M(p),resultName:l,nextLoc:w},this.method==="next"&&(this.arg=r),g}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(yr);var be={},Wt={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.browserSupportsPolyfills=Z.compareTwoStringsUsingDiceCoefficient=Z.commandToRegExp=Z.concatTranscripts=Z.debounce=void 0;var br=function(t,n,a){var o;return function(){var c=this,r=arguments,s=function(){o=null,a||t.apply(c,r)},d=a&&!o;clearTimeout(o),o=setTimeout(s,n),d&&t.apply(c,r)}};Z.debounce=br;var wr=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.map(function(o){return o.trim()}).join(" ").trim()};Z.concatTranscripts=wr;var Sr=/\s*\((.*?)\)\s*/g,$r=/(\(\?:[^)]+\))\?/g,Tr=/(\(\?)?:\w+/g,kr=/\*/g,Rr=/[-{}[\]+?.,\\^$|#]/g,Ar=function(t){return t instanceof RegExp?new RegExp(t.source,"i"):(t=t.replace(Rr,"\\$&").replace(Sr,"(?:$1)?").replace(Tr,function(n,a){return a?n:"([^\\s]+)"}).replace(kr,"(.*?)").replace($r,"\\s*$1?\\s*"),new RegExp("^"+t+"$","i"))};Z.commandToRegExp=Ar;var xr=function(t,n){if(t=t.replace(/\s+/g,"").toLowerCase(),n=n.replace(/\s+/g,"").toLowerCase(),!t.length&&!n.length)return 1;if(!t.length||!n.length)return 0;if(t===n)return 1;if(t.length===1&&n.length===1||t.length<2||n.length<2)return 0;for(var a=new Map,o=0;o<t.length-1;o++){var c=t.substring(o,o+2),r=a.has(c)?a.get(c)+1:1;a.set(c,r)}for(var s=0,d=0;d<n.length-1;d++){var k=n.substring(d,d+2),h=a.has(k)?a.get(k):0;h>0&&(a.set(k,h-1),s++)}return 2*s/(t.length+n.length-2)};Z.compareTwoStringsUsingDiceCoefficient=xr;var Er=function(){return typeof window<"u"&&window.navigator!==void 0&&window.navigator.mediaDevices!==void 0&&window.navigator.mediaDevices.getUserMedia!==void 0&&(window.AudioContext!==void 0||window.webkitAudioContext!==void 0)};Z.browserSupportsPolyfills=Er;var fe={},ue={};Object.defineProperty(ue,"__esModule",{value:!0});ue.APPEND_TRANSCRIPT=ue.CLEAR_TRANSCRIPT=void 0;var Cr="CLEAR_TRANSCRIPT";ue.CLEAR_TRANSCRIPT=Cr;var Lr="APPEND_TRANSCRIPT";ue.APPEND_TRANSCRIPT=Lr;Object.defineProperty(fe,"__esModule",{value:!0});fe.appendTranscript=fe.clearTranscript=void 0;var Ft=ue,_r=function(){return{type:Ft.CLEAR_TRANSCRIPT}};fe.clearTranscript=_r;var jr=function(t,n){return{type:Ft.APPEND_TRANSCRIPT,payload:{interimTranscript:t,finalTranscript:n}}};fe.appendTranscript=jr;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.transcriptReducer=void 0;var kt=ue,Pr=Z,Or=function(t,n){switch(n.type){case kt.CLEAR_TRANSCRIPT:return{interimTranscript:"",finalTranscript:""};case kt.APPEND_TRANSCRIPT:return{interimTranscript:n.payload.interimTranscript,finalTranscript:(0,Pr.concatTranscripts)(t.finalTranscript,n.payload.finalTranscript)};default:throw new Error}};ze.transcriptReducer=Or;var Kt={},et={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){return/(android)/i.test(typeof navigator<"u"?navigator.userAgent:"")};e.default=t})(et);var tt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.isNative=void 0;var t=typeof window<"u"&&(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition||window.oSpeechRecognition),n=function(c){return c===t};e.isNative=n;var a=t;e.default=a})(tt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=o(et),n=Z,a=tt;function o(m){return m&&m.__esModule?m:{default:m}}function c(m,y,f,S,A,u,b){try{var g=m[u](b),x=g.value}catch(v){f(v);return}g.done?y(x):Promise.resolve(x).then(S,A)}function r(m){return function(){var y=this,f=arguments;return new Promise(function(S,A){var u=m.apply(y,f);function b(x){c(u,S,A,b,g,"next",x)}function g(x){c(u,S,A,b,g,"throw",x)}b(void 0)})}}function s(m,y){if(!(m instanceof y))throw new TypeError("Cannot call a class as a function")}function d(m,y){for(var f=0;f<y.length;f++){var S=y[f];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function k(m,y,f){return y&&d(m.prototype,y),f&&d(m,f),m}var h=function(){function m(y){s(this,m),this.recognition=null,this.pauseAfterDisconnect=!1,this.interimTranscript="",this.finalTranscript="",this.listening=!1,this.isMicrophoneAvailable=!0,this.subscribers={},this.onStopListening=function(){},this.previousResultWasFinalOnly=!1,this.resetTranscript=this.resetTranscript.bind(this),this.startListening=this.startListening.bind(this),this.stopListening=this.stopListening.bind(this),this.abortListening=this.abortListening.bind(this),this.setSpeechRecognition=this.setSpeechRecognition.bind(this),this.disableRecognition=this.disableRecognition.bind(this),this.setSpeechRecognition(y),(0,t.default)()&&(this.updateFinalTranscript=(0,n.debounce)(this.updateFinalTranscript,250,!0))}return k(m,[{key:"setSpeechRecognition",value:function(f){var S=!!f&&((0,a.isNative)(f)||(0,n.browserSupportsPolyfills)());S&&(this.disableRecognition(),this.recognition=new f,this.recognition.continuous=!1,this.recognition.interimResults=!0,this.recognition.onresult=this.updateTranscript.bind(this),this.recognition.onend=this.onRecognitionDisconnect.bind(this),this.recognition.onerror=this.onError.bind(this)),this.emitBrowserSupportsSpeechRecognitionChange(S)}},{key:"subscribe",value:function(f,S){this.subscribers[f]=S}},{key:"unsubscribe",value:function(f){delete this.subscribers[f]}},{key:"emitListeningChange",value:function(f){var S=this;this.listening=f,Object.keys(this.subscribers).forEach(function(A){var u=S.subscribers[A].onListeningChange;u(f)})}},{key:"emitMicrophoneAvailabilityChange",value:function(f){var S=this;this.isMicrophoneAvailable=f,Object.keys(this.subscribers).forEach(function(A){var u=S.subscribers[A].onMicrophoneAvailabilityChange;u(f)})}},{key:"emitTranscriptChange",value:function(f,S){var A=this;Object.keys(this.subscribers).forEach(function(u){var b=A.subscribers[u].onTranscriptChange;b(f,S)})}},{key:"emitClearTranscript",value:function(){var f=this;Object.keys(this.subscribers).forEach(function(S){var A=f.subscribers[S].onClearTranscript;A()})}},{key:"emitBrowserSupportsSpeechRecognitionChange",value:function(f){var S=this;Object.keys(this.subscribers).forEach(function(A){var u=S.subscribers[A],b=u.onBrowserSupportsSpeechRecognitionChange,g=u.onBrowserSupportsContinuousListeningChange;b(f),g(f)})}},{key:"disconnect",value:function(f){if(this.recognition&&this.listening)switch(f){case"ABORT":this.pauseAfterDisconnect=!0,this.abort();break;case"RESET":this.pauseAfterDisconnect=!1,this.abort();break;case"STOP":default:this.pauseAfterDisconnect=!0,this.stop()}}},{key:"disableRecognition",value:function(){this.recognition&&(this.recognition.onresult=function(){},this.recognition.onend=function(){},this.recognition.onerror=function(){},this.listening&&this.stopListening())}},{key:"onError",value:function(f){f&&f.error&&f.error==="not-allowed"&&(this.emitMicrophoneAvailabilityChange(!1),this.disableRecognition())}},{key:"onRecognitionDisconnect",value:function(){this.onStopListening(),this.listening=!1,this.pauseAfterDisconnect?this.emitListeningChange(!1):this.recognition&&(this.recognition.continuous?this.startListening({continuous:this.recognition.continuous}):this.emitListeningChange(!1)),this.pauseAfterDisconnect=!1}},{key:"updateTranscript",value:function(f){var S=f.results,A=f.resultIndex,u=A===void 0?S.length-1:A;this.interimTranscript="",this.finalTranscript="";for(var b=u;b<S.length;++b)S[b].isFinal&&(!(0,t.default)()||S[b][0].confidence>0)?this.updateFinalTranscript(S[b][0].transcript):this.interimTranscript=(0,n.concatTranscripts)(this.interimTranscript,S[b][0].transcript);var g=!1;this.interimTranscript===""&&this.finalTranscript!==""?(this.previousResultWasFinalOnly&&(g=!0),this.previousResultWasFinalOnly=!0):this.previousResultWasFinalOnly=!1,g||this.emitTranscriptChange(this.interimTranscript,this.finalTranscript)}},{key:"updateFinalTranscript",value:function(f){this.finalTranscript=(0,n.concatTranscripts)(this.finalTranscript,f)}},{key:"resetTranscript",value:function(){this.disconnect("RESET")}},{key:"startListening",value:function(){var y=r(regeneratorRuntime.mark(function S(){var A,u,b,g,x,v,i=arguments;return regeneratorRuntime.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(A=i.length>0&&i[0]!==void 0?i[0]:{},u=A.continuous,b=u===void 0?!1:u,g=A.language,this.recognition){E.next=3;break}return E.abrupt("return");case 3:if(x=b!==this.recognition.continuous,v=g&&g!==this.recognition.lang,!(x||v)){E.next=11;break}if(!this.listening){E.next=9;break}return E.next=9,this.stopListening();case 9:this.recognition.continuous=x?b:this.recognition.continuous,this.recognition.lang=v?g:this.recognition.lang;case 11:if(this.listening){E.next=22;break}return this.recognition.continuous||(this.resetTranscript(),this.emitClearTranscript()),E.prev=13,E.next=16,this.start();case 16:this.emitListeningChange(!0),E.next=22;break;case 19:E.prev=19,E.t0=E.catch(13),E.t0 instanceof DOMException||this.emitMicrophoneAvailabilityChange(!1);case 22:case"end":return E.stop()}},S,this,[[13,19]])}));function f(){return y.apply(this,arguments)}return f}()},{key:"abortListening",value:function(){var y=r(regeneratorRuntime.mark(function S(){var A=this;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.disconnect("ABORT"),this.emitListeningChange(!1),b.next=4,new Promise(function(g){A.onStopListening=g});case 4:case"end":return b.stop()}},S,this)}));function f(){return y.apply(this,arguments)}return f}()},{key:"stopListening",value:function(){var y=r(regeneratorRuntime.mark(function S(){var A=this;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return this.disconnect("STOP"),this.emitListeningChange(!1),b.next=4,new Promise(function(g){A.onStopListening=g});case 4:case"end":return b.stop()}},S,this)}));function f(){return y.apply(this,arguments)}return f}()},{key:"getRecognition",value:function(){return this.recognition}},{key:"start",value:function(){var y=r(regeneratorRuntime.mark(function S(){return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!(this.recognition&&!this.listening)){u.next=4;break}return u.next=3,this.recognition.start();case 3:this.listening=!0;case 4:case"end":return u.stop()}},S,this)}));function f(){return y.apply(this,arguments)}return f}()},{key:"stop",value:function(){this.recognition&&this.listening&&(this.recognition.stop(),this.listening=!1)}},{key:"abort",value:function(){this.recognition&&this.listening&&(this.recognition.abort(),this.listening=!1)}}]),m}();e.default=h})(Kt);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.useSpeechRecognition=void 0;var t=L,n=Z,a=fe,o=ze,c=d(Kt),r=d(et),s=d(tt);function d(R){return R&&R.__esModule?R:{default:R}}function k(R,j,C,O,B,M,K){try{var p=R[M](K),l=p.value}catch(w){C(w);return}p.done?j(l):Promise.resolve(l).then(O,B)}function h(R){return function(){var j=this,C=arguments;return new Promise(function(O,B){var M=R.apply(j,C);function K(l){k(M,O,B,K,p,"next",l)}function p(l){k(M,O,B,K,p,"throw",l)}K(void 0)})}}function m(R){return S(R)||f(R)||g(R)||y()}function y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(R){if(typeof Symbol<"u"&&Symbol.iterator in Object(R))return Array.from(R)}function S(R){if(Array.isArray(R))return x(R)}function A(R){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(C){return typeof C}:A=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},A(R)}function u(R,j){return i(R)||v(R,j)||g(R,j)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g(R,j){if(R){if(typeof R=="string")return x(R,j);var C=Object.prototype.toString.call(R).slice(8,-1);if(C==="Object"&&R.constructor&&(C=R.constructor.name),C==="Map"||C==="Set")return Array.from(R);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return x(R,j)}}function x(R,j){(j==null||j>R.length)&&(j=R.length);for(var C=0,O=new Array(j);C<j;C++)O[C]=R[C];return O}function v(R,j){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(R)))){var C=[],O=!0,B=!1,M=void 0;try{for(var K=R[Symbol.iterator](),p;!(O=(p=K.next()).done)&&(C.push(p.value),!(j&&C.length===j));O=!0);}catch(l){B=!0,M=l}finally{try{!O&&K.return!=null&&K.return()}finally{if(B)throw M}}return C}}function i(R){if(Array.isArray(R))return R}var T=!!s.default,E=T&&!(0,r.default)(),D,F=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=j.transcribing,O=C===void 0?!0:C,B=j.clearTranscriptOnListen,M=B===void 0?!0:B,K=j.commands,p=K===void 0?[]:K,l=(0,t.useState)(W.getRecognitionManager()),w=u(l,1),P=w[0],_=(0,t.useState)(T),z=u(_,2),q=z[0],Y=z[1],J=(0,t.useState)(E),H=u(J,2),ge=H[0],ce=H[1],ie=(0,t.useReducer)(o.transcriptReducer,{interimTranscript:P.interimTranscript,finalTranscript:""}),rt=u(ie,2),it=rt[0],st=it.interimTranscript,ot=it.finalTranscript,at=rt[1],en=(0,t.useState)(P.listening),ct=u(en,2),tn=ct[0],nn=ct[1],rn=(0,t.useState)(P.isMicrophoneAvailable),lt=u(rn,2),sn=lt[0],on=lt[1],ut=(0,t.useRef)(p);ut.current=p;var pt=function(){at((0,a.clearTranscript)())},me=(0,t.useCallback)(function(){P.resetTranscript(),pt()},[P]),an=function(X,ne,le){var se=A(X)==="object"?X.toString():X,ve=se.replace(/[&/\\#,+()!$~%.'":*?<>{}]/g,"").replace(/  +/g," ").trim(),Se=(0,n.compareTwoStringsUsingDiceCoefficient)(ve,ne);return Se>=le?{command:X,commandWithoutSpecials:ve,howSimilar:Se,isFuzzyMatch:!0}:null},cn=function(X,ne){var le=(0,n.commandToRegExp)(X),se=le.exec(ne);return se?{command:X,parameters:se.slice(1)}:null},ft=(0,t.useCallback)(function(te,X){ut.current.forEach(function(ne){var le=ne.command,se=ne.callback,ve=ne.matchInterim,Se=ve===void 0?!1:ve,gt=ne.isFuzzyMatch,mt=gt===void 0?!1:gt,vt=ne.fuzzyMatchingThreshold,un=vt===void 0?.8:vt,yt=ne.bestMatchOnly,pn=yt===void 0?!1:yt,$e=!X&&Se?te.trim():X.trim(),fn=Array.isArray(le)?le:[le],Te=fn.map(function(Q){return mt?an(Q,$e,un):cn(Q,$e)}).filter(function(Q){return Q});if(mt&&pn&&Te.length>=2){Te.sort(function(Q,Be){return Be.howSimilar-Q.howSimilar});var Ne=Te[0],hn=Ne.command,dn=Ne.commandWithoutSpecials,gn=Ne.howSimilar;se(dn,$e,gn,{command:hn,resetTranscript:me})}else Te.forEach(function(Q){if(Q.isFuzzyMatch){var Be=Q.command,mn=Q.commandWithoutSpecials,vn=Q.howSimilar;se(mn,$e,vn,{command:Be,resetTranscript:me})}else{var yn=Q.command,bn=Q.parameters;se.apply(void 0,m(bn).concat([{command:yn,resetTranscript:me}]))}})})},[me]),ht=(0,t.useCallback)(function(te,X){O&&at((0,a.appendTranscript)(te,X)),ft(te,X)},[ft,O]),dt=(0,t.useCallback)(function(){M&&pt()},[M]);(0,t.useEffect)(function(){var te=W.counter;W.counter+=1;var X={onListeningChange:nn,onMicrophoneAvailabilityChange:on,onTranscriptChange:ht,onClearTranscript:dt,onBrowserSupportsSpeechRecognitionChange:Y,onBrowserSupportsContinuousListeningChange:ce};return P.subscribe(te,X),function(){P.unsubscribe(te)}},[O,M,P,ht,dt]);var ln=(0,n.concatTranscripts)(ot,st);return{transcript:ln,interimTranscript:st,finalTranscript:ot,listening:tn,isMicrophoneAvailable:sn,resetTranscript:me,browserSupportsSpeechRecognition:q,browserSupportsContinuousListening:ge}};e.useSpeechRecognition=F;var W={counter:0,applyPolyfill:function(j){D?D.setSpeechRecognition(j):D=new c.default(j);var C=!!j&&(0,n.browserSupportsPolyfills)();T=C,E=C},removePolyfill:function(){D?D.setSpeechRecognition(s.default):D=new c.default(s.default),T=!!s.default,E=T&&!(0,r.default)()},getRecognitionManager:function(){return D||(D=new c.default(s.default)),D},getRecognition:function(){var j=W.getRecognitionManager();return j.getRecognition()},startListening:function(){var R=h(regeneratorRuntime.mark(function C(){var O,B,M,K,p=arguments;return regeneratorRuntime.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return O=p.length>0&&p[0]!==void 0?p[0]:{},B=O.continuous,M=O.language,K=W.getRecognitionManager(),w.next=4,K.startListening({continuous:B,language:M});case 4:case"end":return w.stop()}},C)}));function j(){return R.apply(this,arguments)}return j}(),stopListening:function(){var R=h(regeneratorRuntime.mark(function C(){var O;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return O=W.getRecognitionManager(),M.next=3,O.stopListening();case 3:case"end":return M.stop()}},C)}));function j(){return R.apply(this,arguments)}return j}(),abortListening:function(){var R=h(regeneratorRuntime.mark(function C(){var O;return regeneratorRuntime.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return O=W.getRecognitionManager(),M.next=3,O.abortListening();case 3:case"end":return M.stop()}},C)}));function j(){return R.apply(this,arguments)}return j}(),browserSupportsSpeechRecognition:function(){return T},browserSupportsContinuousListening:function(){return E}},I=W;e.default=I})(Wt);(function(e){function t(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(d){return typeof d}:t=function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},t(r)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useSpeechRecognition",{enumerable:!0,get:function(){return n.useSpeechRecognition}}),e.default=void 0;var n=o(Wt);function a(){if(typeof WeakMap!="function")return null;var r=new WeakMap;return a=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(r===null||t(r)!=="object"&&typeof r!="function")return{default:r};var s=a();if(s&&s.has(r))return s.get(r);var d={},k=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(Object.prototype.hasOwnProperty.call(r,h)){var m=k?Object.getOwnPropertyDescriptor(r,h):null;m&&(m.get||m.set)?Object.defineProperty(d,h,m):d[h]=r[h]}return d.default=r,s&&s.set(r,d),d}var c=n.default;e.default=c})(be);const ye=Pt(be);var Vt={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var a=[],o=0;o<arguments.length;o++){var c=arguments[o];if(c){var r=typeof c;if(r==="string"||r==="number")a.push(c);else if(Array.isArray(c)){if(c.length){var s=n.apply(null,c);s&&a.push(s)}}else if(r==="object"){if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]")){a.push(c.toString());continue}for(var d in c)t.call(c,d)&&c[d]&&a.push(d)}}}return a.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(Vt);var Dr=Vt.exports;const Mr=Pt(Dr),{colors:G,shadows:Rt,indents:Ke}=U,Ir=de`
  margin-bottom: 7px;
  padding-block: ${Ke.xs};

  display: grid;
  align-items: center;
  grid-template-columns: 1fr 25fr 1fr;

  border: 1px solid transparent;
  background-color: ${({$licolor:e})=>e};
  border-radius: ${Ke.xs};
  font-size: 22px;

  &:last-of-type {
    margin-bottom: ${Ke.s};
  }
`,zr=V.li`
  ${Ir}

  transition: box-shadow 250ms, border-color 250ms;

  &#active-element {
    border-color: ${G.border};
    background-color: ${G.background};
    box-shadow: ${Rt.back};

    &:hover {
      border-color: ${G.accent};
    }
    & div button {
      transition: color 250ms;
      color: ${G.smokeBlack};
      &:hover {
        color: ${G.hovered};
      }
    }
  }

  & div button {
    transition: color 250ms;
    &:hover {
      color: ${G.hovered};
    }
  }

  &:hover {
    border-color: ${G.accent};
    box-shadow: ${Rt.back};
  }

  &:hover label,
  &:hover button {
    opacity: 1;
  }
`,Gt=de`
  min-height: 19px;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;

  & input {
    ${Un}
  }
`,Nr=V.label`
  ${Gt}

  & svg {
    transition: stroke 250ms;
    stroke-width: 2px;
    color: ${({$hovered:e})=>e?G.yellow:"transparent"};
    stroke: ${({$hovered:e})=>e?G.yellow:G.border};
  }
  &:hover svg {
    stroke: ${G.placeholder};
  }
`,Br=V.label`
  ${Gt}
  opacity: ${({$hovered:e})=>e?1:0};
  transition: opacity 250ms;

  & svg {
    transition: border-color 250ms, color 250ms;
    padding: 1px;
    border: 2px solid ${G.border};
    border-radius: 50%;
    color: ${({$hovered:e})=>e?G.border:"transparent"};
  }
  &:hover svg {
    border-color: ${G.placeholder};
    color: ${({$hovered:e})=>e?G.placeholder:"transparent"};
  }
`,we=de`
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: transparent;
  border-color: transparent;
  transition: opacity 250ms color 250ms;
  color: ${G.black};

  & svg {
    transition: color 250ms;
    color: ${G.border};
  }
  &:hover,
  &:hover svg {
    color: ${G.placeholder};
  }
`,Wr=V.button`
  ${we}

  opacity: ${({$hovered:e})=>e?1:0};
`,Fr=V.button`
  ${we}

  opacity: 0;
`,{colors:Ie,indents:Ut}=U,Ht=de`
  padding-block: 4px;
  display: grid;
  align-items: start;
  grid-template-columns: 20fr 1fr 20fr;
`,Kr=V.div`
  ${Ht}
`,Vr=V.form`
  ${Ht}

  max-height: 70vh;
  overflow-y: scroll;
  scrollbar-width: none;
  grid-template-columns: 12fr 1fr 12fr;
`,At=V.textarea`
  height: 84px;
  outline: none;
  border: 1px solid ${Ie.backgroundHoverd};
  border-radius: ${Ut.xs};
  resize: none;
  overflow: clip;
  transition: height 150ms;
`,Gr=V.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  &::after {
    content: '';
    height: calc(100% - 8px);
    width: 1px;
    border: 1px solid ${Ie.borderLight};
    transition: border-color 250ms;
  }

  &:hover::after {
    border-color: ${Ie.placeholder};
  }
`,Ur=V.div`
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
`,Hr=V.button`
  ${we}
`,xt=V.button`
  ${we}
`,qr=V.button`
  ${we}
`,Et=V.button`
  height: 100%;
  text-align: left;
  display: flex;
  align-items: top;
  background-color: transparent;
  border-color: transparent;
  border-radius: ${Ut.xs};
  color: ${Ie.black};
  transition: background-color 250ms;

  ${({$mode:e})=>e==="true"&&"cursor: text;"}
  -webkit-user-select: text; /* Safari */
  -ms-user-select: text; /* IE 10 and IE 11 */
  user-select: text; /* Standard syntax */
`,Yr=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,Xr=V.iframe`
  ${Yr}
`,nt=({el:e,handleEdit:t,setRecording:n,setTranslation:a})=>{const o=L.useRef(null),c=L.useRef(null),r=L.useRef(null),s=ae(),{user:d}=he(),{activeCluster:k}=ee(),[h,m]=L.useState(""),{_id:y,element:f,caption:S}=e,{register:A,watch:u,setValue:b,handleSubmit:g,setFocus:x}=Hn({mode:"onBlur",defaultValues:{element:f,caption:S}});L.useEffect(()=>{b("caption",S)},[S,b]);const{ref:v,...i}=A("element"),{ref:T,...E}=A("caption"),D=[o.current,c.current,r.current],F=[u("caption"),u("element")];Jn(D,F),L.useEffect(()=>{x("element"),h&&f.trim().startsWith("der")?b("element",h+f.replace("der","").trim()+", "):h&&f.trim().startsWith("die")?b("element",h+f.replace("die","").trim()+", "):h&&f.trim().startsWith("das")?b("element",h+f.replace("das","").trim()+", "):h?b("element",h+f+", "):b("element",h+f)},[h,f,x,b]);const W=L.useCallback(C=>{const O=d.lang;let B=C.caption.trim(),M=Ye(C.element,k.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim();M=Me(M,","),B=Me(B,","),d.lang.includes("en")&&k.lang.includes("de")&&![".","!","?",'"'].includes(M.at(-1))&&(M.includes("hat")||M.includes("ist"))&&M.split(`
`)[0].split(/,\s+/)[0].endsWith("n")&&(B=B.split(/,\s+/).map(l=>l.startsWith("to ")?l:`to ${l}`).join(", ")),s(y?Ue({_id:y,lang:O,element:M,caption:B}):jt({...e,element:M,caption:B})).then(s(Ot())),!y&&B&&(k.sortBy?Ze():Qe(),n(""),a("")),t(!0)},[y,k.lang,k.sortBy,s,e,t,n,a,d.lang]),I=()=>{h===""&&m("der "),h==="der "&&m("die "),h==="die "&&m("das "),h==="das "&&m("")},R=L.useCallback(async C=>{const O=u("element"),B=Ye(O,k.lang).split(/\s+/).join(" ").replaceAll(`
`," ").trim(),M={from:k.lang,to:d.lang},K=await De(B,M,C);b("caption",K)},[k.lang,b,d.lang,u]),j=document.querySelector("#modal");return L.useEffect(()=>{const C=async O=>{j.children.length===0&&(O.code==="NumpadAdd"||O.key==="F2")&&(O.preventDefault(),await R(d.engine),g(W)()),(O.key==="Enter"||O.key==="§"||j.children.length>0&&O.key==="F2")&&(O.preventDefault(),O.currentTarget.blur(),g(W)()),O.key==="Escape"&&(O.preventDefault(),t(!0),O.currentTarget.blur()),O.code==="AltRight"&&o.current.focus()};return addEventListener("keydown",C),()=>{removeEventListener("keydown",C)}},[t,g,j.children.length,W,R,d.engine]),$.jsxs(Vr,{onSubmit:g(W),children:[$.jsx(At,{...i,name:"element",ref:C=>{v(C),o.current=C}}),$.jsxs(Ur,{ref:r,children:[$.jsx(qr,{type:"button",onClick:I,children:$.jsx(xn,{size:"18px"})}),$.jsx(xt,{type:"button",onClick:()=>R("google"),children:$.jsx(En,{size:"16px"})}),$.jsx(xt,{type:"button",onClick:()=>R("deepl"),children:$.jsx(Cn,{size:"18px"})}),$.jsx(Hr,{children:$.jsx(Ln,{size:"16px"})})]}),$.jsx(At,{...E,name:"caption",ref:C=>{T(C),c.current=C}})]})};nt.propTypes={el:N.object,handleEdit:N.func,setRecording:N.func,setTranslation:N.func};const{button:Jr}=U.shadows,{m:Zr}=U.indents,qt=({className:e})=>{const{user:t}=he(),[n,a]=L.useState(!1),{activeCluster:o}=ee(),[c,r]=L.useState(""),[s,d]=L.useState(""),{transcript:k,listening:h,resetTranscript:m}=be.useSpeechRecognition(),{isMicrophoneAvailable:y}=be.useSpeechRecognition(),{browserSupportsSpeechRecognition:f}=be.useSpeechRecognition(),S=c.endsWith(", ")||c.replace(/[a-z]$/,"*#").endsWith("*#")?k.replace(/^./,v=>` ${v}`):k.replace(/^./,v=>v.toUpperCase()),A=`${c}${S}`,u=wt(A,St),b=(v,i)=>v.trim().endsWith(i)?`${v.trim()} `:`${v.trim()}${i} `;L.useEffect(()=>{if(!n)return;const v=[".","?","!",","],i=T=>{if(v.includes(T.key)){T.preventDefault();const E=b(u,T.key);r(E),m()}if(T.key==="Backspace"){T.preventDefault();const E=window.getSelection().toString();if(window.getSelection().deleteFromDocument(),E){const D=u.replace(E,"");r(D)}else{const D=u.length-1,F=u.substring(0,D);r(F)}m()}if(T.key==="Space"){T.preventDefault();const E=u+" ";r(E),m()}};return addEventListener("keydown",i),()=>{removeEventListener("keydown",i)}},[n,h,u,m]),L.useEffect(()=>{const v=async i=>{const T=i.key==="F1"||i.key==="r"&&i.metaKey&&!i.altKey&&!i.shiftKey;if(h||T&&(i.preventDefault(),a(!0),ye.startListening({language:o.lang,continuous:!0})),h&&T){i.preventDefault(),ye.stopListening();const E=u.at(-1),D=!E||["!"].includes(E)?u:b(u,"."),F=await De(wt(D,St),{from:o.lang,to:t.lang},t.engine);r(D),d(F),m()}};return addEventListener("keydown",v),()=>{removeEventListener("keydown",v)}},[o.lang,n,h,u,m,t.engine,t.lang]);const g=L.useCallback(()=>{ye.stopListening(),a(!1),r(""),d(""),m()},[m]);if(L.useEffect(()=>{const v=i=>{if(i.key==="Escape"||i.key==="Enter"||i.key==="§")return i.preventDefault(),g()};return addEventListener("keyup",v),()=>{removeEventListener("keyup",v)}},[g]),!f||!y)return;const x=async v=>{if(v==null||v.currentTarget.blur(),!h)a(!0),ye.startListening({language:o.lang,continuous:!0});else{ye.stopListening();const i=u.at(-1),T=!i||["!"].includes(i)?u:b(u,"."),E={from:o.lang,to:t.lang},D=await De(T,E,t.engine);r(T),d(D),m()}};return $.jsxs("div",{className:Mr(e,!n&&"hidden"),children:[$.jsxs(pe,{onClick:x,$s:"m",$round:!0,$bs:Jr,children:[!h&&$.jsx(_n,{size:18})," ",h&&$.jsx(jn,{size:18,fill:U.colors.error})]}),n&&$.jsx(Pn,{$x:`left: ${Zr}`,$y:"top: 50%",$bd:h?"listening":"none",btn:!0,onClick:g,children:$.jsx(nt,{el:{cluster:o._id,element:u.trim(),caption:s.trim(),favorite:!0,checked:u.split(/\s+/).length<20},handleEdit:a,setRecording:r,setTranslation:d})})]})};qt.propTypes={className:N.string};const{background:Ve}=U.colors,{button:Ct}=U.shadows,{s:Lt,m:Qr}=U.indents,Yt=({className:e,filtredElements:t,setLiColor:n})=>{const{user:a}=he(),{activeCluster:o}=ee(),{activeElement:c}=oe(),[r,s]=L.useState(null);if(L.useEffect(()=>{const u=window.speechSynthesis.getVoices();Array.isArray(u)&&u.length>0&&s(u),"onvoiceschanged"in window.speechSynthesis&&(window.speechSynthesis.onvoiceschanged=()=>{const b=window.speechSynthesis.getVoices();s(b)})},[]),!Array.isArray(r)||r.length===0)return;const d=u=>{if(!u.length)return;let b="",g=0;const x=u.reduce((v,i)=>(v[i.lang]||(v[i.lang]=0),v[i.lang]+=1,v),{});for(const v in x)x[v]>g&&(g=x[v],b=v);return b},k=t.length?d(t):a.lang,h=(u,b)=>u.replaceAll(", `",`;${b} `).replaceAll(" `",`${b} `).replaceAll(",`",";"),m=({text:u,playList:b,divider:g})=>{let x="";for(let v=0;v<b.length;v+=1){let i=b[v][u];const T=`@±@${b[v].lang}${g}`;[".","!","?",'"'].includes(i.at(-1))?(x+=h(i,g).replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",u!=="caption"?`__${g}`:`__${T}`).replaceAll(".",u!=="caption"?`.${g}`:`.${T}`).replaceAll(",",u!=="caption"?`,${g}`:`,${T}`).replaceAll("!",u!=="caption"?`!${g}`:`!${T}`).replaceAll("?",u!=="caption"?`?${g}`:`?${T}`).replaceAll(":",u!=="caption"?`:${g}`:`:${T}`),o.lang.includes("de")&&(x=x.replaceAll(`0.${g}`,"0.").replaceAll(`1.${g}`,"1.").replaceAll(`2.${g}`,"2.").replaceAll(`3.${g}`,"3.").replaceAll(`4.${g}`,"4.").replaceAll(`5.${g}`,"5.").replaceAll(`6.${g}`,"6.").replaceAll(`7.${g}`,"7.").replaceAll(`8.${g}`,"8.").replaceAll(`9.${g}`,"9."))):b[v].element.startsWith("[")||(u==="caption"&&(i.includes(" [")&&(i=i.substring(0,i.indexOf(" ["))),i=`${i}@±@${b[v].lang}`),x+=i+g)}return x},y=r,f=u=>{u.currentTarget.blur(),n(Ve);const b="$*@",g=t.findIndex(i=>i.element===c.element),x=t.splice(g===-1?0:g),v=Pe({setLiColor:n,divider:b,voices:y,text:m({text:"element",playList:x,divider:b}),lang:o.lang,rate:o.rate});v&&re.error(v)},S=u=>{u.currentTarget.blur();const b="$*@";n(Ve);const g=t.findIndex(i=>i.element===c.element),x=t.splice(g===-1?0:g),v=Pe({setLiColor:n,divider:b,voices:y,text:m({text:"caption",playList:x,divider:b}),lang:k,rate:a.rate});v&&re.error(v)},A=u=>{u.currentTarget.blur(),n(Ve);let b="";const g="$*@",x=t.findIndex(T=>T.element===c.element),v=t.splice(x===-1?0:x);for(let T=0;T<v.length;T+=1){const{element:E,caption:D,lang:F}=v[T];if(!E.startsWith("[")){const W=h(E,""),I=D.includes(" [")?D.substring(0,D.indexOf(" [")):h(D,"");b+=W+`@±@${F}`+I+g}}const i=On({setLiColor:n,divider:g,voices:y,text:b,lang:o.lang,rate:a.rate});i&&re.error(i)};return $.jsxs(Je,{className:e,$m:`${Lt} ${Qr}`,$pos:"fixed",$side:"right",$high:"bottom",$gtc:" 1fr 1fr 0.5fr 1fr",$cg:Lt,children:[$.jsx(qt,{}),$.jsx(pe,{onClick:f,$s:"m",$round:!0,$bs:Ct,children:(o==null?void 0:o.lang.at(0).toUpperCase())+(o==null?void 0:o.lang.substring(1))}),$.jsx(Bt,{onClick:A}),$.jsx(pe,{onClick:S,$s:"m",$round:!0,$bs:Ct,children:(k==null?void 0:k.at(0).toUpperCase())+(k==null?void 0:k.substring(1))})]})};Yt.propTypes={className:N.string,filtredElements:N.array,setLiColor:N.func};const{colors:Ge}=U,ei=V.button`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  padding: 8px;

  display: flex;
  align-items: center;
  font-size: 18px;
  font-weight: 500;

  border: none;
  border-radius: 0.375rem;

  background-color: ${Ge.backdrop};
  color: ${Ge.white};
  transition: opacity 250ms;

  opacity: ${({$selection:e})=>e?1:0};
  pointer-events: ${({$selection:e})=>e?"all":"none"};
  transform: ${({$x:e,$y:t})=>`translate(${e}px, ${t}px)`};

  &::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%) rotate(180deg);
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 10px solid ${Ge.backdrop};
  }
`,Xt=({children:e})=>{var y;const{selection:t,position:n,offset:a,nodeText:o}=Zn(),{openUrls:c}=Qn(),{allElements:r}=oe(),{activeCluster:s}=ee(),d=(y=r.find(f=>f.caption===o))==null?void 0:y.lang,k=s.lang,h=rr(t).map(f=>f[d||k]).filter(f=>f&&f),m=()=>{c(h)};if(t)return $.jsx(ei,{$x:(n==null?void 0:n.x)-16-a,$y:(n==null?void 0:n.y)-98,$selection:t,onClick:m,children:e})};Xt.propTypes={onClick:N.func,children:N.oneOfType([N.string,N.node,N.oneOf(["img","png","svg"])])};const{background:ti,backgroundHoverd:ni}=U.colors,ri=de`
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  height: 54px;
  border-radius: 30px;
`,ii=V.audio`
  ${ri}

  &::-webkit-media-controls {
    display: flex;
    justify-content: center;
    background-color: ${ti};
  }

  &::-webkit-media-controls-panel {
    background-color: ${ni};
  }
`,Jt=({src:e,accessToken:t,expiresIn:n})=>{const a=ae(),o=L.useRef(),[c,r]=L.useState("dump"),s=Dn({onSuccess:h=>{const{access_token:m,expires_in:y}=h,f={accessToken:m,expiresIn:y*1e3+Date.now()};a(Mn(f)),d(m)},onError:h=>re.error(h.message),scope:Gn}),d=async h=>{try{const m=await In.get(e,{responseType:"blob",headers:{Authorization:`Bearer ${h}`}}).then(f=>f.data),y=URL.createObjectURL(m);r(y)}catch(m){re.error(m.message)}},k=Date.now()<n;return $.jsx(ii,{ref:o,src:e.endsWith(".mp3")?e:c,onError:()=>{!k&&s(),k&&d(t)},onPause:h=>h.target.blur(),onEnded:h=>h.target.blur(),controls:!0})};Jt.propTypes={src:N.string,accessToken:N.string,expiresIn:N.number};const Zt=({el:e,setLiColor:t,editCount:n,selectMode:a})=>{var g,x;const o=ae(),{user:c}=he(),{activeCluster:r}=ee(),{activeElement:s}=oe(),d=e.element,k=zn(e.caption),[h,m]=L.useState(()=>{var v;return!((v=k.file)!=null&&v.endsWith(".mp3"))}),y="$*@",f=L.useCallback((v,i)=>{let T="";return i?([".","!","?",'"'].includes(v.trim().at(-1))?(T=v.trim().replaceAll(", `",`;${i} `).replaceAll(" `",`${i} `).replaceAll(",`",";").replaceAll("Mr.","misteR").replaceAll("Ms.","misS").replaceAll("Mrs.","missiS").replaceAll("...",`__${i}`).replaceAll(".",`.${i}`).replaceAll(",",`,${i}`).replaceAll("!",`!${i}`).replaceAll("?",`?${i}`).replaceAll(":",`:${i}`),r.lang.includes("de")&&(T=T.replaceAll(`0.${i}`,"0.").replaceAll(`1.${i}`,"1.").replaceAll(`2.${i}`,"2.").replaceAll(`3.${i}`,"3.").replaceAll(`4.${i}`,"4.").replaceAll(`5.${i}`,"5.").replaceAll(`6.${i}`,"6.").replaceAll(`7.${i}`,"7.").replaceAll(`8.${i}`,"8.").replaceAll(`9.${i}`,"9."))):T=v.trim()+i,T.includes("[")?T.substring(0,T.indexOf("["))+i:T):v},[r.lang]),S=L.useCallback(v=>{if(a||d.startsWith("["))return;v==null||v.currentTarget.blur();const i=Pe({setLiColor:t,divider:y,voices:window.speechSynthesis.getVoices(),text:f(d,y),lang:r.lang,rate:r.rate});i&&re.error(i)},[r.lang,r.rate,d,f,a,t]),A=L.useCallback(v=>{if(a)return;v==null||v.currentTarget.blur();const i=Pe({setLiColor:t,divider:y,voices:window.speechSynthesis.getVoices(),text:f(k.text,y),lang:e.lang,rate:c.rate});i&&re.error(i)},[k.text,e.lang,f,a,t,c.rate]);L.useEffect(()=>{if(n>0||e._id!==(s==null?void 0:s._id))return;const v=i=>{i.key==="ArrowLeft"&&!i.metaKey&&!i.altKey&&!i.shiftKey&&(i.preventDefault(),S()),i.key==="ArrowRight"&&!i.metaKey&&!i.altKey&&!i.shiftKey&&(i.preventDefault(),A())};return addEventListener("keydown",v),()=>{removeEventListener("keydown",v)}},[s==null?void 0:s._id,n,e._id,A,S]);const u=()=>{if(a)return;if(d.startsWith("[")){m(!h);return}const{_id:v,activeEl:i}=r;o(Oe(e)),i!==e._id&&o(_e({_id:v,activeEl:e._id})).unwrap().then(T=>o(je(T.result.cluster)))},b=v=>{v.stopPropagation();const{_id:i,sortBy:T}=r;o(_e({_id:i,sortBy:!T})).unwrap().then(E=>o(je(E.result.cluster)))};return $.jsxs(Kr,{onClick:u,children:[$.jsx(Et,{onClick:S,$mode:`${a}`,children:d}),$.jsx(Gr,{onClick:b}),k.text&&$.jsx(Et,{onClick:A,$mode:`${a}`,children:k.text}),h&&!k.text&&$.jsx(Xr,{src:k.link}),!h&&!k.text&&$.jsx(Jt,{src:k.file,accessToken:(g=c.googleToken)==null?void 0:g.accessToken,expiresIn:(x=c.googleToken)==null?void 0:x.expiresIn})]})};Zt.propTypes={el:N.object,setLiColor:N.func,editCount:N.number,selectMode:N.bool};const Qt=({el:e,liColor:t,setLiColor:n,editCount:a,setEditCount:o,selectMode:c})=>{const r=ae(),s=L.useRef(null),{activeCluster:d}=ee(),{elementTrash:k,activeElement:h,allElements:m}=oe(),[y,f]=L.useState(!1),{_id:S,favorite:A,checked:u}=e,b=k.find(D=>D._id===S),g=S===(h==null?void 0:h._id),x=D=>{f(!D),o(D?a-1:a+1)},v=document.querySelector("#modal");L.useEffect(()=>{if(!g)return;const{sortBy:D}=d,F=h.element.startsWith("["),W=I=>{if(I.key==="F2"&&!F&&v.children.length===0&&(I.preventDefault(),f(!y),o(y?a-1:a+1)),!(a>0)){if(I.key==="ArrowDown"&&!I.metaKey&&!I.altKey&&!I.shiftKey){I.preventDefault();const R=m.findIndex(({_id:j})=>j===(h==null?void 0:h._id));r(Oe(m[D?R-1:R+1])),qe(s.current.nextElementSibling)}if(I.key==="ArrowUp"&&!I.metaKey&&!I.altKey&&!I.shiftKey){I.preventDefault();const R=m.findIndex(({_id:j})=>j===(h==null?void 0:h._id));r(Oe(m[D?R+1:R-1])),qe(s.current.previousElementSibling)}I.altKey&&I.key==="ArrowDown"&&!I.metaKey&&!I.shiftKey&&(I.preventDefault(),Qe()),I.altKey&&I.key==="ArrowUp"&&!I.metaKey&&!I.shiftKey&&(I.preventDefault(),Ze())}};return addEventListener("keydown",W),()=>{removeEventListener("keydown",W)}},[d,h==null?void 0:h._id,h==null?void 0:h.element,m,r,a,g,y,v.children.length,o]);const i=()=>{r(Ue({_id:S,favorite:!A}))},T=()=>{r(Ue({_id:S,checked:!u}))},E=()=>r(Fn(e));return $.jsxs(zr,{id:g?"active-element":null,$licolor:t,ref:s,children:[$.jsxs(He,{$h:"100%",$p:"0",$fd:"column",children:[$.jsxs(Nr,{$hovered:A,children:[$.jsx("input",{type:"checkbox",name:"favorite",checked:A,onChange:i}),$.jsx(Vn,{size:"20px"})]}),$.jsxs(Br,{$hovered:u,children:[$.jsx("input",{type:"checkbox",name:"checked",checked:u,onChange:T}),$.jsx(Nn,{size:"15px"})]})]}),y&&$.jsx(nt,{el:e,handleEdit:x}),!y&&$.jsx(Zt,{el:e,setLiColor:n,editCount:a,selectMode:c}),$.jsxs(He,{$h:"100%",$p:"0",$fd:"column",children:[$.jsx(Wr,{$hovered:b,onClick:E,children:$.jsx(Bn,{size:"16px"})}),$.jsx(Fr,{onClick:()=>x(y),children:$.jsx(Wn,{size:"15px"})})]})]})};Qt.propTypes={el:N.object,liColor:N.string,setLiColor:N.func,editCount:N.number,setEditCount:N.func,selectMode:N.bool};const si=V.ul`
  width: 100%;
  list-style: none;

  & .bar-up {
    transition: transform 250ms;
    transform: translateY(calc(124px - 100vh));
  }
  & .bar-down {
    transition: transform 250ms;
    transform: translateY(0px);
  }
`,{white:oi}=U.colors,ai=()=>{const e=ae(),{activeCluster:t}=ee(),{allElements:n,activeElement:a,elementTrash:o,elementFilter:c,isLoading:r}=oe(),[s,d]=L.useState(oi),[k,h]=L.useState(0),[m,y]=L.useState(!1),{ref:f,inView:S,entry:A}=lr({initialInView:!0,rootMargin:"0px 0px 110px 0px"});L.useEffect(()=>{if(!t)return;const i=()=>{const T=document.getElementById("active-element");T&&qe(T)};(a==null?void 0:a._id)===t.activeEl?i():e(Ot({cluster:t._id})).unwrap().then(({result:T})=>{if(!t.activeEl)return;const E=T.elements.find(({_id:D})=>D===t.activeEl);e(Oe(E))}).then(()=>i())},[]),L.useEffect(()=>{const i=E=>{E.altKey&&y(!0)},T=E=>{E.altKey||y(!1)};return addEventListener("keyup",T),addEventListener("keydown",i),()=>{removeEventListener("keydown",i),removeEventListener("keyup",T)}},[m,y]);let{elementSelect:u}=oe();u=u||[];const b=n.filter(i=>i.cluster===(t==null?void 0:t._id)).sort((i,T)=>i.createdAt.localeCompare(T.createdAt)),x=(()=>{const i=o.map(T=>T._id);return u.includes("trash")?b.filter(T=>i.includes(T._id)):b})().filter(({element:i,caption:T,favorite:E,checked:D})=>{const F=i.toLowerCase().replace("·","").includes(c)||i.toLowerCase().includes(c)||T.toLowerCase().includes(c),W=u.includes("wordlist")?F&&qn(i):F,I=()=>u.some(j=>["favorite","unfavorite"].includes(j))?u.includes("favorite")?W&&E===!0:W&&E===!1:W;return(()=>u.some(j=>["checked","unchecked"].includes(j))?u.includes("checked")?I()&&D===!0:I()&&D===!1:I())()}).sort(t.sortBy?(i,T)=>T.createdAt.localeCompare(i.createdAt):(i,T)=>i.createdAt.localeCompare(T.createdAt)),v=window.innerHeight<(A==null?void 0:A.target.getBoundingClientRect().y)+(A==null?void 0:A.target.getBoundingClientRect().height)*1.5;return $.jsxs($.Fragment,{children:[$.jsxs(si,{children:[x.map(i=>$.jsx(Qt,{el:i,liColor:s,setLiColor:d,editCount:k,setEditCount:h,selectMode:m},i._id)),!r&&$.jsxs("div",{ref:f,children:[$.jsx(zt,{}),$.jsx(Nt,{className:S&&v?"bar-up":"bar-down"}),$.jsx(Yt,{className:S&&v?"bar-up":"bar-down",filtredElements:x,setLiColor:d})]})]}),$.jsxs(Xt,{children:[$.jsx(It,{size:18})," ",$.jsx("span",{children:"translate"})]}),r&&$.jsx(Kn,{})]})},{s:_t,m:ci}=U.indents,hi=()=>$.jsx(He,{$p:`0 ${ci} ${_t} ${_t}`,children:$.jsx(ai,{})});export{hi as default};
